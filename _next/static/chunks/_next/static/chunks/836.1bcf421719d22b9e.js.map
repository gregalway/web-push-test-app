{"version":3,"file":"static/chunks/836.1bcf421719d22b9e.js","mappings":"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","sources":["webpack://_N_E/../../node_modules/@cbhq/client-analytics/node_modules/idb/build/wrap-idb-value.js","webpack://_N_E/../../node_modules/@cbhq/client-analytics/node_modules/idb/build/index.js","webpack://_N_E/../../node_modules/@cbhq/client-analytics/esm/index.js","webpack://_N_E/../../node_modules/@firebase/util/dist/index.esm2017.js","webpack://_N_E/../../node_modules/perfume.js/dist/perfume.esm.min.js","webpack://_N_E/../../node_modules/process/browser.js","webpack://_N_E/../../node_modules/ua-parser-js/src/ua-parser.js","webpack://_N_E/../../node_modules/firebase/app/dist/esm/index.esm.js","webpack://_N_E/../../node_modules/@firebase/messaging/dist/esm/index.sw.esm2017.js"],"sourcesContent":["const instanceOfAny = (object, constructors) => constructors.some((c) => object instanceof c);\n\nlet idbProxyableTypes;\nlet cursorAdvanceMethods;\n// This is a function to prevent it throwing up in node environments.\nfunction getIdbProxyableTypes() {\n    return (idbProxyableTypes ||\n        (idbProxyableTypes = [\n            IDBDatabase,\n            IDBObjectStore,\n            IDBIndex,\n            IDBCursor,\n            IDBTransaction,\n        ]));\n}\n// This is a function to prevent it throwing up in node environments.\nfunction getCursorAdvanceMethods() {\n    return (cursorAdvanceMethods ||\n        (cursorAdvanceMethods = [\n            IDBCursor.prototype.advance,\n            IDBCursor.prototype.continue,\n            IDBCursor.prototype.continuePrimaryKey,\n        ]));\n}\nconst cursorRequestMap = new WeakMap();\nconst transactionDoneMap = new WeakMap();\nconst transactionStoreNamesMap = new WeakMap();\nconst transformCache = new WeakMap();\nconst reverseTransformCache = new WeakMap();\nfunction promisifyRequest(request) {\n    const promise = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            request.removeEventListener('success', success);\n            request.removeEventListener('error', error);\n        };\n        const success = () => {\n            resolve(wrap(request.result));\n            unlisten();\n        };\n        const error = () => {\n            reject(request.error);\n            unlisten();\n        };\n        request.addEventListener('success', success);\n        request.addEventListener('error', error);\n    });\n    promise\n        .then((value) => {\n        // Since cursoring reuses the IDBRequest (*sigh*), we cache it for later retrieval\n        // (see wrapFunction).\n        if (value instanceof IDBCursor) {\n            cursorRequestMap.set(value, request);\n        }\n        // Catching to avoid \"Uncaught Promise exceptions\"\n    })\n        .catch(() => { });\n    // This mapping exists in reverseTransformCache but doesn't doesn't exist in transformCache. This\n    // is because we create many promises from a single IDBRequest.\n    reverseTransformCache.set(promise, request);\n    return promise;\n}\nfunction cacheDonePromiseForTransaction(tx) {\n    // Early bail if we've already created a done promise for this transaction.\n    if (transactionDoneMap.has(tx))\n        return;\n    const done = new Promise((resolve, reject) => {\n        const unlisten = () => {\n            tx.removeEventListener('complete', complete);\n            tx.removeEventListener('error', error);\n            tx.removeEventListener('abort', error);\n        };\n        const complete = () => {\n            resolve();\n            unlisten();\n        };\n        const error = () => {\n            reject(tx.error || new DOMException('AbortError', 'AbortError'));\n            unlisten();\n        };\n        tx.addEventListener('complete', complete);\n        tx.addEventListener('error', error);\n        tx.addEventListener('abort', error);\n    });\n    // Cache it for later retrieval.\n    transactionDoneMap.set(tx, done);\n}\nlet idbProxyTraps = {\n    get(target, prop, receiver) {\n        if (target instanceof IDBTransaction) {\n            // Special handling for transaction.done.\n            if (prop === 'done')\n                return transactionDoneMap.get(target);\n            // Polyfill for objectStoreNames because of Edge.\n            if (prop === 'objectStoreNames') {\n                return target.objectStoreNames || transactionStoreNamesMap.get(target);\n            }\n            // Make tx.store return the only store in the transaction, or undefined if there are many.\n            if (prop === 'store') {\n                return receiver.objectStoreNames[1]\n                    ? undefined\n                    : receiver.objectStore(receiver.objectStoreNames[0]);\n            }\n        }\n        // Else transform whatever we get back.\n        return wrap(target[prop]);\n    },\n    set(target, prop, value) {\n        target[prop] = value;\n        return true;\n    },\n    has(target, prop) {\n        if (target instanceof IDBTransaction &&\n            (prop === 'done' || prop === 'store')) {\n            return true;\n        }\n        return prop in target;\n    },\n};\nfunction replaceTraps(callback) {\n    idbProxyTraps = callback(idbProxyTraps);\n}\nfunction wrapFunction(func) {\n    // Due to expected object equality (which is enforced by the caching in `wrap`), we\n    // only create one new func per func.\n    // Edge doesn't support objectStoreNames (booo), so we polyfill it here.\n    if (func === IDBDatabase.prototype.transaction &&\n        !('objectStoreNames' in IDBTransaction.prototype)) {\n        return function (storeNames, ...args) {\n            const tx = func.call(unwrap(this), storeNames, ...args);\n            transactionStoreNamesMap.set(tx, storeNames.sort ? storeNames.sort() : [storeNames]);\n            return wrap(tx);\n        };\n    }\n    // Cursor methods are special, as the behaviour is a little more different to standard IDB. In\n    // IDB, you advance the cursor and wait for a new 'success' on the IDBRequest that gave you the\n    // cursor. It's kinda like a promise that can resolve with many values. That doesn't make sense\n    // with real promises, so each advance methods returns a new promise for the cursor object, or\n    // undefined if the end of the cursor has been reached.\n    if (getCursorAdvanceMethods().includes(func)) {\n        return function (...args) {\n            // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n            // the original object.\n            func.apply(unwrap(this), args);\n            return wrap(cursorRequestMap.get(this));\n        };\n    }\n    return function (...args) {\n        // Calling the original function with the proxy as 'this' causes ILLEGAL INVOCATION, so we use\n        // the original object.\n        return wrap(func.apply(unwrap(this), args));\n    };\n}\nfunction transformCachableValue(value) {\n    if (typeof value === 'function')\n        return wrapFunction(value);\n    // This doesn't return, it just creates a 'done' promise for the transaction,\n    // which is later returned for transaction.done (see idbObjectHandler).\n    if (value instanceof IDBTransaction)\n        cacheDonePromiseForTransaction(value);\n    if (instanceOfAny(value, getIdbProxyableTypes()))\n        return new Proxy(value, idbProxyTraps);\n    // Return the same value back if we're not going to transform it.\n    return value;\n}\nfunction wrap(value) {\n    // We sometimes generate multiple promises from a single IDBRequest (eg when cursoring), because\n    // IDB is weird and a single IDBRequest can yield many responses, so these can't be cached.\n    if (value instanceof IDBRequest)\n        return promisifyRequest(value);\n    // If we've already transformed this value before, reuse the transformed value.\n    // This is faster, but it also provides object equality.\n    if (transformCache.has(value))\n        return transformCache.get(value);\n    const newValue = transformCachableValue(value);\n    // Not all types are transformed.\n    // These may be primitive types, so they can't be WeakMap keys.\n    if (newValue !== value) {\n        transformCache.set(value, newValue);\n        reverseTransformCache.set(newValue, value);\n    }\n    return newValue;\n}\nconst unwrap = (value) => reverseTransformCache.get(value);\n\nexport { reverseTransformCache as a, instanceOfAny as i, replaceTraps as r, unwrap as u, wrap as w };\n","import { w as wrap, r as replaceTraps } from './wrap-idb-value.js';\nexport { u as unwrap, w as wrap } from './wrap-idb-value.js';\n\n/**\n * Open a database.\n *\n * @param name Name of the database.\n * @param version Schema version.\n * @param callbacks Additional callbacks.\n */\nfunction openDB(name, version, { blocked, upgrade, blocking, terminated } = {}) {\n    const request = indexedDB.open(name, version);\n    const openPromise = wrap(request);\n    if (upgrade) {\n        request.addEventListener('upgradeneeded', (event) => {\n            upgrade(wrap(request.result), event.oldVersion, event.newVersion, wrap(request.transaction), event);\n        });\n    }\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event.newVersion, event));\n    }\n    openPromise\n        .then((db) => {\n        if (terminated)\n            db.addEventListener('close', () => terminated());\n        if (blocking) {\n            db.addEventListener('versionchange', (event) => blocking(event.oldVersion, event.newVersion, event));\n        }\n    })\n        .catch(() => { });\n    return openPromise;\n}\n/**\n * Delete a database.\n *\n * @param name Name of the database.\n */\nfunction deleteDB(name, { blocked } = {}) {\n    const request = indexedDB.deleteDatabase(name);\n    if (blocked) {\n        request.addEventListener('blocked', (event) => blocked(\n        // Casting due to https://github.com/microsoft/TypeScript-DOM-lib-generator/pull/1405\n        event.oldVersion, event));\n    }\n    return wrap(request).then(() => undefined);\n}\n\nconst readMethods = ['get', 'getKey', 'getAll', 'getAllKeys', 'count'];\nconst writeMethods = ['put', 'add', 'delete', 'clear'];\nconst cachedMethods = new Map();\nfunction getMethod(target, prop) {\n    if (!(target instanceof IDBDatabase &&\n        !(prop in target) &&\n        typeof prop === 'string')) {\n        return;\n    }\n    if (cachedMethods.get(prop))\n        return cachedMethods.get(prop);\n    const targetFuncName = prop.replace(/FromIndex$/, '');\n    const useIndex = prop !== targetFuncName;\n    const isWrite = writeMethods.includes(targetFuncName);\n    if (\n    // Bail if the target doesn't exist on the target. Eg, getAll isn't in Edge.\n    !(targetFuncName in (useIndex ? IDBIndex : IDBObjectStore).prototype) ||\n        !(isWrite || readMethods.includes(targetFuncName))) {\n        return;\n    }\n    const method = async function (storeName, ...args) {\n        // isWrite ? 'readwrite' : undefined gzipps better, but fails in Edge :(\n        const tx = this.transaction(storeName, isWrite ? 'readwrite' : 'readonly');\n        let target = tx.store;\n        if (useIndex)\n            target = target.index(args.shift());\n        // Must reject if op rejects.\n        // If it's a write operation, must reject if tx.done rejects.\n        // Must reject with op rejection first.\n        // Must resolve with op value.\n        // Must handle both promises (no unhandled rejections)\n        return (await Promise.all([\n            target[targetFuncName](...args),\n            isWrite && tx.done,\n        ]))[0];\n    };\n    cachedMethods.set(prop, method);\n    return method;\n}\nreplaceTraps((oldTraps) => ({\n    ...oldTraps,\n    get: (target, prop, receiver) => getMethod(target, prop) || oldTraps.get(target, prop, receiver),\n    has: (target, prop) => !!getMethod(target, prop) || oldTraps.has(target, prop),\n}));\n\nexport { deleteDB, openDB };\n","function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : String(i); }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n// Bundled with Packemon: https://packemon.dev\n// Platform: browser, Support: stable, Format: esm\n\nimport UAParser from 'ua-parser-js';\nimport { openDB } from 'idb';\nimport { useRef, useEffect, useCallback } from 'react';\n\n/**\n * Invoke functions that have been listed, in order, passing the result of each function to the next in the list,\n * and then return the final function result as the result of the whole\n * @param {function} that takes an input value and return the same type\n */\nfunction compose(fn1, ...fns) {\n  return fns.reduce((prevFn, nextFn) => value => prevFn(nextFn(value)), fn1);\n}\n\n/* eslint-disable */\n\n// useful type for recursive structure like json\n\nlet AnalyticsQueries = /*#__PURE__*/function (AnalyticsQueries) {\n  AnalyticsQueries[\"fbclid\"] = \"fbclid\";\n  AnalyticsQueries[\"gclid\"] = \"gclid\";\n  AnalyticsQueries[\"msclkid\"] = \"msclkid\";\n  AnalyticsQueries[\"ptclid\"] = \"ptclid\";\n  AnalyticsQueries[\"ttclid\"] = \"ttclid\";\n  AnalyticsQueries[\"utm_source\"] = \"utm_source\";\n  AnalyticsQueries[\"utm_medium\"] = \"utm_medium\";\n  AnalyticsQueries[\"utm_campaign\"] = \"utm_campaign\";\n  AnalyticsQueries[\"utm_term\"] = \"utm_term\";\n  AnalyticsQueries[\"utm_content\"] = \"utm_content\";\n  return AnalyticsQueries;\n}({});\n/**\n * Constants for userTypeEnum - This format protects the leakage of user types into the\n * source of client applications.\n */\nconst UserTypeRetail = 0;\nconst UserTypeInsto = 1;\nconst UserTypeRetailEmployeeInternal = 2;\nconst UserTypeRetailEmployeePersonal = 3;\nconst UserTypeRetailBusinessBanking = 4;\nconst UserTypeCommerce = 5;\nconst UserTypeWallet = 6;\n\n/**\n * These are explicitly tied to UserTypes above for strict verification\n */\n\nlet AnalyticsEventImportance = /*#__PURE__*/function (AnalyticsEventImportance) {\n  AnalyticsEventImportance[\"low\"] = \"low\";\n  AnalyticsEventImportance[\"high\"] = \"high\";\n  return AnalyticsEventImportance;\n}({});\nlet MetricType = /*#__PURE__*/function (MetricType) {\n  MetricType[\"count\"] = \"count\";\n  MetricType[\"rate\"] = \"rate\";\n  MetricType[\"gauge\"] = \"gauge\";\n  MetricType[\"distribution\"] = \"distribution\";\n  MetricType[\"histogram\"] = \"histogram\";\n  return MetricType;\n}({});\n\n// TODO @zizzamia figure out how to use Record<SessionActions, number> here\n\n// TODO @zizzamia figure out how to use Record<SessionActions, number> here\n\n// If you add to this enum, please also update the allowed_subject_type variable in https://config.cbhq.net/development/data/analytics-service-development and https://config.cbhq.net/production/data/analytics-service-production\nlet SubjectType = /*#__PURE__*/function (SubjectType) {\n  SubjectType[\"commerce_merchant\"] = \"commerce_merchant\";\n  SubjectType[\"device\"] = \"device\";\n  SubjectType[\"edp_fingerprint_id\"] = \"edp_fingerprint_id\";\n  SubjectType[\"nft_user\"] = \"nft_user\";\n  SubjectType[\"user\"] = \"user\";\n  SubjectType[\"wallet_user\"] = \"wallet_user\";\n  SubjectType[\"uuid\"] = \"user_uuid\";\n  return SubjectType;\n}({});\n// If you add to this enum, please also update the allowed_component_type variable in https://config.cbhq.net/development/data/analytics-service-development and https://config.cbhq.net/production/data/analytics-service-production\nlet ComponentType = /*#__PURE__*/function (ComponentType) {\n  ComponentType[\"unknown\"] = \"unknown\";\n  ComponentType[\"banner\"] = \"banner\";\n  ComponentType[\"button\"] = \"button\";\n  ComponentType[\"card\"] = \"card\";\n  ComponentType[\"chart\"] = \"chart\";\n  ComponentType[\"content_script\"] = \"content_script\";\n  ComponentType[\"dropdown\"] = \"dropdown\";\n  ComponentType[\"link\"] = \"link\";\n  ComponentType[\"page\"] = \"page\";\n  ComponentType[\"modal\"] = \"modal\";\n  ComponentType[\"table\"] = \"table\";\n  ComponentType[\"search_bar\"] = \"search_bar\";\n  ComponentType[\"service_worker\"] = \"service_worker\";\n  ComponentType[\"text\"] = \"text\";\n  ComponentType[\"text_input\"] = \"text_input\";\n  ComponentType[\"tray\"] = \"tray\";\n  ComponentType[\"checkbox\"] = \"checkbox\";\n  ComponentType[\"icon\"] = \"icon\";\n  ComponentType[\"app\"] = \"app\";\n  return ComponentType;\n}({});\n\n// If you add to this enum, please also update the allowed_action_type variable in: https://config.cbhq.net/development/data/analytics-service-development and https://config.cbhq.net/production/data/analytics-service-production\nlet ActionType = /*#__PURE__*/function (ActionType) {\n  ActionType[\"unknown\"] = \"unknown\";\n  ActionType[\"blur\"] = \"blur\";\n  ActionType[\"click\"] = \"click\";\n  ActionType[\"change\"] = \"change\";\n  ActionType[\"dismiss\"] = \"dismiss\";\n  ActionType[\"focus\"] = \"focus\";\n  ActionType[\"hover\"] = \"hover\";\n  ActionType[\"select\"] = \"select\";\n  ActionType[\"measurement\"] = \"measurement\";\n  ActionType[\"move\"] = \"move\";\n  ActionType[\"process\"] = \"process\";\n  ActionType[\"render\"] = \"render\";\n  ActionType[\"scroll\"] = \"scroll\";\n  ActionType[\"view\"] = \"view\";\n  ActionType[\"search\"] = \"search\";\n  ActionType[\"keyPress\"] = \"keyPress\";\n  return ActionType;\n}({});\n\n// If you add to this enum, please also update the allowed_platform variable in: https://config.cbhq.net/development/data/analytics-service-development and https://config.cbhq.net/production/data/analytics-service-production\nlet PlatformName = /*#__PURE__*/function (PlatformName) {\n  PlatformName[\"unknown\"] = \"unknown\";\n  PlatformName[\"web\"] = \"web\";\n  PlatformName[\"android\"] = \"android\";\n  PlatformName[\"ios\"] = \"ios\";\n  PlatformName[\"mobile_web\"] = \"mobile_web\";\n  PlatformName[\"tablet_web\"] = \"tablet_web\";\n  PlatformName[\"server\"] = \"server\";\n  PlatformName[\"windows\"] = \"windows\";\n  PlatformName[\"macos\"] = \"macos\";\n  PlatformName[\"extension\"] = \"extension\";\n  return PlatformName;\n}({});\n\n/**\n * @deprecated This is no longer required and will be removed in the next major version update (8.0.0)\n */\n\nlet AuthStatus = /*#__PURE__*/function (AuthStatus) {\n  AuthStatus[AuthStatus[\"notLoggedIn\"] = 0] = \"notLoggedIn\";\n  AuthStatus[AuthStatus[\"loggedIn\"] = 1] = \"loggedIn\";\n  return AuthStatus;\n}({});\nlet SessionActions = /*#__PURE__*/function (SessionActions) {\n  SessionActions[\"ac\"] = \"ac\";\n  SessionActions[\"af\"] = \"af\";\n  SessionActions[\"ah\"] = \"ah\";\n  SessionActions[\"al\"] = \"al\";\n  SessionActions[\"am\"] = \"am\";\n  SessionActions[\"ar\"] = \"ar\";\n  SessionActions[\"as\"] = \"as\";\n  return SessionActions;\n}({}); // action search\nlet SessionAutomatedEvents = /*#__PURE__*/function (SessionAutomatedEvents) {\n  SessionAutomatedEvents[\"pv\"] = \"pv\";\n  return SessionAutomatedEvents;\n}({}); // pageview\nlet SessionRank = /*#__PURE__*/function (SessionRank) {\n  SessionRank[\"xs\"] = \"xs\";\n  SessionRank[\"s\"] = \"s\";\n  SessionRank[\"m\"] = \"m\";\n  SessionRank[\"l\"] = \"l\";\n  SessionRank[\"xl\"] = \"xl\";\n  SessionRank[\"xxl\"] = \"xxl\";\n  return SessionRank;\n}({});\n\n// With this trick we can use both ActionType and string\n\n// https://docs.datadoghq.com/tracing/guide/send_traces_to_agent_by_api/#model\n\n/* eslint-enable */\n\nconst AMPLITUDE_API_VERSION = '2';\n\n/**\n * Never use API paths or domain directly.\n * Read from config\n */\nconst DEV_DOMAIN = 'https://analytics-service-dev.cbhq.net';\nconst PROD_DOMAIN = 'https://as.coinbase.com';\nconst DEV_INTERNAL_DOMAIN = 'https://analytics-service-internal-dev.cbhq.net';\nconst PROD_INTERNAL_DOMAIN = 'https://analytics-service-internal.cbhq.net';\nconst EVENTS_API_PATH = '/amp';\nconst METRICS_API_PATH = '/metrics';\nconst EXPOSURE_API_PATH = '/track-exposures';\nconst TRACES_API_PATH = '/traces';\nconst ANALYTICS_SDK_VERSION = '11.3.1';\n// MS compared with Date.now()\nconst EXPOSURE_MIN_INTERVAL = 300 * 1000;\nconst BATCH_PERIOD = 5 * 1000; // 5s\nconst BATCH_THRESHOLD = 30;\nconst DB_ANALYTICS_ITEM = 'analytics-db';\nconst DB_EXPOSURE_ITEM = 'experiment-exposure-db';\nconst DB_NAME = 'keyval-store';\nconst DEBUG_LOGGING_PREFIX = 'Analytics SDK:';\nconst MAX_EVENT_DATA_QUEUE_LIMIT = 10;\nconst SESSION_TIMEOUT = 30 * 60 * 1000; // 30 minutes\n// All User Acquisition Queries\nconst UAA_QUERIES = Object.values(AnalyticsQueries);\nconst PAGEVIEW_EVENT_TYPE = 'pageview';\nconst SESSIONS_DURATION_EVENT_TYPE = 'session_duration';\nconst PERF_EVENTS = {\n  navigationTiming: {\n    eventName: 'perf_navigation_timing'\n  },\n  redirectTime: {\n    eventName: 'perf_redirect_time'\n  },\n  RT: {\n    eventName: 'perf_redirect_time'\n  },\n  TTFB: {\n    eventName: 'perf_time_to_first_byte'\n  },\n  networkInformation: {\n    eventName: 'perf_network_information'\n  },\n  storageEstimate: {\n    eventName: 'perf_storage_estimate'\n  },\n  FCP: {\n    eventName: 'perf_first_contentful_paint'\n  },\n  FID: {\n    eventName: 'perf_first_input_delay'\n  },\n  LCP: {\n    eventName: 'perf_largest_contentful_paint'\n  },\n  CLS: {\n    eventName: 'perf_cumulative_layout_shift'\n  },\n  TBT: {\n    eventName: 'perf_total_blocking_time'\n  },\n  NTBT: {\n    eventName: 'perf_navigation_total_blocking_time'\n  },\n  INP: {\n    eventName: 'perf_interact_to_next_paint'\n  },\n  ET: {\n    eventName: 'perf_element_timing'\n  },\n  userJourneyStep: {\n    eventName: 'perf_user_journey_step'\n  }\n};\n\n// Tracing\nconst DEFAULT_SPAN_PARENT_ID = '1';\nconst DEFAULT_SPAN_TYPE = 'web';\nconst DEFAULT_REVOKED_QUERY_PARAMS = ['access_token', 'refresh_token', 'reset_token'];\n\n/* eslint-disable */\n\n/**\n * use this regex to test custom end point\n */\nconst ENDPOINT_VALIDATION_REGEX = /^(https?:\\/\\/)/;\nconst HTTPS_PREFIX = 'https://';\nfunction buildAPIEndPoints(domain) {\n  return {\n    eventsEndpoint: domain + EVENTS_API_PATH,\n    metricsEndPoint: domain + METRICS_API_PATH,\n    exposureEndpoint: domain + EXPOSURE_API_PATH,\n    tracesEndpoint: domain + TRACES_API_PATH\n  };\n}\n\n/**\n * Analytics SDK main configuration options\n */\nconst config = _objectSpread(_objectSpread({\n  authCookie: 'logged_in',\n  amplitudeApiKey: '',\n  batchEventsPeriod: BATCH_PERIOD,\n  batchEventsThreshold: BATCH_THRESHOLD,\n  batchMetricsPeriod: BATCH_PERIOD,\n  batchMetricsThreshold: BATCH_THRESHOLD,\n  batchTracesPeriod: BATCH_PERIOD,\n  batchTracesThreshold: BATCH_THRESHOLD,\n  headers: {},\n  interactionManager: null,\n  isAlwaysAuthed: false,\n  isProd: false,\n  isInternalApplication: false,\n  onError: (err, metadata) => {\n    console.error(DEBUG_LOGGING_PREFIX, err, metadata);\n  },\n  platform: PlatformName.unknown,\n  projectName: '',\n  ricTimeoutScheduleEvent: 1000,\n  ricTimeoutSetDevice: 500,\n  showDebugLogging: false,\n  trackUserId: false,\n  version: null,\n  apiEndpoint: DEV_DOMAIN\n}, buildAPIEndPoints(DEV_DOMAIN)), {}, {\n  steps: {},\n  disableReporting: false\n});\nconst getSecuredEndpoint = properties => {\n  if (!properties.apiEndpoint) {\n    return properties.isInternalApplication ? PROD_INTERNAL_DOMAIN : PROD_DOMAIN;\n  }\n  return ENDPOINT_VALIDATION_REGEX.test(properties.apiEndpoint) ? properties.apiEndpoint : `${HTTPS_PREFIX}${properties.apiEndpoint}`;\n};\nconst enhanceApiEndpoint = properties => {\n  if (!properties.isProd) {\n    if (properties.isInternalApplication) {\n      properties.apiEndpoint = DEV_INTERNAL_DOMAIN;\n      return _objectSpread(_objectSpread({}, properties), buildAPIEndPoints(properties.apiEndpoint));\n    } else {\n      return properties;\n    }\n  }\n  const apiEndpoint = getSecuredEndpoint(properties);\n  return _objectSpread(_objectSpread({}, properties), {}, {\n    apiEndpoint\n  }, buildAPIEndPoints(apiEndpoint));\n};\nfunction enhanceRevokedQueryParams(properties) {\n  const toAdd = properties.revokedQueryParams ? properties.revokedQueryParams : [];\n  return _objectSpread(_objectSpread({}, properties), {}, {\n    revokedQueryParams: DEFAULT_REVOKED_QUERY_PARAMS.concat(toAdd)\n  });\n}\nfunction disableReporting(properties) {\n  if (properties.disableReporting) {\n    Object.assign(properties, _objectSpread(_objectSpread({}, properties), {}, {\n      onError: () => {}\n    }));\n  }\n  return _objectSpread({}, properties);\n}\nconst enhanceConfig = compose(enhanceApiEndpoint, enhanceRevokedQueryParams, disableReporting);\nconst setConfig = properties => {\n  const batchEventsThreshold = properties.batchEventsThreshold,\n    batchMetricsThreshold = properties.batchMetricsThreshold,\n    batchTracesThreshold = properties.batchTracesThreshold;\n  const batchThresholds = [batchEventsThreshold, batchMetricsThreshold, batchTracesThreshold];\n  for (const threshhold of batchThresholds) {\n    if ((threshhold || 0) > BATCH_THRESHOLD) {\n      console.warn(`You are setting the threshhold for the batch limit to be greater than ${BATCH_THRESHOLD}. This may cause request overload.`);\n      break;\n    }\n  }\n  Object.assign(config, enhanceConfig(properties));\n};\n\n/* eslint-enable */\n\nconst Platforms = [PlatformName.web, PlatformName.mobile_web, PlatformName.tablet_web];\n\n// Copy of cds breakpoints\nconst deviceBreakpoints = {\n  phone: 360,\n  phoneLandscape: 560,\n  tablet: 768,\n  tabletLandscape: 1024,\n  desktop: 1280,\n  desktopLarge: 1440,\n  extraWide: 1600\n};\nfunction isAndroidPlatform() {\n  return config.platform === 'android';\n}\nfunction isIOSPlatform() {\n  return config.platform === 'ios';\n}\nfunction isMobileWeb() {\n  const mediaQueryList = window.matchMedia(`(max-width: ${deviceBreakpoints.phoneLandscape}px)`);\n  return mediaQueryList.matches;\n}\nfunction isTabletWeb() {\n  const mediaQueryList = window.matchMedia(`(max-width: ${deviceBreakpoints.tabletLandscape}px, min-width: ${deviceBreakpoints.phoneLandscape + 1}px)`);\n  return mediaQueryList.matches;\n}\nfunction isWebPlatform() {\n  return Platforms.includes(config.platform);\n}\nfunction postMessage(message) {\n  if (!isWebPlatform()) {\n    return;\n  }\n  if (navigator && 'serviceWorker' in navigator && navigator.serviceWorker.controller) {\n    // Could be an edge case when the Browser makes an attempt\n    // to send a message to a Service Worker that is no longer usable\n    try {\n      navigator.serviceWorker.controller.postMessage(message);\n    } catch (e) {\n      if (e instanceof Error) {\n        config.onError(e);\n      }\n    }\n  }\n}\n\n/* eslint-disable */\n\n/**\n * Cross-platform device information\n */\nconst device = {\n  // Amplitude legacy log event properties\n  amplitudeOSName: null,\n  amplitudeOSVersion: null,\n  amplitudeDeviceModel: null,\n  // Device information\n  browserName: null,\n  browserMajor: null,\n  osName: null,\n  userAgent: null,\n  width: null,\n  height: null\n};\n\n/**\n * Information need it to identify the user experience.\n */\nconst identity = {\n  countryCode: null,\n  deviceId: null,\n  device_os: null,\n  deviceClass: 'unknown',\n  isOptOut: false,\n  locale: null,\n  jwt: null,\n  session_lcc_id: null,\n  userAgent: null,\n  userId: null\n};\n\n/**\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f, and\n * y is replaced with a random hexadecimal digit from 8 to b.\n */\nconst generateUUID = input => {\n  return input ? (input ^ Math.random() * 16 >> input / 4).toString(16) : '10000000-1000-4000-8000-100000000000'.replace(/[018]/g, generateUUID);\n};\nconst getIsAuthed = () => {\n  return config.isAlwaysAuthed || !!identity.userId;\n};\n\n/**\n * User Properties is a legacy concept from Amplitude\n */\nconst getUserProperties = () => {\n  const userProperties = {};\n  // The extra \"if\" helps Types safe\n  if (identity.countryCode) {\n    userProperties.country_code = identity.countryCode;\n  }\n  return userProperties;\n};\n\n/**\n * Define platform value based on the Analytics Service standard\n */\nconst getPlatformValue = () => {\n  const platform = config.platform;\n  if (platform === PlatformName.web) {\n    switch (true) {\n      case isMobileWeb():\n        return PlatformName.mobile_web;\n      case isTabletWeb():\n        return PlatformName.tablet_web;\n    }\n  }\n  return platform;\n};\n\n/**\n * Set device information based on the platform used\n */\nconst setDevice = () => {\n  if (isWebPlatform()) {\n    if ('requestIdleCallback' in window) {\n      window.requestIdleCallback(setUAParser, {\n        timeout: config.ricTimeoutSetDevice\n      });\n    } else {\n      setUAParser();\n    }\n    device.userAgent = window?.navigator?.userAgent || null;\n    setDeviceSize({\n      height: window?.innerHeight ?? null,\n      width: window?.innerWidth ?? null\n    });\n  } else if (isIOSPlatform()) {\n    device.userAgent = identity.userAgent;\n    if (device.userAgent) {\n      setUAParser();\n    }\n  } else if (isAndroidPlatform()) {\n    device.userAgent = identity.userAgent;\n    if (device.userAgent) {\n      setUAParser();\n    }\n  }\n};\nconst setIdentity = properties => {\n  Object.assign(identity, properties);\n  if (isWebPlatform()) {\n    postMessage({\n      identity: {\n        isAuthed: !!identity.userId,\n        locale: identity.locale || null\n      }\n    });\n  }\n};\nconst setLocale = () => {\n  if (isWebPlatform()) {\n    identity.locale = navigator?.languages[0] || navigator?.language || '';\n  }\n};\nconst setDeviceSize = properties => {\n  device.height = properties.height;\n  device.width = properties.width;\n};\nconst setPlatform = () => {\n  setConfig({\n    platform: getPlatformValue()\n  });\n  if (isWebPlatform()) {\n    postMessage({\n      config: {\n        platform: config.platform\n      }\n    });\n  }\n};\n\n/**\n * Set device information related to the User Agent\n * TODO @zizzamia move this logic into Analytics Service\n */\nconst setUAParser = () => {\n  if (performance.mark) {\n    performance.mark('ua_parser_start');\n  }\n  const userAgentParser = new UAParser(device.userAgent ?? '').getResult();\n  device.browserName = userAgentParser.browser.name || null;\n  device.browserMajor = userAgentParser.browser.major || null;\n  device.osName = userAgentParser.os.name || null;\n  device.amplitudeOSName = device.browserName;\n  device.amplitudeOSVersion = device.browserMajor;\n  device.amplitudeDeviceModel = device.osName;\n  // Post Message to Service Worker\n  postMessage({\n    device: {\n      browserName: device.browserName,\n      osName: device.osName\n    }\n  });\n  if (performance.mark) {\n    performance.mark('ua_parser_end');\n    performance.measure('ua_parser', 'ua_parser_start', 'ua_parser_end');\n  }\n};\n\n/* eslint-enable */\n\nconst location = {\n  breadcrumbs: [],\n  initialUAAData: {},\n  pageKey: '',\n  // TODO @zizzamia move page_key in the Analytics Service\n  pageKeyRegex: {},\n  pagePath: '',\n  prevPageKey: '',\n  prevPagePath: ''\n};\nfunction setBreadcrumbs(breadcrumbs) {\n  Object.assign(location, {\n    breadcrumbs\n  });\n}\nfunction setLocation(data) {\n  Object.assign(location, data);\n}\nconst persistentData = {\n  // Legacy Amplitude\n  eventId: 0,\n  sequenceNumber: 0,\n  sessionId: 0,\n  // Session definitions\n  lastEventTime: 0,\n  sessionStart: 0,\n  sessionUUID: null,\n  userId: null,\n  // Session Quality\n  // To note these variable are in purpose very short\n  // so they are less obvious inside the public IndexedDB\n  // and public client events\n  ac: 0,\n  // action click\n  af: 0,\n  // action focus\n  ah: 0,\n  // action hover\n  al: 0,\n  // action scroll\n  am: 0,\n  // action move\n  ar: 0,\n  // action search\n  as: 0,\n  // action select\n  pv: 0 // pageview\n};\nfunction setPersistentData(data) {\n  Object.assign(persistentData, data);\n}\nfunction getDocumentReferrer() {\n  return document?.referrer ?? '';\n}\nfunction removeQueryParams(search, paramsToRemove) {\n  const regex = new RegExp(`[&?]${paramsToRemove.join('=.*?(&|$)|')}=.*?(&|$)`, 'g');\n  return search.replace(regex, '').replace(/^&/, '?');\n}\n\n/* eslint-disable */\n\n/**\n * Parse the domain from referrer info.\n * It keeps subdomain referres but removes\n * the ones from the same hostname\n */\nconst getReferrerData = () => {\n  const documentReferrer = getDocumentReferrer();\n  if (!documentReferrer) {\n    return {};\n  }\n  const referrerURL = new URL(documentReferrer);\n  if (referrerURL.hostname === getUrlHostname()) {\n    return {};\n  }\n  return {\n    referrer: documentReferrer,\n    referring_domain: referrerURL.hostname\n  };\n};\n\n/**\n * Parse utms and gclid from query and retrieves referrer,\n * to collect user acquisition data\n */\nconst getUserAcquisitionAttribution = () => {\n  if (!isWebPlatform()) {\n    return location.initialUAAData;\n  }\n  // When UAA data exist we return always the initial value\n  if (Object.keys(location.initialUAAData).length > 0) {\n    return location.initialUAAData;\n  }\n  new URLSearchParams(getUrlParams());\n  // Set prev value to avoid extra calls;\n  location.initialUAAData = _objectSpread(_objectSpread(_objectSpread({}, persistentUAAData()), uaaValuesFromUrl()), getReferrerData());\n  return location.initialUAAData;\n};\nconst uaaValuesFromUrl = () => {\n  const urlSearchParams = new URLSearchParams(getUrlParams());\n  const UAAValues = {};\n  UAA_QUERIES.forEach(key => {\n    if (urlSearchParams.has(key)) {\n      UAAValues[key] = (urlSearchParams.get(key) || '').toLowerCase();\n    }\n  });\n  return UAAValues;\n};\n\n// Return persisted UAA data from memory\nconst persistentUAAData = () => {\n  const uaaData = {};\n  UAA_QUERIES.forEach(key => {\n    if (persistentData[key]) {\n      uaaData[key] = persistentData[key];\n    }\n  });\n  return uaaData;\n};\nconst getUrlHostname = () => {\n  return window?.location?.hostname || '';\n};\nconst getUrlParams = () => {\n  if (!config.revokedQueryParams) return window?.location?.search || '';\n  return removeQueryParams(window?.location?.search || '', config.revokedQueryParams);\n};\nconst getUrlPathname = () => {\n  return window?.location?.pathname || '';\n};\nconst getPagePath = () => {\n  return config.overrideWindowLocation ? location.pagePath : getUrlPathname() + getUrlParams();\n};\nconst setPageKey = () => {\n  if (!location.pageKeyRegex) {\n    return;\n  }\n  Object.keys(location.pageKeyRegex).some(pageKey => {\n    if (location.pageKeyRegex[pageKey].test(location.pagePath)) {\n      location.pageKey = pageKey;\n      return true;\n    }\n  });\n};\n\n/**\n * Sets a new pagePath when the location.pathname or location.search changes.\n * Have unique pagePath based on query params is critical to allow web experiences\n * doing what they do best, have statless content based on the complete web URL.\n */\nconst setPagePath = () => {\n  const pagePath = getPagePath();\n  if (!pagePath || pagePath === location.pagePath) {\n    return;\n  }\n  if (pagePath !== location.pagePath) {\n    setPrevPagePath();\n  }\n  location.pagePath = pagePath;\n  setPageKey();\n};\n\n/**\n * Defines which page was previously visited,\n * and if the users come from the Monorail, we can detect it by its referrer value.\n */\nconst setPrevPagePath = () => {\n  if (isWebPlatform()) {\n    const documentReferrer = getDocumentReferrer();\n    if (!location.prevPagePath && documentReferrer) {\n      const referrerURL = new URL(documentReferrer);\n      if (referrerURL.hostname === getUrlHostname()) {\n        location.prevPagePath = referrerURL.pathname;\n        return;\n      }\n    }\n  }\n  location.prevPagePath = location.pagePath;\n  location.prevPageKey = location.pageKey;\n};\nconst setUserAttributionEnrichment = validatedEvent => {\n  // User Attribution enrichment\n  if (isWebPlatform()) {\n    Object.assign(validatedEvent, getUserAcquisitionAttribution());\n  }\n};\n\n/* eslint-enable */\n\nconst snakeCaseRegex = /^[a-zd]+(_[a-zd]+)*$/;\n\n/**\n * Tests whether the input value string is acceptable as custom property key.\n * The method validates against a slight modified version of snake case where\n * the value can contain a single lower case word\n * @param {string} value input to test\n * @return {boolean} whether string is valid or not\n */\nfunction isEventKeyFormatValid(value) {\n  return snakeCaseRegex.test(value);\n}\n\n// This object can be used to store properties which will be used to enhance events\n\nconst BLOCKED_PROPS = ['action', 'component_type', 'component_name', 'context', 'logging_id'];\n\n// num_non_hardware_accounts valid values: small | medium | large | x-large\nconst ALLOWED_PROPERTIES = ['num_non_hardware_accounts', 'ujs'];\nconst UJS_PREFIX = 'ujs_';\n\n/**\n * Use these object to store properties that will be attached to each event\n * This object is only stored in memory therefore it does not persist across user sessions.\n * If a user reloads the page this info will disappear\n */\nconst identityFlow = {\n  //  this feature is currently in alpha release\n  //  in order to add properties you must submit a PR\n};\n\n/**\n * Clears identity flow by deleting properties. Delete only properties you have introduced\n * @param {string[]} properties to delete\n * @return {void}\n */\nfunction removeFromIdentifyFlow(properties) {\n  properties.forEach(prop => {\n    if (ALLOWED_PROPERTIES.includes(prop)) {\n      delete identityFlow[prop];\n    }\n  });\n}\n\n/**\n * Appends properties to identify flow\n * @param {EventDataDefault} identityData properties to be added to identify flow. Format for each key is enforced and must be snake_case\n * @return {void}\n */\nfunction identifyFlow(identityData) {\n  //  filter for blocked words\n  const filteredProps = Object.entries(identityData).reduce((acc, entry) => {\n    const _entry = _slicedToArray(entry, 2),\n      key = _entry[0],\n      value = _entry[1];\n    if (!BLOCKED_PROPS.includes(key) && ALLOWED_PROPERTIES.includes(key)) {\n      //  check for snake case otherwise error_out\n      if (isEventKeyFormatValid(key)) {\n        return _objectSpread(_objectSpread({}, acc), {}, {\n          [key]: value\n        });\n      }\n      config.onError(new Error(`IdentityFlow property names must have snake case format`), {\n        [key]: value\n      });\n      return acc;\n    }\n    return acc;\n  }, {});\n  if (filteredProps.ujs?.length) {\n    filteredProps.ujs = filteredProps.ujs.map(value => `${UJS_PREFIX}${value}`);\n  }\n  Object.assign(identityFlow, filteredProps);\n}\n\n/**\n * Enriches validated event data with identity flow properties\n * @param {AnalyticsValidatedData} validatedEvent\n * @return {void}\n */\nfunction setIdentityFlowEnrichment(validatedEvent) {\n  if (Object.keys(identityFlow).length > 0) {\n    Object.assign(validatedEvent, identityFlow);\n  }\n}\nfunction isIdentifyFlowEmpty() {\n  return !Object.keys(identityFlow).length;\n}\n\n/**\n * this method validates if config platofrm is set correctly.\n * If the value is different than PlatformName.unknown returns true\n * otherwise returns false and logs an error\n */\nfunction isValidPlatform() {\n  if (config.platform === PlatformName.unknown) {\n    config.onError(new Error('SDK platform not initialized'));\n    return false;\n  }\n  return true;\n}\nconst scheduler = {\n  eventsQueue: [],\n  eventsScheduled: false,\n  metricsQueue: [],\n  metricsScheduled: false,\n  tracesQueue: [],\n  tracesScheduled: false\n};\nfunction setScheduler(options) {\n  Object.assign(scheduler, options);\n}\n\n/* eslint-disable */\n\n// Session Quality records all major actions, and those are used\n// to rate device sessions objectively and mechanically\n// with the Session Quality Score algorithm.\n// Note, if you are looking to make any changes to this algorithm\n// make sure to reach out to the UI Observability Working Group or @zizzamia.\nconst sessionQuality = {\n  ac: 0,\n  // action click\n  af: 0,\n  // action focus\n  ah: 0,\n  // action hover\n  al: 0,\n  // action scroll\n  am: 0,\n  // action move\n  ar: 0,\n  // action search\n  as: 0,\n  // action select\n  pv: 0,\n  // page view\n  sqs: 0 // session quality score\n};\n\n/**\n * The Session Quality Score algorithm takes into consideration\n * all the actions performed during a session. Each action has a weight\n * that goes from 0 to N, and it is always an integer.\n * Each action's weight reflects the importance of the performed action.\n */\nconst ACTIONS_WEIGHT = {\n  ac: 20,\n  // action click\n  af: 5,\n  // action focus\n  ah: 1,\n  // action hover\n  al: 1,\n  // action scroll\n  am: 0,\n  // action move\n  ar: 10,\n  // action search\n  as: 20 // action select\n};\nconst SESSION_AUTOMATED_EVENTS_WEIGHT = {\n  pv: 25 // pageview\n};\n\n/**\n * Each session gets a rank based on how long it lasts, measured in seconds\n */\nconst SESSION_DURATION_RANK = {\n  xs: 0,\n  s: 15,\n  m: 60,\n  l: 240,\n  xl: 960,\n  xxl: 3840\n};\n\n/**\n * The Session Quality Score algorithm muliplies the final score\n * based on the weight of the session_duration.\n */\nconst SESSION_DURATION_WEIGHT = {\n  xs: 0,\n  // Anything less than 15s resets the SQS to 0\n  s: 1,\n  // From 16s to 4 minutes the SQS doesn't change\n  m: 1,\n  l: 2,\n  // Anything longer than 4 minutes will double the SQS\n  xl: 2,\n  xxl: 2\n};\nconst getSessionRank = sessionDuration => {\n  if (sessionDuration < SESSION_DURATION_RANK.s) {\n    return SessionRank.xs;\n  }\n  if (sessionDuration < SESSION_DURATION_RANK.m) {\n    return SessionRank.s;\n  }\n  if (sessionDuration < SESSION_DURATION_RANK.l) {\n    return SessionRank.m;\n  }\n  if (sessionDuration < SESSION_DURATION_RANK.xl) {\n    return SessionRank.l;\n  }\n  if (sessionDuration < SESSION_DURATION_RANK.xxl) {\n    return SessionRank.xl;\n  }\n  return SessionRank.xxl;\n};\n\n/**\n * Based on each valid event, the action value is read to determine\n * what session quality properties need to be updated.\n *\n * Note: these variables are very short on purpose so they are less\n * obvious within the public IndexedDB and public client events.\n */\nconst recordSessionAction = validatedEvent => {\n  switch (validatedEvent.action) {\n    case ActionType.click:\n      sessionQuality.ac += 1;\n      break;\n    case ActionType.focus:\n      sessionQuality.af += 1;\n      break;\n    case ActionType.hover:\n      sessionQuality.ah += 1;\n      break;\n    case ActionType.move:\n      sessionQuality.am += 1;\n      break;\n    case ActionType.scroll:\n      sessionQuality.al += 1;\n      break;\n    case ActionType.search:\n      sessionQuality.ar += 1;\n      break;\n    case ActionType.select:\n      sessionQuality.as += 1;\n      break;\n  }\n};\nconst setSessionQuality = properties => {\n  Object.assign(sessionQuality, properties);\n};\n\n/**\n * Session Quality Score algorithm\n * -------------------------------\n * Rating device sessions objectively and mechanically\n */\nconst setSessionQualityScore = validatedEvent => {\n  if (!validatedEvent.session_rank) {\n    return;\n  }\n  const sessionRank = validatedEvent.session_rank;\n  // Each action weight reflects the importance of the performed actions\n  Object.values(SessionActions).forEach(action => {\n    sessionQuality.sqs += sessionQuality[action] * ACTIONS_WEIGHT[action];\n  });\n  // Each sessionautomated event reflects a boost in engagement\n  Object.values(SessionAutomatedEvents).forEach(sessionAutomatedEvent => {\n    sessionQuality.sqs += sessionQuality[sessionAutomatedEvent] * SESSION_AUTOMATED_EVENTS_WEIGHT[sessionAutomatedEvent];\n  });\n  // Muliplies the final score based on the weight of the session_duration\n  sessionQuality.sqs *= SESSION_DURATION_WEIGHT[sessionRank];\n};\nconst setSessionQualityEnrichment = validatedEvent => {\n  recordSessionAction(validatedEvent);\n  // Counts pageviews\n  if (validatedEvent.event_type === PAGEVIEW_EVENT_TYPE) {\n    sessionQuality.pv += 1;\n    return;\n  }\n  if (validatedEvent.event_type !== SESSIONS_DURATION_EVENT_TYPE) {\n    return;\n  }\n  setSessionQualityScore(validatedEvent);\n  // Enriches sessionQuality into `session_duration` event\n  Object.assign(validatedEvent, sessionQuality);\n  // Resets action counts\n  setSessionQuality({\n    ac: 0,\n    af: 0,\n    ah: 0,\n    al: 0,\n    am: 0,\n    ar: 0,\n    as: 0,\n    pv: 0,\n    sqs: 0\n  });\n};\n\n/* eslint-enable */\n\n// Gets the time value in milliseconds\nfunction getNow() {\n  return new Date().getTime();\n}\n\n/**\n * The TimeStone will hold the power to understand the past, present and future\n * of the user experience. In a few words we are getting a little smarter\n * on understanding how much time a user is spending for each pagePath, pageKey and session.\n *\n * Also for not colliding with any default naming system,\n * I decided to call this timeStone in honor of Doctor Strange.\n */\nconst timeStone = {\n  timeStart: getNow(),\n  timeOnPagePath: 0,\n  timeOnPageKey: 0,\n  prevTimeOnPagePath: 0,\n  prevTimeOnPageKey: 0,\n  // TODO @zizzamia re-visit if we need to keep storing\n  // sessionDuration and sessionEnd here, it seems we don't\n  // need to persist this information.\n  sessionDuration: 0,\n  sessionEnd: 0,\n  sessionStart: 0,\n  prevSessionDuration: 0\n};\nfunction setTime(data) {\n  Object.assign(timeStone, data);\n}\nconst db = {\n  isReady: false,\n  idbKeyval: null\n};\nfunction setDB(properties) {\n  Object.assign(db, properties);\n}\n\n/* eslint-disable */\n\nfunction createMemoryDatabase() {\n  // medium to store data\n  const inMemoryDB = {};\n  return {\n    get: async key => Promise.resolve(inMemoryDB[key]),\n    set: async (key, value) => {\n      inMemoryDB[key] = value;\n      return Promise.resolve(key);\n    },\n    delete: async key => {\n      delete inMemoryDB[key];\n      return Promise.resolve();\n    },\n    keys: async () => Promise.resolve(Object.keys(inMemoryDB))\n  };\n}\nconst initIDB = async () => {\n  let idbKeyval = undefined;\n  try {\n    if (isWebPlatform() && window?.indexedDB) {\n      const idb = await openDB(DB_NAME, 1, {\n        upgrade(idbDB) {\n          idbDB.createObjectStore('keyval');\n        }\n      });\n      idbKeyval = {\n        async get(key) {\n          return idb.get('keyval', key);\n        },\n        async set(key, val) {\n          return idb.put('keyval', val, key);\n        },\n        async delete(key) {\n          return idb.delete('keyval', key);\n        },\n        async keys() {\n          return idb.getAllKeys('keyval');\n        }\n      };\n    }\n  } catch (err) {\n    let error = err;\n    config.onError(error, {\n      type: 'openDB',\n      message: error.message\n    });\n  }\n\n  // if any error occurs we fallback but we log the error\n  idbKeyval = idbKeyval ?? createMemoryDatabase();\n  setDB({\n    idbKeyval\n  });\n};\n\n/**\n * Get data from the browser/device storage with IndexedDB\n */\nconst idbGet = async key => {\n  if (!db.idbKeyval) {\n    return Promise.resolve(null);\n  }\n  try {\n    // @ts-expect-error TODO: migration from monorepo\n    return await db.idbKeyval.get(key);\n  } catch {\n    // The only time we noticed idb failing it's related\n    // to Safari interanl issues https://bugs.webkit.org/show_bug.cgi?id=197050\n    config.onError(new Error('IndexedDB:Get:InternalError'));\n    return Promise.resolve(null);\n  }\n};\n\n/**\n * Set data to the browser/device storage with IndexedDB\n */\nconst idbSet = async (key, data) => {\n  if (!db.idbKeyval) {\n    return;\n  }\n  try {\n    await db.idbKeyval.set(key, data);\n  } catch {\n    // The only time we noticed idb failing it's related\n    // to Safari internal issues https://bugs.webkit.org/show_bug.cgi?id=197050\n    config.onError(new Error('IndexedDB:Set:InternalError'));\n  }\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\n\n// Legacy Amplitude EventId\nconst incrementEventId = () => {\n  setPersistentData({\n    eventId: persistentData.eventId + 1\n  });\n};\n\n// Legacy Amplitude SequenceNumber\nconst incrementSequenceNumber = () => {\n  setPersistentData({\n    sequenceNumber: persistentData.sequenceNumber + 1\n  });\n};\n\n/**\n * Saves all persistent data to IndexedDB\n */\nconst savePersistentData = () => {\n  if (config.platform === 'server') {\n    return;\n  }\n  setPersistentData({\n    // Session definitions\n    sessionStart: timeStone.sessionStart,\n    // Session definitions\n    ac: sessionQuality.ac,\n    af: sessionQuality.af,\n    ah: sessionQuality.ah,\n    al: sessionQuality.al,\n    am: sessionQuality.am,\n    ar: sessionQuality.ar,\n    as: sessionQuality.as,\n    pv: sessionQuality.pv\n  });\n  if (identity.userId) {\n    setPersistentData({\n      userId: identity.userId\n    });\n  }\n  void idbSet(DB_ANALYTICS_ITEM, persistentData);\n};\n\n/* eslint-disable */\n\nconst debugOptions = {\n  color: 'rgb(5,177,105)',\n  fontSize: 11\n};\nconst debugBatch = options => {\n  const metricName = options.metricName,\n    data = options.data;\n  const importance = options.importance || AnalyticsEventImportance.low;\n  if (!config.showDebugLogging || !console) {\n    return;\n  }\n  const prefix = `%c ${DEBUG_LOGGING_PREFIX}`;\n  const style = `color:${debugOptions.color};font-size:${debugOptions.fontSize}px;`;\n  const importanceLog = `Importance: ${importance}`;\n  console.group(prefix, style, metricName, importanceLog);\n  // @ts-expect-error TODO: migration from monorepo\n  data.forEach(event => {\n    // @ts-expect-error TODO: migration from monorepo\n    if (event.event_type) {\n      // @ts-expect-error TODO: migration from monorepo\n      console.log(event.event_type, event);\n    } else {\n      console.log(event);\n    }\n  });\n  console.groupEnd();\n};\n\n/**\n * Log an event with metricName and data/duration\n */\nconst debugLog = options => {\n  const metricName = options.metricName,\n    data = options.data;\n  const importance = options.importance || AnalyticsEventImportance.low;\n  if (!config.showDebugLogging || !console) {\n    return;\n  }\n  const style = `color:${debugOptions.color};font-size:${debugOptions.fontSize}px;`;\n  const prefix = `%c ${DEBUG_LOGGING_PREFIX}`;\n  const importanceLog = `Importance: ${importance}`;\n  console.log(prefix, style, metricName, data, importanceLog);\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\n\n/**\n * Session Start represents the number of milliseconds\n * since epoch (UTC) of when the first event of the session occurs.\n *\n * To persist the sessionStart over time we use IndexedDB.\n * Note: sessionId is a copy of sessionStart and we need to support it\n *       because is part of the Amplitude legacy.\n */\nconst setSessionStart = () => {\n  const now = getNow();\n  if (!persistentData.sessionId || !persistentData.lastEventTime || !persistentData.sessionUUID || isSessionEnded(now)) {\n    // sessionId is used for legacy Amplitude data\n    persistentData.sessionId = now;\n    // sessionUUID is the unique identifier used in the Analytics Service\n    persistentData.sessionUUID = generateUUID();\n    setTime({\n      sessionStart: now\n    });\n    debugLog({\n      metricName: `Started new session:`,\n      data: {\n        persistentData,\n        timeStone\n      }\n    });\n  }\n  persistentData.lastEventTime = now;\n};\nconst isSessionEnded = now => {\n  return now - persistentData.lastEventTime > SESSION_TIMEOUT;\n};\n\n/* eslint-disable */\n\nconst prepareEventData = logData => {\n  // Session data enrichment\n  setSessionQualityEnrichment(logData);\n  // TODO @zizzamia revist this typing\n  const event_type = logData.event_type;\n  delete logData.event_type;\n  const log_data_device_id = logData.deviceId ? logData.deviceId : null;\n  const timestamp = logData.timestamp;\n  delete logData.timestamp;\n  // Amplitude Legacy enrichment\n  incrementEventId();\n  incrementSequenceNumber();\n  // Session Start enrichment\n  setSessionStart();\n  // TODO @zizzamia optimize how many times we save the persistent data\n  savePersistentData();\n  return {\n    device_id: identity.deviceId || log_data_device_id || null,\n    user_id: identity.userId,\n    timestamp,\n    event_id: persistentData.eventId,\n    session_id: persistentData.sessionId || -1,\n    event_type,\n    version_name: config.version || null,\n    platform: config.platform || null,\n    os_name: device.amplitudeOSName,\n    os_version: device.amplitudeOSVersion,\n    device_model: device.amplitudeDeviceModel,\n    language: identity.locale,\n    event_properties: _objectSpread(_objectSpread({}, logData), {}, {\n      session_uuid: persistentData.sessionUUID,\n      height: device.height,\n      width: device.width\n    }),\n    user_properties: getUserProperties(),\n    uuid: generateUUID(),\n    library: {\n      name: '@cbhq/client-analytics',\n      version: ANALYTICS_SDK_VERSION\n    },\n    sequence_number: persistentData.sequenceNumber,\n    user_agent: device.userAgent || identity.userAgent\n  };\n};\nconst prepareEventsData = logsData => {\n  return logsData.map(logData => {\n    return prepareEventData(logData);\n  });\n};\n\n/* eslint-disable */\n\nconst prepareMetricData = metric => {\n  const customTags = metric.tags || {};\n  const tags = _objectSpread(_objectSpread({\n    authed: getIsAuthed() ? 'true' : 'false',\n    platform: config.platform\n  }, customTags), {}, {\n    project_name: config.projectName,\n    version_name: config.version || null\n  });\n  return {\n    metric_name: metric.metricName,\n    page_path: metric.pagePath || null,\n    value: metric.value,\n    tags,\n    type: metric.metricType\n  };\n};\nconst prepareMetricsData = metrics => {\n  return metrics.map(metric => {\n    return prepareMetricData(metric);\n  });\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\n\n/**\n * Returns true if batch events are ready to be sent\n */\nconst isBatchEventsReady = sendEventsCb => {\n  if (scheduler.eventsQueue.length === 0) {\n    return false;\n  }\n  // Check if min threshold met for batch size\n  if (scheduler.eventsQueue.length >= config.batchEventsThreshold) {\n    return true;\n  }\n  // Otherwise schedule a sendEvents after batchEventsPeriod,\n  // also we make sure we only schedule 1 batch at a time\n  if (!scheduler.eventsScheduled) {\n    scheduler.eventsScheduled = true;\n    setTimeout(() => {\n      scheduler.eventsScheduled = false;\n      sendEventsCb(prepareEventsData(scheduler.eventsQueue));\n      scheduler.eventsQueue = [];\n    }, config.batchEventsPeriod);\n  }\n  // A queueEventsCb was scheduled, no events were sent\n  return false;\n};\n\n/**\n * Returns true if batch metrics are ready to be sent\n */\nconst isBatchMetricsReady = sendMetricsCb => {\n  if (scheduler.metricsQueue.length === 0) {\n    return false;\n  }\n  // Check if min threshold met for batch size\n  if (scheduler.metricsQueue.length >= config.batchMetricsThreshold) {\n    return true;\n  }\n  // Otherwise schedule a sendMetrics after batchMetricsPeriod,\n  // also we make sure we only schedule 1 batch at a time\n  if (!scheduler.metricsScheduled) {\n    scheduler.metricsScheduled = true;\n    setTimeout(() => {\n      scheduler.metricsScheduled = false;\n      sendMetricsCb(prepareMetricsData(scheduler.metricsQueue));\n      scheduler.metricsQueue = [];\n    }, config.batchMetricsPeriod);\n  }\n  // A queueMetricsCb was scheduled, no metrics were sent\n  return false;\n};\n\n/**\n * Returns true if batch metrics are ready to be sent\n */\nconst isBatchTracesReady = sendTraces => {\n  if (scheduler.tracesQueue.length === 0) {\n    return false;\n  }\n  // Check if min threshold met for batch size\n  if (scheduler.tracesQueue.length >= config.batchTracesThreshold) {\n    return true;\n  }\n  // Otherwise schedule a sendMetrics after batchMetricsPeriod,\n  // also we make sure we only schedule 1 batch at a time\n  if (!scheduler.tracesScheduled) {\n    scheduler.tracesScheduled = true;\n    setTimeout(() => {\n      scheduler.tracesScheduled = false;\n      sendTraces(scheduler.tracesQueue);\n      scheduler.tracesQueue = [];\n    }, config.batchTracesPeriod);\n  }\n  // A queueMetricsCb was scheduled, no metrics were sent\n  return false;\n};\n\n/**\n * Schedule an event\n * - on web we create a background task with the requestIdleCallback API\n * - on iOS and android we use the InteractionManager to schedule\n *   a task after interactions or animations have completed,\n *   this helps especially animations to run smoothly.\n */\nconst scheduleEvent = cb => {\n  if (isWebPlatform() && window?.requestIdleCallback) {\n    window.requestIdleCallback(cb, {\n      timeout: config.ricTimeoutScheduleEvent\n    });\n  } else if ((isAndroidPlatform() || isIOSPlatform()) && config.interactionManager) {\n    config.interactionManager.runAfterInteractions(cb);\n  } else {\n    cb();\n  }\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\n\nconst CONTENT_TYPE_URLENCODED = 'application/x-www-form-urlencoded; charset=UTF-8';\nconst CONTENT_TYPE_JSON = 'application/json';\n/**\n * Because we use beacon requests on the web platform we default to url encoded request\n * bodies. In all other places we use json encoded bodies. Note that this is important,\n * since in react-native calling URLSearchParams is actually quite expensive\n */\nfunction getFetchRequestOptions({\n  isJSON,\n  data\n}) {\n  const jsonEncode = !isWebPlatform() || isJSON;\n  const contentType = jsonEncode ? CONTENT_TYPE_JSON : CONTENT_TYPE_URLENCODED;\n  const body = jsonEncode ? JSON.stringify(data) : new URLSearchParams(data).toString();\n  return {\n    contentType,\n    body\n  };\n}\nconst apiFetch = options => {\n  const data = options.data,\n    importance = options.importance,\n    isJSON = options.isJSON,\n    onError = options.onError,\n    url = options.url;\n  const fetchImportance = importance || AnalyticsEventImportance.low;\n  const _getFetchRequestOptio = getFetchRequestOptions({\n      isJSON,\n      data\n    }),\n    body = _getFetchRequestOptio.body,\n    contentType = _getFetchRequestOptio.contentType;\n\n  // used as fallback in case of sendBeacon failure\n  function sendXhr() {\n    const xhr = new XMLHttpRequest();\n    xhr.open('POST', url, true);\n    Object.keys(config.headers || {}).forEach(headerName => {\n      xhr.setRequestHeader(headerName, config.headers[headerName]);\n    });\n    xhr.setRequestHeader('Content-Type', CONTENT_TYPE_URLENCODED);\n    if (identity.jwt) {\n      xhr.setRequestHeader('authorization', `Bearer ${identity.jwt}`);\n    }\n    xhr.send(body);\n  }\n\n  // For web use sendBeacon when supported\n  if (isWebPlatform() && !isJSON && 'sendBeacon' in navigator && fetchImportance === AnalyticsEventImportance.low && (\n  // The only header we can set in a beacon is \"type\"\n  // based on https://w3c.github.io/beacon/ docs\n  !config.headers || Object.keys(config.headers).length === 0)) {\n    const blob = new Blob([body], {\n      type: CONTENT_TYPE_URLENCODED\n    });\n    try {\n      // This explicit binding is apparently necessary; Vercel and Sentry used it to fix Illegal invocation errors:\n      // https://github.com/vercel/next.js/pull/26601, https://github.com/getsentry/sentry-javascript/pull/4008\n      // See https://xgwang.me/posts/you-may-not-know-beacon/ for further context.\n      const sendBeacon = navigator.sendBeacon.bind(navigator);\n      sendBeacon(url, blob) || sendXhr();\n    } catch (err) {\n      config.onError(err);\n      // fallback to XHR when sendBeacon throws\n      sendXhr();\n    }\n    // Fallback to XHR when sendBeacon is not supported of when we want an high request priority\n  } else if (isWebPlatform() && !isJSON) {\n    sendXhr();\n    // Everything else use the fetch API\n  } else {\n    const headers = _objectSpread(_objectSpread({}, config.headers), {}, {\n      'Content-Type': contentType\n    });\n    if (identity.jwt) {\n      headers.Authorization = `Bearer ${identity.jwt}`;\n    }\n    fetch(url, {\n      method: 'POST',\n      mode: 'no-cors',\n      headers,\n      body\n    }).catch(err => {\n      // @ts-expect-error: 2021-03-20: Whitelisted type error. To be corrected after typescript migration.\n      onError(err, {\n        context: 'AnalyticsSDKApiError'\n      });\n    });\n  }\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\n\nconst isStringNumberOrBoolean = obj => ['string', 'number', 'boolean'].includes(typeof obj);\nclass CircularJsonReferenceError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = 'CircularJsonReference';\n    this.message = message;\n    if (typeof Error.captureStackTrace === 'function') {\n      Error.captureStackTrace(this, this.constructor);\n    } else {\n      this.stack = new Error(message).stack;\n    }\n  }\n}\nclass DomReferenceInAnalyticsEventError extends CircularJsonReferenceError {\n  constructor(...args) {\n    super(...args);\n    this.name = 'DomReferenceInAnalyticsEvent';\n  }\n}\n\n/**\n * Attempts to sanitize Amplitude event data that might contain\n * references to a React synthetic event and/or DOM elements\n * before serializing to a JSON string\n */\nconst safelyJsonStringifyDomEvent = eventData => {\n  try {\n    const sanitizedEventData = [];\n    for (const entry of eventData) {\n      const copy = _objectSpread({}, entry);\n      if (entry.event_properties) {\n        copy.event_properties = _objectSpread(_objectSpread({}, copy.event_properties), {}, {\n          currentTarget: null,\n          target: null,\n          relatedTarget: null,\n          _dispatchInstances: null,\n          _targetInst: null,\n          view: isStringNumberOrBoolean(entry.event_properties.view) ? entry.event_properties.view : null\n        });\n      }\n      sanitizedEventData.push(copy);\n    }\n    return [true, JSON.stringify(sanitizedEventData)];\n  } catch (e) {\n    return [false, ''];\n  }\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\n\n/**\n * All events are fired only after the initial data\n * are retrieved from the IndexedDB. We use a simple queue\n * to store the early events during the initialization time.\n */\nconst queueEvents = (eventData, eventImportance = AnalyticsEventImportance.low) => {\n  if (eventData) {\n    // TODO: create a helper to add the event data without using scheduler\n    scheduler.eventsQueue.push(eventData);\n  }\n  if (!db.isReady) {\n    return;\n  }\n  // Ensures events are sent only after the userId is set.\n  // This options persist only when trackUserId is true\n  if (config.trackUserId && !identity.userId) {\n    // Fallback in case the userId was never set when Logged-in\n    if (scheduler.eventsQueue.length > MAX_EVENT_DATA_QUEUE_LIMIT) {\n      config.trackUserId = false;\n      // This should also help discover cases when the identify()\n      // method was accidentaly removed or called too late\n      config.onError(new Error('userId not set in Logged-in'));\n    }\n    return;\n  }\n  // Important to have the EventImportance check before isBatchEventsReady\n  // so we don't create extra JS cost when the importance is high\n  if (eventImportance === AnalyticsEventImportance.high || isBatchEventsReady(sendEvents)) {\n    sendScheduledEvents(eventImportance);\n  }\n};\n\n/**\n * Send an event to the Analytics Service.\n * This method is called during a browser's idle periods,\n * and updates is in charge to also update the sessionId\n * and sequenceNumber.\n *\n * In case of the user optOut any event will be sent.\n */\nconst sendEvents = (eventsData, eventImportance = AnalyticsEventImportance.low) => {\n  if (identity.isOptOut || eventsData.length === 0) {\n    return;\n  }\n  let stringifiedEventData;\n  try {\n    stringifiedEventData = JSON.stringify(eventsData);\n  } catch (e) {\n    // if we encounter a circular reference, keep track of what event triggered it,\n    // attempt to flatten the circular dependency and include it on the bugsnag metadata\n    const listEventType = eventsData.map(data => data.event_type).join(', ');\n    const _safelyJsonStringifyD = safelyJsonStringifyDomEvent(eventsData),\n      _safelyJsonStringifyD2 = _slicedToArray(_safelyJsonStringifyD, 2),\n      sanitized = _safelyJsonStringifyD2[0],\n      result = _safelyJsonStringifyD2[1];\n\n    // if sanitization is not successful then track the error on bugsnag\n    // and don't send the events, since we can't serialize\n    if (!sanitized) {\n      config.onError(new CircularJsonReferenceError(e instanceof Error ? e.message : 'unknown'), {\n        listEventType\n      });\n      return;\n    }\n\n    // otherwise, send the event, but still track the error on bugsnag\n    // so developers can sanitize at the source\n    stringifiedEventData = result;\n    config.onError(new DomReferenceInAnalyticsEventError('Found DOM element reference'), {\n      listEventType,\n      stringifiedEventData\n    });\n  }\n  const uploadTime = getNow().toString();\n  // Typical Amplitude event format\n  const baseData = {\n    e: stringifiedEventData,\n    v: AMPLITUDE_API_VERSION,\n    upload_time: uploadTime\n  };\n  const analyticsServiceData = _objectSpread(_objectSpread({}, baseData), {}, {\n    client: config.amplitudeApiKey\n  });\n  // Request to the Analytics Service\n  apiFetch({\n    url: config.eventsEndpoint,\n    data: analyticsServiceData,\n    importance: eventImportance,\n    // @ts-expect-error: 2021-03-20: Whitelisted type error. To be corrected after typescript migration.\n    onError: config.onError\n  });\n  debugBatch({\n    metricName: `Batch Events`,\n    data: eventsData,\n    importance: eventImportance\n  });\n};\n\n// Prepare events, run light enrichment. send events and reset scheduler\nconst sendScheduledEvents = (eventImportance = AnalyticsEventImportance.low) => {\n  sendEvents(prepareEventsData(scheduler.eventsQueue), eventImportance);\n  setScheduler({\n    eventsQueue: []\n  });\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\nconst ACTION_OPTIONS = Object.values(ActionType);\nconst COMPONENT_TYPE_OPTIONS = Object.values(ComponentType);\n\n// TODO @zizzamia not happy with this logic, refactor this code\n// with more complex types to eliminate the extra logic\nconst getActionValue = action => {\n  return ACTION_OPTIONS.includes(action) ? action : ActionType.unknown;\n};\n\n// TODO @zizzamia not happy with this logic, refactor this code\n// with more complex types to eliminate the extra logic\nconst getComponentTypeValue = componentType => {\n  return COMPONENT_TYPE_OPTIONS.includes(componentType) ? componentType : ComponentType.unknown;\n};\nconst getValidatedProperties = (action, componentType, loggingId) => {\n  const properties = {\n    auth: getIsAuthed() ? AuthStatus.loggedIn : AuthStatus.notLoggedIn,\n    action: getActionValue(action),\n    component_type: getComponentTypeValue(componentType),\n    logging_id: loggingId,\n    platform: config.platform,\n    project_name: config.projectName\n  };\n  if (typeof identity.userTypeEnum === 'number') {\n    properties.user_type_enum = identity.userTypeEnum;\n  }\n  return properties;\n};\nconst getValidatedEvent = logData => {\n  const timestamp = getNow();\n  // This is rare, but our types will not catch empty EventData\n  // and cause a JS error. In those cases it's safe the SDK\n  // still offers a safe fallback and logs the error.\n  if (!logData) {\n    config.onError(new Error('missing logData'));\n    return _objectSpread(_objectSpread({}, getValidatedProperties(ActionType.unknown, ComponentType.unknown)), {}, {\n      locale: identity.locale,\n      session_lcc_id: identity.session_lcc_id,\n      timestamp,\n      time_start: timeStone.timeStart\n    });\n  }\n  const validatedEvent = _objectSpread(_objectSpread(_objectSpread({}, logData), getValidatedProperties(logData.action, logData.componentType, logData.loggingId)), {}, {\n    locale: identity.locale,\n    session_lcc_id: identity.session_lcc_id,\n    timestamp,\n    time_start: timeStone.timeStart\n  });\n  // When passed componentType or loggingId it's important\n  // to removed them from the original reference,\n  // and keep only component_type and logging_id\n  delete validatedEvent.componentType;\n  delete validatedEvent.loggingId;\n  return validatedEvent;\n};\n\n/* eslint-enable */\n\nconst pageview = {\n  blacklistRegex: [],\n  isEnabled: false\n};\nfunction getPageviewProperties() {\n  return {\n    page_key: location.pageKey,\n    page_path: location.pagePath,\n    prev_page_key: location.prevPageKey,\n    prev_page_path: location.prevPagePath\n  };\n}\nfunction setPageview(data) {\n  Object.assign(pageview, data);\n}\nfunction setPageviewEnrichment(validatedEvent) {\n  // Page path enrichment\n  if (!pageview.isEnabled) {\n    return;\n  }\n  setPagePath();\n  Object.assign(validatedEvent, getPageviewProperties());\n}\n\n/**\n * Log an event to the Analytics Service and ultimately stored in Snowflake\n */\nfunction logEvent(eventName, eventData, eventImportance = AnalyticsEventImportance.low) {\n  // Stop event if user opt out analytics\n  if (identity.isOptOut) {\n    return;\n  }\n  // Stop event if platform is not initialized\n  if (!isValidPlatform()) {\n    return;\n  }\n\n  // Valid properties enrichment\n  const validatedEvent = getValidatedEvent(eventData);\n  // Pageview and User Attribution enrichment needs to live\n  // in logEvent because the pagepath and URL query might change\n  // if this enrichment is delayed with any queue system.\n  setPageviewEnrichment(validatedEvent);\n  setUserAttributionEnrichment(validatedEvent);\n  setIdentityFlowEnrichment(validatedEvent);\n  // Temporary boolean to help the Analytics Service understand\n  // what events we want to send to Amplitude from the Analytics Service\n  validatedEvent.has_double_fired = false;\n  // Legacy Amplitude event type\n  // TODO @zizzamia will be deprecated in 2021\n  validatedEvent.event_type = eventName;\n  // Adding even an important event into queueEvents is critical because\n  // ensure the event gets populated correctly with information\n  // stored in the IndexedDB like `sessionStart`, `sessionUUID` and has also\n  // the `userId` ready to being used.\n  if (eventImportance === AnalyticsEventImportance.high) {\n    queueEvents(validatedEvent, eventImportance);\n  } else {\n    // Schedule event asynchrony based on their best platform APIs\n    // e.g. requestIdleCallback, InteractionManager\n    scheduleEvent(() => {\n      // Add event to a lite queue that focus on waiting\n      // db.isReady and identity.userId checks pass\n      queueEvents(validatedEvent);\n    });\n  }\n}\nfunction sendMetrics(preparedMetricsData, skipScheduler = false) {\n  if (skipScheduler) {\n    apiFetch({\n      url: config.metricsEndPoint,\n      data: {\n        metrics: preparedMetricsData\n      },\n      isJSON: true,\n      // @ts-expect-error: 2021-03-20: Whitelisted type error. To be corrected after typescript migration.\n      onError: config.onError\n    });\n  } else {\n    scheduleEvent(() => {\n      apiFetch({\n        url: config.metricsEndPoint,\n        data: {\n          metrics: preparedMetricsData\n        },\n        isJSON: true,\n        // @ts-expect-error: 2021-03-20: Whitelisted type error. To be corrected after typescript migration.\n        onError: config.onError\n      });\n    });\n  }\n  debugBatch({\n    metricName: `Batch Metrics`,\n    data: preparedMetricsData\n  });\n}\n\n/**\n * Log a metric to Datadog Metrics\n */\nfunction logMetric(options) {\n  // Stop metric if platform is not valid\n  if (!isValidPlatform()) {\n    return;\n  }\n  // Enrich Metric with pagePath, this will allow the Analytics Service\n  // to automate the population of page_key as tag\n  if (PlatformName.server !== config.platform && !options.pagePath && location.pagePath) {\n    // eslint-disable-next-line no-param-reassign\n    options.pagePath = location.pagePath;\n  }\n  const isEmpty = isIdentifyFlowEmpty();\n  const tags = !isEmpty ? _objectSpread(_objectSpread(_objectSpread({}, options.tags), identityFlow), {}, {\n    locale: identity.locale,\n    deviceClass: identity.deviceClass\n  }) : _objectSpread(_objectSpread({}, options.tags), {}, {\n    locale: identity.locale,\n    deviceClass: identity.deviceClass\n  });\n  if (tags) {\n    Object.assign(options, {\n      tags\n    });\n  }\n  scheduler.metricsQueue.push(options);\n  if (isBatchMetricsReady(sendMetrics)) {\n    const preparedMetricsData = prepareMetricsData(scheduler.metricsQueue);\n    sendMetrics(preparedMetricsData);\n    scheduler.metricsQueue = [];\n  }\n}\n\n/* eslint-disable */\n\nlet IThresholdTier = /*#__PURE__*/function (IThresholdTier) {\n  IThresholdTier[\"instant\"] = \"instant\";\n  IThresholdTier[\"quick\"] = \"quick\";\n  IThresholdTier[\"moderate\"] = \"moderate\";\n  IThresholdTier[\"slow\"] = \"slow\";\n  IThresholdTier[\"unavoidable\"] = \"unavoidable\";\n  return IThresholdTier;\n}({});\n/**\n * this method converts the web vital metric name onto our datadog name format\n * @param metricName\n */\nfunction getPerformanceMetricName(metricName) {\n  return metricName.toLowerCase();\n}\nconst MAX_MEASURE_TIME = 30000;\nlet networkInformationCached = {};\n\n/**\n * Helper method to define Perfume.js configs and the analyticsTracker\n */\nconst getPerfumeOptions = () => {\n  return {\n    analyticsTracker: options => {\n      const data = options.data,\n        attribution = options.attribution,\n        metricName = options.metricName,\n        navigatorInformation = options.navigatorInformation,\n        rating = options.rating;\n      const metric = PERF_EVENTS[metricName];\n      const category = attribution?.category || null;\n      if (!metric && !category) {\n        return;\n      }\n      // Normalize values for our Data Pipeline\n      const deviceMemory = navigatorInformation?.deviceMemory || 0;\n      const hardwareConcurrency = navigatorInformation?.hardwareConcurrency || 0;\n      const isLowEndDevice = navigatorInformation?.isLowEndDevice || false;\n      const isLowEndExperience = navigatorInformation?.isLowEndExperience || false;\n      const serviceWorkerStatus = navigatorInformation?.serviceWorkerStatus || 'unsupported';\n      // Prepare common properties across most of the events\n      const defaultEventData = _objectSpread({\n        deviceMemory,\n        hardwareConcurrency,\n        isLowEndDevice,\n        isLowEndExperience,\n        serviceWorkerStatus\n      }, networkInformationCached);\n      // Prepare common DataDog tags across all metrics\n      const defaultMetricData = {\n        is_low_end_device: isLowEndDevice,\n        is_low_end_experience: isLowEndExperience,\n        page_key: location.pageKey || '',\n        // @ts-expect-error TODO: migration from monorepo\n        save_data: data.saveData || false,\n        service_worker: serviceWorkerStatus,\n        is_perf_metric: true\n      };\n      // Log event based on the shape of performance metric\n      if (metricName === 'navigationTiming') {\n        // @ts-expect-error TODO: migration from monorepo\n        if (data && typeof data.redirectTime === 'number') {\n          logMetric({\n            metricName: PERF_EVENTS.redirectTime.eventName,\n            metricType: MetricType.histogram,\n            tags: defaultMetricData,\n            // @ts-expect-error TODO: migration from monorepo\n            value: data.redirectTime || 0\n          });\n        }\n      } else if (metricName === 'TTFB') {\n        logEvent(metric.eventName, _objectSpread({\n          action: ActionType.measurement,\n          componentType: ComponentType.page,\n          // @ts-expect-error TODO: migration from monorepo\n          duration: data || null,\n          vitalsScore: rating || null\n        }, defaultEventData));\n        logMetric({\n          metricName: PERF_EVENTS.TTFB.eventName,\n          metricType: MetricType.histogram,\n          tags: _objectSpread({}, defaultMetricData),\n          // @ts-expect-error TODO: migration from monorepo\n          value: data\n        });\n        // Sent to Datadog for real-time metric monitoring\n        if (rating) {\n          logMetric({\n            metricName: `perf_web_vitals_ttfb_${rating}`,\n            metricType: MetricType.count,\n            tags: defaultMetricData,\n            value: 1\n          });\n        }\n      } else if (metricName === 'networkInformation') {\n        // @ts-expect-error TODO: migration from monorepo\n        if (data?.effectiveType) {\n          networkInformationCached = data;\n          logEvent(metric.eventName, {\n            action: ActionType.measurement,\n            componentType: ComponentType.page,\n            // @ts-expect-error TODO: migration from monorepo\n            networkInformationDownlink: data.downlink,\n            // @ts-expect-error TODO: migration from monorepo\n            networkInformationEffectiveType: data.effectiveType,\n            // @ts-expect-error TODO: migration from monorepo\n            networkInformationRtt: data.rtt,\n            // @ts-expect-error TODO: migration from monorepo\n            networkInformationSaveData: data.saveData,\n            navigatorDeviceMemory: deviceMemory,\n            navigatorHardwareConcurrency: hardwareConcurrency\n          });\n        }\n      } else if (metricName === 'storageEstimate') {\n        logEvent(metric.eventName, _objectSpread(_objectSpread({\n          action: ActionType.measurement,\n          componentType: ComponentType.page\n        }, data), defaultEventData));\n        // Sent to Datadog for real-time metric monitoring\n        logMetric({\n          metricName: 'perf_storage_estimate_caches',\n          metricType: MetricType.histogram,\n          tags: defaultMetricData,\n          // @ts-expect-error TODO: migration from monorepo\n          value: data.caches\n        });\n        logMetric({\n          metricName: 'perf_storage_estimate_indexed_db',\n          metricType: MetricType.histogram,\n          tags: defaultMetricData,\n          // @ts-expect-error TODO: migration from monorepo\n          value: data.indexedDB\n        });\n        // Metrics based on score value\n      } else if (metricName === 'CLS') {\n        logEvent(metric.eventName, _objectSpread({\n          action: ActionType.measurement,\n          componentType: ComponentType.page,\n          // @ts-expect-error TODO: migration from monorepo\n          score: data * 100 || null,\n          vitalsScore: rating || null\n        }, defaultEventData));\n        // Sent to Datadog for real-time metric monitoring\n        if (rating) {\n          logMetric({\n            metricName: `perf_web_vitals_cls_${rating}`,\n            metricType: MetricType.count,\n            tags: defaultMetricData,\n            value: 1\n          });\n        }\n        // Metrics with extra eventProperties\n      } else if (metricName === 'FID') {\n        const entry = attribution?.performanceEntry || null;\n        const parsedProcessingStart = parseInt(entry?.processingStart || '');\n        logEvent(metric.eventName, _objectSpread({\n          action: ActionType.measurement,\n          componentType: ComponentType.page,\n          // @ts-expect-error TODO: migration from monorepo\n          duration: data || null,\n          processingStart: entry?.processingStart ? parsedProcessingStart : null,\n          startTime: entry?.startTime ? parseInt(entry.startTime) : null,\n          vitalsScore: rating || null\n        }, defaultEventData));\n        // Sent to Datadog for real-time metric monitoring\n        if (rating) {\n          logMetric({\n            metricName: `perf_web_vitals_fidVitals_${rating}`,\n            metricType: MetricType.count,\n            tags: defaultMetricData,\n            value: 1\n          });\n        }\n        // logging user journey step\n      } else if (metricName === 'userJourneyStep') {\n        logEvent('perf_user_journey_step', _objectSpread({\n          action: ActionType.measurement,\n          componentType: ComponentType.page,\n          // @ts-expect-error\n          duration: data || null,\n          rating: rating ?? null,\n          step_name: attribution?.stepName || ''\n        }, defaultEventData));\n        logMetric({\n          metricName: `user_journey_step.${config.projectName}.${config.platform}.${attribution?.stepName || ''}_vitals_${rating}`,\n          metricType: MetricType.count,\n          tags: defaultMetricData,\n          value: 1\n        });\n        logMetric({\n          metricName: `user_journey_step.${config.projectName}.${config.platform}.${attribution?.stepName || ''}`,\n          metricType: MetricType.distribution,\n          tags: defaultMetricData,\n          // @ts-expect-error\n          value: data || null\n        });\n        // Metrics based on duration value\n      } else if (PERF_EVENTS[metricName]) {\n        /* \n          Only logging events and metrics where we have valid data to log. \n          There are cases when the duration of a metric is 0 (which gets logged as a null)\n          Logging these metrics with a null duration is not actionable and sends a useless signal\n          Metrics can have a 0 duration when re-visiting pages that have been cached (thread isnt being blocked due to the cached results)\n        */\n        if (data) {\n          logEvent(metric.eventName, _objectSpread({\n            action: ActionType.measurement,\n            componentType: ComponentType.page,\n            // @ts-expect-error TODO: migration from monorepo\n            duration: data || null,\n            vitalsScore: rating || null\n          }, defaultEventData));\n          // Sent to Datadog for real-time metric monitoring\n          if (rating) {\n            logMetric({\n              metricName: `perf_web_vitals_${getPerformanceMetricName(metricName)}_${rating}`,\n              metricType: MetricType.count,\n              tags: defaultMetricData,\n              value: 1\n            });\n            if (metricName === 'LCP' || metricName === 'NTBT') {\n              logMetric({\n                metricName: `perf_web_vitals_${getPerformanceMetricName(metricName)}`,\n                metricType: MetricType.distribution,\n                tags: defaultMetricData,\n                value: data\n              });\n            }\n          }\n        }\n      }\n    },\n    maxMeasureTime: MAX_MEASURE_TIME,\n    steps: config.steps,\n    onMarkStep: onMarkStepOptions\n  };\n};\nconst onMarkStepOptions = (mark, steps) => {\n  if (config?.onMarkStep) {\n    config.onMarkStep(mark, steps);\n  }\n  identifyFlow({\n    ujs: steps\n  });\n};\n\n// @ts-expect-error missing perfume.js type\nlet perfumeInstance;\nconst perfume = {\n  Perfume: () => {},\n  markStep: step => {},\n  markStepOnce: step => {},\n  incrementUjNavigation: () => {}\n};\n\n/**\n * markNTBT is used to initiate Navigation Total Blocking Time from perfume.js\n */\nconst markNTBT = () => {\n  // This method will be defined only if we are in web\n  if (isWebPlatform() && perfumeInstance && perfumeInstance.markNTBT) {\n    perfumeInstance.markNTBT();\n  }\n};\n\n/**\n *  markStep is used to mark a point in the application where a user journey step can begin or end\n */\nconst markStep = step => {\n  if (isWebPlatform() && perfumeInstance && perfume.markStep) {\n    perfume.markStep(step);\n  }\n};\n\n/**\n * markStepOnce is used to mark a point in the application once per session\n * where a user journey step can begin or end only\n * */\nconst markStepOnce = step => {\n  if (isWebPlatform() && perfumeInstance && perfume.markStepOnce) {\n    perfume.markStepOnce(step);\n  }\n};\n\n/**\n * incrementUjNavigation is used to track navigational changes in an application,\n * this helps ensure there are only active user journey steps\n * */\nconst incrementUjNavigation = () => {\n  if (isWebPlatform() && perfumeInstance && perfume.incrementUjNavigation) {\n    perfume.incrementUjNavigation();\n  }\n};\n\n/**\n * Initiate field data for performance metrics\n * Docs: https://github.com/Zizzamia/perfume.js\n */\nconst initPerfMonitoring = () => {\n  if (isWebPlatform()) {\n    try {\n      const perfumeLib = require('perfume.js');\n      perfume.markStep = perfumeLib.markStep;\n      perfume.markStepOnce = perfumeLib.markStepOnce;\n      perfume.incrementUjNavigation = perfumeLib.incrementUjNavigation;\n      perfumeInstance = new perfumeLib.Perfume(getPerfumeOptions());\n    } catch (e) {\n      if (e instanceof Error) {\n        config.onError(e);\n      }\n    }\n  }\n};\n\n/* eslint-enable */\n\n/**\n * Public method to manually track a pageview\n */\n\nfunction logPageView(options = {\n  callMarkNTBT: true\n}) {\n  // Stop log if platform is not initialized\n  if (config.platform === 'unknown') {\n    return;\n  }\n  // Avoid pageview for blacklist pathnames\n  if (pageview.blacklistRegex.some(r => r.test(getUrlPathname()))) {\n    return;\n  }\n  logEvent(PAGEVIEW_EVENT_TYPE, {\n    action: ActionType.render,\n    componentType: ComponentType.page\n  });\n  if (options.callMarkNTBT) {\n    markNTBT();\n  }\n}\n\n/* eslint-disable */\n\n/**\n * Simple Resize listener to detect viewport resize.\n * Instead of Trottle we use requestAnimationFrame to avoid blocking the CPU\n * and help guarantee smooth changes or animations.\n */\nconst onResizeWithRAF = cb => {\n  addEventListener('resize', () => {\n    requestAnimationFrame(() => {\n      cb();\n    });\n  });\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\n\nlet isUnloading = false;\nlet listenersAdded = false;\nconst onPageHide = event => {\n  isUnloading = !event.persisted;\n};\nconst addListeners = () => {\n  // The pagehide event is sent to a Window when the browser hides\n  // the current page in the process of presenting a different page\n  // from the session's history. For example, when the user clicks\n  // the browser's Back button, the current page receives a pagehide event\n  // before the previous page is shown.\n  addEventListener('pagehide', onPageHide);\n\n  // The beforeunload event is fired when the window, the document and\n  // its resources are about to be unloaded.\n  // The document is still visible and the event is still cancelable at this point.\n  //\n  // `beforeunload` is needed to fix this bug:\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=987409\n\n  addEventListener('beforeunload', () => {});\n};\nconst onVisibilityChange = (cb, visibilityState = 'hidden', once = false) => {\n  if (!listenersAdded) {\n    addListeners();\n    listenersAdded = true;\n  }\n  addEventListener('visibilitychange', ({\n    timeStamp\n  }) => {\n    if (document.visibilityState === visibilityState) {\n      cb({\n        timeStamp,\n        isUnloading\n      });\n    }\n  }, {\n    capture: true,\n    once\n  });\n};\n\n/* eslint-enable */\n\n/* eslint-disable */\n/* eslint-enable */\n\nfunction clearUAAData() {\n  UAA_QUERIES.forEach(key => {\n    if (persistentData[key]) {\n      delete persistentData[key];\n    }\n  });\n  savePersistentData();\n}\nconst MAX_SESSION_IN_SECONDS = 36000; // 10 Hours\n\nfunction recordSessionDuration() {\n  const sessionHasEnded = isSessionEnded(getNow());\n  if (sessionHasEnded) {\n    clearUAAData();\n  }\n  if (!persistentData.lastEventTime || !timeStone.sessionStart || !sessionHasEnded) {\n    return;\n  }\n  const sessionDuration = Math.round((persistentData.lastEventTime - timeStone.sessionStart) / 1000);\n  // Remove false negative/positive data\n  if (sessionDuration < 1 || sessionDuration > MAX_SESSION_IN_SECONDS) {\n    return;\n  }\n  const sessionRank = getSessionRank(sessionDuration);\n  logEvent(SESSIONS_DURATION_EVENT_TYPE, {\n    action: ActionType.measurement,\n    componentType: ComponentType.page,\n    session_duration: sessionDuration,\n    session_end: persistentData.lastEventTime,\n    session_start: timeStone.sessionStart,\n    session_rank: sessionRank\n  });\n}\n\n/**\n * Initialization of all methods that need to be executed\n * when the page visibility changes to hidden or visible.\n *\n * Note: for now we have only web events, but we eventually\n * should have React Native visibility events as well.\n */\nfunction initPageVisibilityChange() {\n  if (isWebPlatform()) {\n    onVisibilityChange(() => {\n      setPersistentData({\n        lastEventTime: getNow()\n      });\n      savePersistentData();\n      sendScheduledEvents();\n    }, 'hidden');\n    onVisibilityChange(() => {\n      recordSessionDuration();\n    }, 'visible');\n  }\n}\n\n/**\n * Initialization of all methods that need to be executed\n * when the page change viewport size.\n */\nfunction initPageResize() {\n  if (isWebPlatform()) {\n    onResizeWithRAF(() => {\n      setPlatform();\n      setDeviceSize({\n        width: window?.innerWidth ?? null,\n        height: window?.innerHeight ?? null\n      });\n    });\n  }\n}\n\n/* eslint-disable */\n\nconst cbDBInit = [];\nconst cbDBReady = [];\nconst initByDB = async () => {\n  const db = await idbGet(DB_ANALYTICS_ITEM);\n  setDB({\n    isReady: true\n  });\n  onDBInit();\n  if (!db) {\n    return;\n  }\n  onDBReady();\n  setPersistentData({\n    // Legacy Amplitude\n    eventId: db.eventId || persistentData.eventId,\n    sequenceNumber: db.sequenceNumber || persistentData.sequenceNumber,\n    sessionId: db.sessionId || persistentData.sessionId,\n    // Session definitions\n    lastEventTime: db.lastEventTime || persistentData.lastEventTime,\n    sessionUUID: db.sessionUUID || persistentData.sessionUUID\n  });\n  setUAAValues(db);\n  setTime({\n    sessionStart: db.sessionStart || persistentData.sessionStart\n  });\n  setSessionQuality({\n    ac: db.ac || sessionQuality.ac,\n    af: db.af || sessionQuality.af,\n    ah: db.ah || sessionQuality.ah,\n    al: db.al || sessionQuality.al,\n    am: db.am || sessionQuality.am,\n    ar: db.ar || sessionQuality.ar,\n    as: db.as || sessionQuality.as,\n    pv: db.pv || sessionQuality.pv\n  });\n  if (config.trackUserId) {\n    setIdentity({\n      userId: db.userId || identity.userId\n    });\n  }\n  // Make sure to record the session_duration just after we read\n  // the value of sessionStart, lastEventTime and session actions from IndexedDB\n  // Note: we need to run this method just before a new session will start,\n  //       that's why is critical to execute it inside initByDB just after we\n  //       collected past data and just before we enrich all new log events data.\n  recordSessionDuration();\n  debugLog({\n    metricName: `Initialized Analytics IndexedDB:`,\n    data: db\n  });\n};\n\n/**\n * The Database is initiliazed and it executes\n * all the queued callbacks\n */\nconst onDBInit = () => {\n  const cb = cbDBInit.shift();\n  if (cb) {\n    cb();\n  }\n};\n\n/**\n * The Database is ready to be used and it executes\n * all the queued callbacks.\n *\n * The key difference between Init and Ready is that\n * some browser have not IndexedDB support, and they\n * might never be ready. Where instead Init is simply\n * refers that the Database logic was initialized.\n */\nconst onDBReady = () => {\n  const cb = cbDBReady.shift();\n  if (cb) {\n    cb();\n  }\n};\n\n/* eslint-enable */\n\n// Return current UAA data stored in IndexedDB\nfunction dbUAAData(db) {\n  const uaaDataInDB = {};\n  UAA_QUERIES.forEach(key => {\n    if (db[key]) {\n      uaaDataInDB[key] = db[key];\n    }\n  });\n  return uaaDataInDB;\n}\n\n/**\n * Create allowed User Acquisition Attribution from queries\n */\nfunction setUAAValues(db) {\n  setPersistentData(_objectSpread(_objectSpread({}, dbUAAData(db)), uaaValuesFromUrl()));\n}\nlet experimentExposureHash = {};\nfunction getExperimentExposureParams(experimentData) {\n  return {\n    test_name: experimentData.testName,\n    group_name: experimentData.group,\n    subject_id: experimentData.subjectId,\n    exposed_at: getNow(),\n    subject_type: experimentData.subjectType,\n    platform: config.platform\n  };\n}\nasync function initExposureHash() {\n  return idbGet(DB_EXPOSURE_ITEM).then(expExposures => {\n    experimentExposureHash = expExposures ?? {};\n  }).catch(e => {\n    if (e instanceof Error) {\n      config.onError(e);\n    }\n  });\n}\nfunction exposeExperiment(experimentData) {\n  // TODO: if we can async / await cleanse the promise here that would be much better, or move some of this out so we can test it\n  const data = getExperimentExposureParams(experimentData);\n  experimentExposureHash[experimentData.testName] = experimentExposureHash[experimentData.testName] || 0;\n  if (experimentExposureHash[experimentData.testName] + EXPOSURE_MIN_INTERVAL > getNow()) {\n    debugLog({\n      metricName: `Event: exposeExperiment ${experimentData.testName} not sent`,\n      data\n    });\n    return;\n  }\n  experimentExposureHash[experimentData.testName] = getNow();\n  void idbSet(DB_EXPOSURE_ITEM, experimentExposureHash);\n  debugLog({\n    metricName: `Event: exposeExperiment ${experimentData.testName} sent`,\n    data\n  });\n  apiFetch({\n    url: config.exposureEndpoint,\n    // @ts-expect-error TODO: migration from monorepo\n    data: [data],\n    // @ts-expect-error: 2021-03-20: Whitelisted type error. To be corrected after typescript migration.\n    onError: (err, metadata) => {\n      experimentExposureHash[experimentData.testName] = 0;\n      void idbSet(DB_EXPOSURE_ITEM, experimentExposureHash);\n      config.onError(err, metadata);\n    },\n    isJSON: true,\n    // Exposures should be fired with high priority to avoid imbalances caused\n    // by differing queueing delays (requestIdleCallback) across experiment\n    // groups.\n    importance: AnalyticsEventImportance.high\n  });\n}\n\n/* eslint-disable */\n\n/**\n * Initializes the Amplitude Lite SDK with\n * the apiKey and any optional configurations.\n *\n * This is required before any other methods can be called.\n */\nconst init = analyticsConfig => {\n  setConfig(analyticsConfig);\n  setLocale();\n  setPlatform();\n  // Init IndexedDB after the platform is defined\n  initIDB();\n  debugLog({\n    metricName: `Initialized Analytics:`,\n    data: {\n      deviceId: identity.deviceId\n    }\n  });\n  cbDBInit.push(() => {\n    // Run queueEvents as soon as the DB is ready, this covers an edge case\n    // in Safari where the first event is not fired until there is a second one\n    // TODO @zizzamia re-test this logic to see possible improvements\n    queueEvents();\n  });\n  void initByDB();\n  void initExposureHash();\n  setDevice();\n  initPageVisibilityChange();\n  initPageResize();\n  initPerfMonitoring();\n};\n\n/**\n * Sets the User ID and updates user properties for future events.\n */\nconst identify = properties => {\n  setIdentity(properties);\n  if (properties.userAgent) {\n    setDevice();\n  }\n  debugLog({\n    metricName: `Identify:`,\n    data: {\n      countryCode: identity.countryCode,\n      deviceId: identity.deviceId,\n      userId: identity.userId\n    }\n  });\n};\n\n/**\n * Initiate auto instrumentation for the `pageview` events.\n */\nconst initTrackPageview = ({\n  blacklistRegex,\n  pageKeyRegex,\n  browserHistory\n}) => {\n  setPageview({\n    blacklistRegex: blacklistRegex || [],\n    isEnabled: true\n  });\n  setLocation({\n    pageKeyRegex\n  });\n  logPageView({\n    callMarkNTBT: false\n  });\n  browserHistory.listen(() => {\n    logPageView();\n  });\n};\n\n/**\n * For Next.js apps, initiate auto instrumentation for the `pageview` events.\n */\nconst initNextJsTrackPageview = ({\n  blacklistRegex,\n  pageKeyRegex,\n  nextJsRouter\n}) => {\n  setPageview({\n    blacklistRegex: blacklistRegex || [],\n    isEnabled: true\n  });\n  setLocation({\n    pageKeyRegex\n  });\n  logPageView({\n    callMarkNTBT: false\n  });\n  const nextJsLogPageView = () => {\n    logPageView();\n  };\n  nextJsRouter.events.on('routeChangeComplete', nextJsLogPageView);\n};\n/**\n * Turns off logging for the user.\n * No events will be saved or sent to Analytics Service\n * while this is enabled.\n */\nconst optOut = () => {\n  setIdentity({\n    isOptOut: true\n  });\n  idbSet(DB_ANALYTICS_ITEM, {});\n};\n\n/**\n * Turns on logging for the user.\n */\nconst optIn = () => {\n  setIdentity({\n    isOptOut: false\n  });\n};\n\n/* eslint-enable */\n\nconst automatedEvents = {\n  Button: {\n    label: 'cb_button',\n    uuid: 'e921a074-40e6-4371-8700-134d5cd633e6',\n    componentType: ComponentType.button\n  }\n};\n\n/**\n * This method helps to create a custom event config to use with a CDS component\n * @param componentName event name to track\n * @param actions list of actions to track, e.g. click, hover\n * @param data custom data for the event\n */\nfunction createEventConfig(componentName, actions, data) {\n  return {\n    componentName,\n    actions,\n    data\n  };\n}\nfunction automatedLogEvent(event, action, config) {\n  const componentName = config.componentName,\n    data = config.data;\n  logEvent(event.label, _objectSpread({\n    componentType: event.componentType,\n    action,\n    loggingId: event.uuid,\n    component_name: componentName\n  }, data));\n}\n\n/**\n * This mapping enables the integration with CDS Event Handler: https://cds.cbhq.net/analytics/.\n * This map contains (will contain) an entry for each of the CDS components and their respective actions.\n * For each action we define a callback that will be used by CDS EventHandlerCallback to pass component information\n * and track said information by using automatedLogEvent.\n * For each component developers can define actionMapping entries to convert CDS\n * actions to Client Analytics ones.\n */\nconst automatedMappingConfig = {\n  actionMapping: {\n    onPress: ActionType.click,\n    onHover: ActionType.hover\n  },\n  handlers: {\n    Button: {\n      [ActionType.click]: customConfig => automatedLogEvent(automatedEvents.Button, ActionType.click, customConfig),\n      [ActionType.hover]: customConfig => automatedLogEvent(automatedEvents.Button, ActionType.hover, customConfig)\n    }\n  }\n};\nfunction sendTraces(traces, skipScheduler = false) {\n  if (skipScheduler) {\n    apiFetch({\n      url: config.tracesEndpoint,\n      data: {\n        traces\n      },\n      isJSON: true,\n      // @ts-expect-error: 2021-03-20: Whitelisted type error. To be corrected after typescript migration.\n      onError: config.onError\n    });\n  } else {\n    scheduleEvent(() => {\n      apiFetch({\n        url: config.tracesEndpoint,\n        data: {\n          traces\n        },\n        isJSON: true,\n        // @ts-expect-error: 2021-03-20: Whitelisted type error. To be corrected after typescript migration.\n        onError: config.onError\n      });\n    });\n  }\n  debugBatch({\n    metricName: `Batch Traces`,\n    data: traces\n  });\n}\nconst MILLI_TO_NANO_CONVERSION_RATE = 1_000_000;\n/**\n * converts milliseconds to nanoseconds (required by tracing)\n * @param milliseconds\n */\nfunction millisecondsToNanoseconds(milliseconds) {\n  return milliseconds * MILLI_TO_NANO_CONVERSION_RATE;\n}\n\n/**\n * returns crypto library from  the window object\n */\nfunction getCrypto() {\n  return window?.crypto;\n}\n\n/**\n * generates a unique tracing id (unsigned int 64) as a string\n * to keep precision\n * if this method is called on react native or server environment\n * you need to pass an implementation fo the Crypto object\n *\n * @param crypto\n */\nfunction getTracingId(crypto = getCrypto()) {\n  const array = new Uint32Array(2);\n  crypto?.getRandomValues(array);\n  // eslint-disable-next-line no-bitwise\n  const uint64 = (BigInt(array[0]) << BigInt(32)) + BigInt(array[1]);\n  return uint64.toString();\n}\n\n/**\n * returns a object containing tracing headers and their value\n * using the trace and span IDs passed as params\n * @param traceId\n * @param spanId\n */\nfunction getTracingHeaders(traceId, spanId) {\n  return {\n    'x-datadog-origin': 'rum',\n    'x-datadog-parent-id': spanId,\n    'x-datadog-sampling-priority': '1',\n    'x-datadog-trace-id': traceId\n  };\n}\nfunction getTracingHeadersFromSpan(span) {\n  return getTracingHeaders(span.trace_id, span.span_id);\n}\n\n/**\n *\n * @param spanInit\n * @param.start The start time of the request in _millisenconds_ from the UNIX epoch.\n * @param.duration The duration of the request in _millisenconds_.\n */\nfunction createNewSpan(spanInit) {\n  const name = spanInit.name,\n    traceId = spanInit.traceId,\n    spanId = spanInit.spanId,\n    start = spanInit.start,\n    duration = spanInit.duration,\n    resource = spanInit.resource,\n    meta = spanInit.meta,\n    parentId = spanInit.parentId;\n  return {\n    duration: duration ? millisecondsToNanoseconds(duration) : 0,\n    name,\n    resource,\n    service: config.projectName,\n    span_id: spanId ?? getTracingId(),\n    start: start ? millisecondsToNanoseconds(start) : 0,\n    trace_id: traceId ?? getTracingId(),\n    // this is a default value\n    parent_id: parentId ?? DEFAULT_SPAN_PARENT_ID,\n    type: DEFAULT_SPAN_TYPE,\n    meta: _objectSpread(_objectSpread(_objectSpread({\n      platform: config.platform\n    }, location.pageKey ? {\n      page_key: location.pageKey\n    } : {}), identityFlow.ujs?.length ? {\n      last_ujs: identityFlow.ujs[identityFlow.ujs.length - 1]\n    } : {}), meta ?? {})\n  };\n}\n\n/**\n *\n * Updates the original span\n * @param span the span you want to update\n * @param options\n * @param.start The start time of the request in _millisenconds_ from the UNIX epoch.\n * @param.duration The duration of the request in _millisenconds_.\n *\n */\nfunction updateSpan(span, options) {\n  const meta = _objectSpread(_objectSpread({}, span.meta), options.meta);\n  const times = {\n    start: options.start ? millisecondsToNanoseconds(options.start) : span.start,\n    duration: options.duration ? millisecondsToNanoseconds(options.duration) : span.duration\n  };\n  Object.assign(span, options, _objectSpread({\n    meta\n  }, times));\n}\n\n/**\n * returns true if the trace has at least one span otherwise false\n */\nfunction isValidTrace(trace) {\n  return trace.length > 0;\n}\n\n/**\n * this methods updates each single span in the trace with the passed options\n */\nfunction updateTrace(trace, options) {\n  trace.forEach(span => updateSpan(span, options));\n}\n\n/**\n * Creates a new trace containing a single span initiated with the\n * spanOptions\n * @param spanOptions\n */\nfunction createNewTrace(spanOptions) {\n  return [createNewSpan(spanOptions)];\n}\nfunction logTrace(trace, options) {\n  // Stop trace if platform is not initialized\n  if (!isValidPlatform()) {\n    return;\n  }\n  if (!isValidTrace(trace)) {\n    return;\n  }\n  if (options) {\n    // update only if options are passed in\n    updateTrace(trace, options);\n  }\n  scheduler.tracesQueue.push(trace);\n  if (isBatchTracesReady(sendTraces)) {\n    sendTraces(scheduler.tracesQueue);\n    scheduler.tracesQueue = [];\n  }\n}\nfunction isWindowSupported() {\n  return typeof window !== undefined;\n}\nfunction measure(markLabel, markStartStep, markStep) {\n  try {\n    performance.measure(markLabel, markStartStep, markStep);\n  } catch (error) {\n    config.onError(error);\n  }\n}\nfunction isPerformanceTrackingSupported() {\n  return isWindowSupported() && 'performance' in window && 'mark' in performance && 'getEntriesByName' in performance;\n}\nfunction getMarkLabel(markName, options) {\n  return `perf_${markName}${options?.label ? `_${options.label}` : ''}`;\n}\nfunction getMarkStep(markName, step, options) {\n  return `${getMarkLabel(markName, options)}__${step}`;\n}\nlet perfMarkStatus = {};\nfunction perfMark(markName, step, options) {\n  if (!isPerformanceTrackingSupported()) {\n    return;\n  }\n  const markStep = getMarkStep(markName, step, options);\n  performance.mark(markStep);\n  if (step === 'end') {\n    const markLabel = getMarkLabel(markName, options);\n    const markStartStep = getMarkStep(markName, 'start', options);\n    measure(markLabel, markStartStep, markStep);\n    const entry = performance.getEntriesByName(markLabel).pop();\n    if (entry) {\n      logMetric(_objectSpread({\n        metricName: markName,\n        metricType: MetricType.distribution,\n        value: entry.duration\n      }, options?.tags ? {\n        tags: options.tags\n      } : {}));\n    }\n  }\n}\nfunction startPerfMark(markName, options) {\n  if (!isPerformanceTrackingSupported()) {\n    return;\n  }\n  const markStep = getMarkStep(markName, 'start', options);\n  // check if mark start exist first\n  if (!perfMarkStatus[markStep]) {\n    perfMark(markName, 'start', options);\n    perfMarkStatus[markStep] = true;\n  }\n}\nfunction clearMarkEntry(markName, options) {\n  const markStartStep = getMarkStep(markName, 'start', options);\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  const _perfMarkStatus = perfMarkStatus,\n    _ = _perfMarkStatus[markStartStep],\n    otherMarks = _objectWithoutProperties(_perfMarkStatus, [markStartStep].map(_toPropertyKey));\n  perfMarkStatus = otherMarks;\n}\nfunction endPerfMark(markName, options) {\n  if (!isPerformanceTrackingSupported()) {\n    return;\n  }\n  const markStartStep = getMarkStep(markName, 'start', options);\n  // check if mark start exist first\n  if (perfMarkStatus[markStartStep]) {\n    // check if we already called end mark\n    perfMark(markName, 'end', options);\n    clearMarkEntry(markName, options);\n  }\n}\nfunction clearPerformanceMarkEntries() {\n  if (!isPerformanceTrackingSupported()) {\n    return;\n  }\n  performance.clearMarks();\n  perfMarkStatus = {};\n}\n\n/**\n * A function that returns a callback to be used when tracking an event\n */\nfunction useEventLogger(name, properties, eventImportance = AnalyticsEventImportance.low) {\n  const propertiesRef = useRef(properties);\n  useEffect(() => {\n    propertiesRef.current = properties;\n  }, [properties]);\n  return useCallback(customProperties => {\n    logEvent(name, _objectSpread(_objectSpread({}, propertiesRef.current), customProperties), eventImportance);\n  }, [name, eventImportance]);\n}\n\n/**\n * A function that tracks an event when a component mounts.\n */\nfunction useLogEventOnMount(name, properties, eventImportance = AnalyticsEventImportance.low) {\n  useEffect(() => {\n    const validProperties = _objectSpread(_objectSpread({}, properties), {}, {\n      action: ActionType.render\n    });\n    logEvent(name, validProperties, eventImportance);\n    // eslint-disable-next-line\n  }, []);\n}\n\n/**\n * It will return two callbacks used to start and end marks.\n * `Options` can be passed when calling the custom hook and/or\n * overridden by passing options to `markEndPerf`\n * @param markName suffix used by the browser to generate mark timing entries\n * @param options to customize browser timing entry and logMetric call\n */\nfunction usePerformanceMarks(markName, options) {\n  const markStartPerf = useCallback(() => startPerfMark(markName, options), [markName, options]);\n  const markEndPerf = useCallback(newOptions => endPerfMark(markName, _objectSpread(_objectSpread({}, options), newOptions)), [markName, options]);\n  return {\n    markStartPerf,\n    markEndPerf\n  };\n}\n\n/**\n * this method checks if a property is valid (no undefined, no null, no empty string)\n * @param property\n */\nfunction isPropertyValid(property) {\n  return property !== undefined && property !== null && property !== '';\n}\n\n/**\n * this methods return the content of identity\n */\nfunction getUserContext() {\n  return Object.entries(_objectSpread(_objectSpread(_objectSpread({}, identityFlow), getPageviewProperties()), {}, {\n    sessionUUID: persistentData.sessionUUID,\n    userId: persistentData.userId,\n    locale: identity.locale,\n    countryCode: identity.countryCode\n  })).reduce((acc, entry) => {\n    return isPropertyValid(entry[1]) ? _objectSpread(_objectSpread({}, acc), {}, {\n      [entry[0]]: entry[1]\n    }) : acc;\n  }, {});\n}\n\n// flushQueue sends all the events, metrics and traces that are in the queue.\nasync function flushQueue() {\n  return new Promise(resolve => {\n    // TODO - wait for all the events to be sent and then resolve\n    // adding fake promise to avoid migration on client side\n    sendEvents(prepareEventsData(scheduler.eventsQueue));\n    sendMetrics(prepareMetricsData(scheduler.metricsQueue), true);\n    sendTraces(scheduler.tracesQueue, true);\n    setScheduler({\n      eventsQueue: [],\n      metricsQueue: [],\n      tracesQueue: []\n    });\n    resolve();\n  });\n}\n\n/* eslint-disable */\nfunction escapeHeaderArray(list) {\n  if (list === undefined || list.length === 0) return '';\n  return list.join(',');\n}\nfunction getAnalyticsHeaders() {\n  return {\n    'X-CB-Device-ID': identity.deviceId || 'unknown',\n    'X-CB-User-ID': identity.userId || 'unknown',\n    'X-CB-Is-Logged-In': identity.userId ? 'true' : 'false',\n    'X-CB-Pagekey': location.pageKey || 'unknown',\n    'X-CB-UJS': escapeHeaderArray(identityFlow.ujs),\n    'X-CB-Platform': config.platform || 'unknown',\n    'X-CB-Project-Name': config.projectName || 'unknown',\n    'X-CB-Session-UUID': persistentData.sessionUUID || 'unknown',\n    'X-CB-Version-Name': config.version ? String(config.version) : 'unknown'\n  };\n}\n\n/* eslint-enable */\n\nexport { ActionType, AnalyticsEventImportance, AnalyticsQueries, AuthStatus, ComponentType, IThresholdTier, MetricType, PlatformName, SessionActions, SessionAutomatedEvents, SessionRank, SubjectType, UserTypeCommerce, UserTypeInsto, UserTypeRetail, UserTypeRetailBusinessBanking, UserTypeRetailEmployeeInternal, UserTypeRetailEmployeePersonal, UserTypeWallet, automatedEvents, automatedMappingConfig, clearMarkEntry, clearPerformanceMarkEntries, config, createEventConfig, createNewSpan, createNewTrace, device, endPerfMark, exposeExperiment, flushQueue, generateUUID, getAnalyticsHeaders, getReferrerData, getTracingHeaders, getTracingHeadersFromSpan, getTracingId, getUrlHostname, getUrlParams, getUrlPathname, getUserContext, identify, identifyFlow, identity, identityFlow, incrementUjNavigation, init, initNextJsTrackPageview, initTrackPageview, isEventKeyFormatValid, isSessionEnded, location, logEvent, logMetric, logPageView, logTrace, markNTBT, markStep, markStepOnce, onVisibilityChange, optIn, optOut, perfMark, persistentData, postMessage, recordSessionDuration, removeFromIdentifyFlow, savePersistentData, sendScheduledEvents, setBreadcrumbs, setConfig, setLocation, setPagePath, setPageview, setPersistentData, setSessionStart, setTime, startPerfMark, timeStone, updateSpan, updateTrace, useEventLogger, useLogEventOnMount, usePerformanceMarks };\n//# sourceMappingURL=index.js.map\n","/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Firebase constants.  Some of these (@defines) can be overridden at compile-time.\r\n */\r\nconst CONSTANTS = {\r\n    /**\r\n     * @define {boolean} Whether this is the client Node.js SDK.\r\n     */\r\n    NODE_CLIENT: false,\r\n    /**\r\n     * @define {boolean} Whether this is the Admin Node.js SDK.\r\n     */\r\n    NODE_ADMIN: false,\r\n    /**\r\n     * Firebase SDK Version\r\n     */\r\n    SDK_VERSION: '${JSCORE_VERSION}'\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Throws an error if the provided assertion is falsy\r\n */\r\nconst assert = function (assertion, message) {\r\n    if (!assertion) {\r\n        throw assertionError(message);\r\n    }\r\n};\r\n/**\r\n * Returns an Error object suitable for throwing.\r\n */\r\nconst assertionError = function (message) {\r\n    return new Error('Firebase Database (' +\r\n        CONSTANTS.SDK_VERSION +\r\n        ') INTERNAL ASSERT FAILED: ' +\r\n        message);\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst stringToByteArray$1 = function (str) {\r\n    // TODO(user): Use native implementations if/when available\r\n    const out = [];\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if ((c & 0xfc00) === 0xd800 &&\r\n            i + 1 < str.length &&\r\n            (str.charCodeAt(i + 1) & 0xfc00) === 0xdc00) {\r\n            // Surrogate Pair\r\n            c = 0x10000 + ((c & 0x03ff) << 10) + (str.charCodeAt(++i) & 0x03ff);\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Turns an array of numbers into the string given by the concatenation of the\r\n * characters to which the numbers correspond.\r\n * @param bytes Array of numbers representing characters.\r\n * @return Stringification of the array.\r\n */\r\nconst byteArrayToString = function (bytes) {\r\n    // TODO(user): Use native implementations if/when available\r\n    const out = [];\r\n    let pos = 0, c = 0;\r\n    while (pos < bytes.length) {\r\n        const c1 = bytes[pos++];\r\n        if (c1 < 128) {\r\n            out[c++] = String.fromCharCode(c1);\r\n        }\r\n        else if (c1 > 191 && c1 < 224) {\r\n            const c2 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 31) << 6) | (c2 & 63));\r\n        }\r\n        else if (c1 > 239 && c1 < 365) {\r\n            // Surrogate Pair\r\n            const c2 = bytes[pos++];\r\n            const c3 = bytes[pos++];\r\n            const c4 = bytes[pos++];\r\n            const u = (((c1 & 7) << 18) | ((c2 & 63) << 12) | ((c3 & 63) << 6) | (c4 & 63)) -\r\n                0x10000;\r\n            out[c++] = String.fromCharCode(0xd800 + (u >> 10));\r\n            out[c++] = String.fromCharCode(0xdc00 + (u & 1023));\r\n        }\r\n        else {\r\n            const c2 = bytes[pos++];\r\n            const c3 = bytes[pos++];\r\n            out[c++] = String.fromCharCode(((c1 & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\r\n        }\r\n    }\r\n    return out.join('');\r\n};\r\n// We define it as an object literal instead of a class because a class compiled down to es5 can't\r\n// be treeshaked. https://github.com/rollup/rollup/issues/1691\r\n// Static lookup maps, lazily populated by init_()\r\nconst base64 = {\r\n    /**\r\n     * Maps bytes to characters.\r\n     */\r\n    byteToCharMap_: null,\r\n    /**\r\n     * Maps characters to bytes.\r\n     */\r\n    charToByteMap_: null,\r\n    /**\r\n     * Maps bytes to websafe characters.\r\n     * @private\r\n     */\r\n    byteToCharMapWebSafe_: null,\r\n    /**\r\n     * Maps websafe characters to bytes.\r\n     * @private\r\n     */\r\n    charToByteMapWebSafe_: null,\r\n    /**\r\n     * Our default alphabet, shared between\r\n     * ENCODED_VALS and ENCODED_VALS_WEBSAFE\r\n     */\r\n    ENCODED_VALS_BASE: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' + 'abcdefghijklmnopqrstuvwxyz' + '0123456789',\r\n    /**\r\n     * Our default alphabet. Value 64 (=) is special; it means \"nothing.\"\r\n     */\r\n    get ENCODED_VALS() {\r\n        return this.ENCODED_VALS_BASE + '+/=';\r\n    },\r\n    /**\r\n     * Our websafe alphabet.\r\n     */\r\n    get ENCODED_VALS_WEBSAFE() {\r\n        return this.ENCODED_VALS_BASE + '-_.';\r\n    },\r\n    /**\r\n     * Whether this browser supports the atob and btoa functions. This extension\r\n     * started at Mozilla but is now implemented by many browsers. We use the\r\n     * ASSUME_* variables to avoid pulling in the full useragent detection library\r\n     * but still allowing the standard per-browser compilations.\r\n     *\r\n     */\r\n    HAS_NATIVE_SUPPORT: typeof atob === 'function',\r\n    /**\r\n     * Base64-encode an array of bytes.\r\n     *\r\n     * @param input An array of bytes (numbers with\r\n     *     value in [0, 255]) to encode.\r\n     * @param webSafe Boolean indicating we should use the\r\n     *     alternative alphabet.\r\n     * @return The base64 encoded string.\r\n     */\r\n    encodeByteArray(input, webSafe) {\r\n        if (!Array.isArray(input)) {\r\n            throw Error('encodeByteArray takes an array as a parameter');\r\n        }\r\n        this.init_();\r\n        const byteToCharMap = webSafe\r\n            ? this.byteToCharMapWebSafe_\r\n            : this.byteToCharMap_;\r\n        const output = [];\r\n        for (let i = 0; i < input.length; i += 3) {\r\n            const byte1 = input[i];\r\n            const haveByte2 = i + 1 < input.length;\r\n            const byte2 = haveByte2 ? input[i + 1] : 0;\r\n            const haveByte3 = i + 2 < input.length;\r\n            const byte3 = haveByte3 ? input[i + 2] : 0;\r\n            const outByte1 = byte1 >> 2;\r\n            const outByte2 = ((byte1 & 0x03) << 4) | (byte2 >> 4);\r\n            let outByte3 = ((byte2 & 0x0f) << 2) | (byte3 >> 6);\r\n            let outByte4 = byte3 & 0x3f;\r\n            if (!haveByte3) {\r\n                outByte4 = 64;\r\n                if (!haveByte2) {\r\n                    outByte3 = 64;\r\n                }\r\n            }\r\n            output.push(byteToCharMap[outByte1], byteToCharMap[outByte2], byteToCharMap[outByte3], byteToCharMap[outByte4]);\r\n        }\r\n        return output.join('');\r\n    },\r\n    /**\r\n     * Base64-encode a string.\r\n     *\r\n     * @param input A string to encode.\r\n     * @param webSafe If true, we should use the\r\n     *     alternative alphabet.\r\n     * @return The base64 encoded string.\r\n     */\r\n    encodeString(input, webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\r\n            return btoa(input);\r\n        }\r\n        return this.encodeByteArray(stringToByteArray$1(input), webSafe);\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * @param input to decode.\r\n     * @param webSafe True if we should use the\r\n     *     alternative alphabet.\r\n     * @return string representing the decoded value.\r\n     */\r\n    decodeString(input, webSafe) {\r\n        // Shortcut for Mozilla browsers that implement\r\n        // a native base64 encoder in the form of \"btoa/atob\"\r\n        if (this.HAS_NATIVE_SUPPORT && !webSafe) {\r\n            return atob(input);\r\n        }\r\n        return byteArrayToString(this.decodeStringToByteArray(input, webSafe));\r\n    },\r\n    /**\r\n     * Base64-decode a string.\r\n     *\r\n     * In base-64 decoding, groups of four characters are converted into three\r\n     * bytes.  If the encoder did not apply padding, the input length may not\r\n     * be a multiple of 4.\r\n     *\r\n     * In this case, the last group will have fewer than 4 characters, and\r\n     * padding will be inferred.  If the group has one or two characters, it decodes\r\n     * to one byte.  If the group has three characters, it decodes to two bytes.\r\n     *\r\n     * @param input Input to decode.\r\n     * @param webSafe True if we should use the web-safe alphabet.\r\n     * @return bytes representing the decoded value.\r\n     */\r\n    decodeStringToByteArray(input, webSafe) {\r\n        this.init_();\r\n        const charToByteMap = webSafe\r\n            ? this.charToByteMapWebSafe_\r\n            : this.charToByteMap_;\r\n        const output = [];\r\n        for (let i = 0; i < input.length;) {\r\n            const byte1 = charToByteMap[input.charAt(i++)];\r\n            const haveByte2 = i < input.length;\r\n            const byte2 = haveByte2 ? charToByteMap[input.charAt(i)] : 0;\r\n            ++i;\r\n            const haveByte3 = i < input.length;\r\n            const byte3 = haveByte3 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            const haveByte4 = i < input.length;\r\n            const byte4 = haveByte4 ? charToByteMap[input.charAt(i)] : 64;\r\n            ++i;\r\n            if (byte1 == null || byte2 == null || byte3 == null || byte4 == null) {\r\n                throw new DecodeBase64StringError();\r\n            }\r\n            const outByte1 = (byte1 << 2) | (byte2 >> 4);\r\n            output.push(outByte1);\r\n            if (byte3 !== 64) {\r\n                const outByte2 = ((byte2 << 4) & 0xf0) | (byte3 >> 2);\r\n                output.push(outByte2);\r\n                if (byte4 !== 64) {\r\n                    const outByte3 = ((byte3 << 6) & 0xc0) | byte4;\r\n                    output.push(outByte3);\r\n                }\r\n            }\r\n        }\r\n        return output;\r\n    },\r\n    /**\r\n     * Lazy static initialization function. Called before\r\n     * accessing any of the static map variables.\r\n     * @private\r\n     */\r\n    init_() {\r\n        if (!this.byteToCharMap_) {\r\n            this.byteToCharMap_ = {};\r\n            this.charToByteMap_ = {};\r\n            this.byteToCharMapWebSafe_ = {};\r\n            this.charToByteMapWebSafe_ = {};\r\n            // We want quick mappings back and forth, so we precompute two maps.\r\n            for (let i = 0; i < this.ENCODED_VALS.length; i++) {\r\n                this.byteToCharMap_[i] = this.ENCODED_VALS.charAt(i);\r\n                this.charToByteMap_[this.byteToCharMap_[i]] = i;\r\n                this.byteToCharMapWebSafe_[i] = this.ENCODED_VALS_WEBSAFE.charAt(i);\r\n                this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]] = i;\r\n                // Be forgiving when decoding and correctly decode both encodings.\r\n                if (i >= this.ENCODED_VALS_BASE.length) {\r\n                    this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)] = i;\r\n                    this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)] = i;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * An error encountered while decoding base64 string.\r\n */\r\nclass DecodeBase64StringError extends Error {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.name = 'DecodeBase64StringError';\r\n    }\r\n}\r\n/**\r\n * URL-safe base64 encoding\r\n */\r\nconst base64Encode = function (str) {\r\n    const utf8Bytes = stringToByteArray$1(str);\r\n    return base64.encodeByteArray(utf8Bytes, true);\r\n};\r\n/**\r\n * URL-safe base64 encoding (without \".\" padding in the end).\r\n * e.g. Used in JSON Web Token (JWT) parts.\r\n */\r\nconst base64urlEncodeWithoutPadding = function (str) {\r\n    // Use base64url encoding and remove padding in the end (dot characters).\r\n    return base64Encode(str).replace(/\\./g, '');\r\n};\r\n/**\r\n * URL-safe base64 decoding\r\n *\r\n * NOTE: DO NOT use the global atob() function - it does NOT support the\r\n * base64Url variant encoding.\r\n *\r\n * @param str To be decoded\r\n * @return Decoded result, if possible\r\n */\r\nconst base64Decode = function (str) {\r\n    try {\r\n        return base64.decodeString(str, true);\r\n    }\r\n    catch (e) {\r\n        console.error('base64Decode failed: ', e);\r\n    }\r\n    return null;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Do a deep-copy of basic JavaScript Objects or Arrays.\r\n */\r\nfunction deepCopy(value) {\r\n    return deepExtend(undefined, value);\r\n}\r\n/**\r\n * Copy properties from source to target (recursively allows extension\r\n * of Objects and Arrays).  Scalar values in the target are over-written.\r\n * If target is undefined, an object of the appropriate type will be created\r\n * (and returned).\r\n *\r\n * We recursively copy all child properties of plain Objects in the source- so\r\n * that namespace- like dictionaries are merged.\r\n *\r\n * Note that the target can be a function, in which case the properties in\r\n * the source Object are copied onto it as static properties of the Function.\r\n *\r\n * Note: we don't merge __proto__ to prevent prototype pollution\r\n */\r\nfunction deepExtend(target, source) {\r\n    if (!(source instanceof Object)) {\r\n        return source;\r\n    }\r\n    switch (source.constructor) {\r\n        case Date:\r\n            // Treat Dates like scalars; if the target date object had any child\r\n            // properties - they will be lost!\r\n            const dateValue = source;\r\n            return new Date(dateValue.getTime());\r\n        case Object:\r\n            if (target === undefined) {\r\n                target = {};\r\n            }\r\n            break;\r\n        case Array:\r\n            // Always copy the array source and overwrite the target.\r\n            target = [];\r\n            break;\r\n        default:\r\n            // Not a plain Object - treat it as a scalar.\r\n            return source;\r\n    }\r\n    for (const prop in source) {\r\n        // use isValidKey to guard against prototype pollution. See https://snyk.io/vuln/SNYK-JS-LODASH-450202\r\n        if (!source.hasOwnProperty(prop) || !isValidKey(prop)) {\r\n            continue;\r\n        }\r\n        target[prop] = deepExtend(target[prop], source[prop]);\r\n    }\r\n    return target;\r\n}\r\nfunction isValidKey(key) {\r\n    return key !== '__proto__';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Polyfill for `globalThis` object.\r\n * @returns the `globalThis` object for the given environment.\r\n * @public\r\n */\r\nfunction getGlobal() {\r\n    if (typeof self !== 'undefined') {\r\n        return self;\r\n    }\r\n    if (typeof window !== 'undefined') {\r\n        return window;\r\n    }\r\n    if (typeof global !== 'undefined') {\r\n        return global;\r\n    }\r\n    throw new Error('Unable to locate global object.');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst getDefaultsFromGlobal = () => getGlobal().__FIREBASE_DEFAULTS__;\r\n/**\r\n * Attempt to read defaults from a JSON string provided to\r\n * process(.)env(.)__FIREBASE_DEFAULTS__ or a JSON file whose path is in\r\n * process(.)env(.)__FIREBASE_DEFAULTS_PATH__\r\n * The dots are in parens because certain compilers (Vite?) cannot\r\n * handle seeing that variable in comments.\r\n * See https://github.com/firebase/firebase-js-sdk/issues/6838\r\n */\r\nconst getDefaultsFromEnvVariable = () => {\r\n    if (typeof process === 'undefined' || typeof process.env === 'undefined') {\r\n        return;\r\n    }\r\n    const defaultsJsonString = process.env.__FIREBASE_DEFAULTS__;\r\n    if (defaultsJsonString) {\r\n        return JSON.parse(defaultsJsonString);\r\n    }\r\n};\r\nconst getDefaultsFromCookie = () => {\r\n    if (typeof document === 'undefined') {\r\n        return;\r\n    }\r\n    let match;\r\n    try {\r\n        match = document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/);\r\n    }\r\n    catch (e) {\r\n        // Some environments such as Angular Universal SSR have a\r\n        // `document` object but error on accessing `document.cookie`.\r\n        return;\r\n    }\r\n    const decoded = match && base64Decode(match[1]);\r\n    return decoded && JSON.parse(decoded);\r\n};\r\n/**\r\n * Get the __FIREBASE_DEFAULTS__ object. It checks in order:\r\n * (1) if such an object exists as a property of `globalThis`\r\n * (2) if such an object was provided on a shell environment variable\r\n * (3) if such an object exists in a cookie\r\n * @public\r\n */\r\nconst getDefaults = () => {\r\n    try {\r\n        return (getDefaultsFromGlobal() ||\r\n            getDefaultsFromEnvVariable() ||\r\n            getDefaultsFromCookie());\r\n    }\r\n    catch (e) {\r\n        /**\r\n         * Catch-all for being unable to get __FIREBASE_DEFAULTS__ due\r\n         * to any environment case we have not accounted for. Log to\r\n         * info instead of swallowing so we can find these unknown cases\r\n         * and add paths for them if needed.\r\n         */\r\n        console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);\r\n        return;\r\n    }\r\n};\r\n/**\r\n * Returns emulator host stored in the __FIREBASE_DEFAULTS__ object\r\n * for the given product.\r\n * @returns a URL host formatted like `127.0.0.1:9999` or `[::1]:4000` if available\r\n * @public\r\n */\r\nconst getDefaultEmulatorHost = (productName) => { var _a, _b; return (_b = (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.emulatorHosts) === null || _b === void 0 ? void 0 : _b[productName]; };\r\n/**\r\n * Returns emulator hostname and port stored in the __FIREBASE_DEFAULTS__ object\r\n * for the given product.\r\n * @returns a pair of hostname and port like `[\"::1\", 4000]` if available\r\n * @public\r\n */\r\nconst getDefaultEmulatorHostnameAndPort = (productName) => {\r\n    const host = getDefaultEmulatorHost(productName);\r\n    if (!host) {\r\n        return undefined;\r\n    }\r\n    const separatorIndex = host.lastIndexOf(':'); // Finding the last since IPv6 addr also has colons.\r\n    if (separatorIndex <= 0 || separatorIndex + 1 === host.length) {\r\n        throw new Error(`Invalid host ${host} with no separate hostname and port!`);\r\n    }\r\n    // eslint-disable-next-line no-restricted-globals\r\n    const port = parseInt(host.substring(separatorIndex + 1), 10);\r\n    if (host[0] === '[') {\r\n        // Bracket-quoted `[ipv6addr]:port` => return \"ipv6addr\" (without brackets).\r\n        return [host.substring(1, separatorIndex - 1), port];\r\n    }\r\n    else {\r\n        return [host.substring(0, separatorIndex), port];\r\n    }\r\n};\r\n/**\r\n * Returns Firebase app config stored in the __FIREBASE_DEFAULTS__ object.\r\n * @public\r\n */\r\nconst getDefaultAppConfig = () => { var _a; return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.config; };\r\n/**\r\n * Returns an experimental setting on the __FIREBASE_DEFAULTS__ object (properties\r\n * prefixed by \"_\")\r\n * @public\r\n */\r\nconst getExperimentalSetting = (name) => { var _a; return (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a[`_${name}`]; };\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass Deferred {\r\n    constructor() {\r\n        this.reject = () => { };\r\n        this.resolve = () => { };\r\n        this.promise = new Promise((resolve, reject) => {\r\n            this.resolve = resolve;\r\n            this.reject = reject;\r\n        });\r\n    }\r\n    /**\r\n     * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around\r\n     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback\r\n     * and returns a node-style callback which will resolve or reject the Deferred's promise.\r\n     */\r\n    wrapCallback(callback) {\r\n        return (error, value) => {\r\n            if (error) {\r\n                this.reject(error);\r\n            }\r\n            else {\r\n                this.resolve(value);\r\n            }\r\n            if (typeof callback === 'function') {\r\n                // Attaching noop handler just in case developer wasn't expecting\r\n                // promises\r\n                this.promise.catch(() => { });\r\n                // Some of our callbacks don't expect a value and our own tests\r\n                // assert that the parameter length is 1\r\n                if (callback.length === 1) {\r\n                    callback(error);\r\n                }\r\n                else {\r\n                    callback(error, value);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction createMockUserToken(token, projectId) {\r\n    if (token.uid) {\r\n        throw new Error('The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.');\r\n    }\r\n    // Unsecured JWTs use \"none\" as the algorithm.\r\n    const header = {\r\n        alg: 'none',\r\n        type: 'JWT'\r\n    };\r\n    const project = projectId || 'demo-project';\r\n    const iat = token.iat || 0;\r\n    const sub = token.sub || token.user_id;\r\n    if (!sub) {\r\n        throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\r\n    }\r\n    const payload = Object.assign({ \r\n        // Set all required fields to decent defaults\r\n        iss: `https://securetoken.google.com/${project}`, aud: project, iat, exp: iat + 3600, auth_time: iat, sub, user_id: sub, firebase: {\r\n            sign_in_provider: 'custom',\r\n            identities: {}\r\n        } }, token);\r\n    // Unsecured JWTs use the empty string as a signature.\r\n    const signature = '';\r\n    return [\r\n        base64urlEncodeWithoutPadding(JSON.stringify(header)),\r\n        base64urlEncodeWithoutPadding(JSON.stringify(payload)),\r\n        signature\r\n    ].join('.');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns navigator.userAgent string or '' if it's not defined.\r\n * @return user agent string\r\n */\r\nfunction getUA() {\r\n    if (typeof navigator !== 'undefined' &&\r\n        typeof navigator['userAgent'] === 'string') {\r\n        return navigator['userAgent'];\r\n    }\r\n    else {\r\n        return '';\r\n    }\r\n}\r\n/**\r\n * Detect Cordova / PhoneGap / Ionic frameworks on a mobile device.\r\n *\r\n * Deliberately does not rely on checking `file://` URLs (as this fails PhoneGap\r\n * in the Ripple emulator) nor Cordova `onDeviceReady`, which would normally\r\n * wait for a callback.\r\n */\r\nfunction isMobileCordova() {\r\n    return (typeof window !== 'undefined' &&\r\n        // @ts-ignore Setting up an broadly applicable index signature for Window\r\n        // just to deal with this case would probably be a bad idea.\r\n        !!(window['cordova'] || window['phonegap'] || window['PhoneGap']) &&\r\n        /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA()));\r\n}\r\n/**\r\n * Detect Node.js.\r\n *\r\n * @return true if Node.js environment is detected or specified.\r\n */\r\n// Node detection logic from: https://github.com/iliakan/detect-node/\r\nfunction isNode() {\r\n    var _a;\r\n    const forceEnvironment = (_a = getDefaults()) === null || _a === void 0 ? void 0 : _a.forceEnvironment;\r\n    if (forceEnvironment === 'node') {\r\n        return true;\r\n    }\r\n    else if (forceEnvironment === 'browser') {\r\n        return false;\r\n    }\r\n    try {\r\n        return (Object.prototype.toString.call(global.process) === '[object process]');\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Detect Browser Environment\r\n */\r\nfunction isBrowser() {\r\n    return typeof self === 'object' && self.self === self;\r\n}\r\nfunction isBrowserExtension() {\r\n    const runtime = typeof chrome === 'object'\r\n        ? chrome.runtime\r\n        : typeof browser === 'object'\r\n            ? browser.runtime\r\n            : undefined;\r\n    return typeof runtime === 'object' && runtime.id !== undefined;\r\n}\r\n/**\r\n * Detect React Native.\r\n *\r\n * @return true if ReactNative environment is detected.\r\n */\r\nfunction isReactNative() {\r\n    return (typeof navigator === 'object' && navigator['product'] === 'ReactNative');\r\n}\r\n/** Detects Electron apps. */\r\nfunction isElectron() {\r\n    return getUA().indexOf('Electron/') >= 0;\r\n}\r\n/** Detects Internet Explorer. */\r\nfunction isIE() {\r\n    const ua = getUA();\r\n    return ua.indexOf('MSIE ') >= 0 || ua.indexOf('Trident/') >= 0;\r\n}\r\n/** Detects Universal Windows Platform apps. */\r\nfunction isUWP() {\r\n    return getUA().indexOf('MSAppHost/') >= 0;\r\n}\r\n/**\r\n * Detect whether the current SDK build is the Node version.\r\n *\r\n * @return true if it's the Node SDK build.\r\n */\r\nfunction isNodeSdk() {\r\n    return CONSTANTS.NODE_CLIENT === true || CONSTANTS.NODE_ADMIN === true;\r\n}\r\n/** Returns true if we are running in Safari. */\r\nfunction isSafari() {\r\n    return (!isNode() &&\r\n        !!navigator.userAgent &&\r\n        navigator.userAgent.includes('Safari') &&\r\n        !navigator.userAgent.includes('Chrome'));\r\n}\r\n/**\r\n * This method checks if indexedDB is supported by current browser/service worker context\r\n * @return true if indexedDB is supported by current browser/service worker context\r\n */\r\nfunction isIndexedDBAvailable() {\r\n    try {\r\n        return typeof indexedDB === 'object';\r\n    }\r\n    catch (e) {\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * This method validates browser/sw context for indexedDB by opening a dummy indexedDB database and reject\r\n * if errors occur during the database open operation.\r\n *\r\n * @throws exception if current browser/sw context can't run idb.open (ex: Safari iframe, Firefox\r\n * private browsing)\r\n */\r\nfunction validateIndexedDBOpenable() {\r\n    return new Promise((resolve, reject) => {\r\n        try {\r\n            let preExist = true;\r\n            const DB_CHECK_NAME = 'validate-browser-context-for-indexeddb-analytics-module';\r\n            const request = self.indexedDB.open(DB_CHECK_NAME);\r\n            request.onsuccess = () => {\r\n                request.result.close();\r\n                // delete database only when it doesn't pre-exist\r\n                if (!preExist) {\r\n                    self.indexedDB.deleteDatabase(DB_CHECK_NAME);\r\n                }\r\n                resolve(true);\r\n            };\r\n            request.onupgradeneeded = () => {\r\n                preExist = false;\r\n            };\r\n            request.onerror = () => {\r\n                var _a;\r\n                reject(((_a = request.error) === null || _a === void 0 ? void 0 : _a.message) || '');\r\n            };\r\n        }\r\n        catch (error) {\r\n            reject(error);\r\n        }\r\n    });\r\n}\r\n/**\r\n *\r\n * This method checks whether cookie is enabled within current browser\r\n * @return true if cookie is enabled within current browser\r\n */\r\nfunction areCookiesEnabled() {\r\n    if (typeof navigator === 'undefined' || !navigator.cookieEnabled) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview Standardized Firebase Error.\r\n *\r\n * Usage:\r\n *\r\n *   // Typescript string literals for type-safe codes\r\n *   type Err =\r\n *     'unknown' |\r\n *     'object-not-found'\r\n *     ;\r\n *\r\n *   // Closure enum for type-safe error codes\r\n *   // at-enum {string}\r\n *   var Err = {\r\n *     UNKNOWN: 'unknown',\r\n *     OBJECT_NOT_FOUND: 'object-not-found',\r\n *   }\r\n *\r\n *   let errors: Map<Err, string> = {\r\n *     'generic-error': \"Unknown error\",\r\n *     'file-not-found': \"Could not find file: {$file}\",\r\n *   };\r\n *\r\n *   // Type-safe function - must pass a valid error code as param.\r\n *   let error = new ErrorFactory<Err>('service', 'Service', errors);\r\n *\r\n *   ...\r\n *   throw error.create(Err.GENERIC);\r\n *   ...\r\n *   throw error.create(Err.FILE_NOT_FOUND, {'file': fileName});\r\n *   ...\r\n *   // Service: Could not file file: foo.txt (service/file-not-found).\r\n *\r\n *   catch (e) {\r\n *     assert(e.message === \"Could not find file: foo.txt.\");\r\n *     if ((e as FirebaseError)?.code === 'service/file-not-found') {\r\n *       console.log(\"Could not read file: \" + e['file']);\r\n *     }\r\n *   }\r\n */\r\nconst ERROR_NAME = 'FirebaseError';\r\n// Based on code from:\r\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error#Custom_Error_Types\r\nclass FirebaseError extends Error {\r\n    constructor(\r\n    /** The error code for this error. */\r\n    code, message, \r\n    /** Custom data for this error. */\r\n    customData) {\r\n        super(message);\r\n        this.code = code;\r\n        this.customData = customData;\r\n        /** The custom name for all FirebaseErrors. */\r\n        this.name = ERROR_NAME;\r\n        // Fix For ES5\r\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\r\n        Object.setPrototypeOf(this, FirebaseError.prototype);\r\n        // Maintains proper stack trace for where our error was thrown.\r\n        // Only available on V8.\r\n        if (Error.captureStackTrace) {\r\n            Error.captureStackTrace(this, ErrorFactory.prototype.create);\r\n        }\r\n    }\r\n}\r\nclass ErrorFactory {\r\n    constructor(service, serviceName, errors) {\r\n        this.service = service;\r\n        this.serviceName = serviceName;\r\n        this.errors = errors;\r\n    }\r\n    create(code, ...data) {\r\n        const customData = data[0] || {};\r\n        const fullCode = `${this.service}/${code}`;\r\n        const template = this.errors[code];\r\n        const message = template ? replaceTemplate(template, customData) : 'Error';\r\n        // Service Name: Error message (service/code).\r\n        const fullMessage = `${this.serviceName}: ${message} (${fullCode}).`;\r\n        const error = new FirebaseError(fullCode, fullMessage, customData);\r\n        return error;\r\n    }\r\n}\r\nfunction replaceTemplate(template, data) {\r\n    return template.replace(PATTERN, (_, key) => {\r\n        const value = data[key];\r\n        return value != null ? String(value) : `<${key}?>`;\r\n    });\r\n}\r\nconst PATTERN = /\\{\\$([^}]+)}/g;\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Evaluates a JSON string into a javascript object.\r\n *\r\n * @param {string} str A string containing JSON.\r\n * @return {*} The javascript object representing the specified JSON.\r\n */\r\nfunction jsonEval(str) {\r\n    return JSON.parse(str);\r\n}\r\n/**\r\n * Returns JSON representing a javascript object.\r\n * @param {*} data Javascript object to be stringified.\r\n * @return {string} The JSON contents of the object.\r\n */\r\nfunction stringify(data) {\r\n    return JSON.stringify(data);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Decodes a Firebase auth. token into constituent parts.\r\n *\r\n * Notes:\r\n * - May return with invalid / incomplete claims if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst decode = function (token) {\r\n    let header = {}, claims = {}, data = {}, signature = '';\r\n    try {\r\n        const parts = token.split('.');\r\n        header = jsonEval(base64Decode(parts[0]) || '');\r\n        claims = jsonEval(base64Decode(parts[1]) || '');\r\n        signature = parts[2];\r\n        data = claims['d'] || {};\r\n        delete claims['d'];\r\n    }\r\n    catch (e) { }\r\n    return {\r\n        header,\r\n        claims,\r\n        data,\r\n        signature\r\n    };\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its time-based claims. Will return true if the\r\n * token is within the time window authorized by the 'nbf' (not-before) and 'iat' (issued-at) claims.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isValidTimestamp = function (token) {\r\n    const claims = decode(token).claims;\r\n    const now = Math.floor(new Date().getTime() / 1000);\r\n    let validSince = 0, validUntil = 0;\r\n    if (typeof claims === 'object') {\r\n        if (claims.hasOwnProperty('nbf')) {\r\n            validSince = claims['nbf'];\r\n        }\r\n        else if (claims.hasOwnProperty('iat')) {\r\n            validSince = claims['iat'];\r\n        }\r\n        if (claims.hasOwnProperty('exp')) {\r\n            validUntil = claims['exp'];\r\n        }\r\n        else {\r\n            // token will expire after 24h by default\r\n            validUntil = validSince + 86400;\r\n        }\r\n    }\r\n    return (!!now &&\r\n        !!validSince &&\r\n        !!validUntil &&\r\n        now >= validSince &&\r\n        now <= validUntil);\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and returns its issued at time if valid, null otherwise.\r\n *\r\n * Notes:\r\n * - May return null if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst issuedAtTime = function (token) {\r\n    const claims = decode(token).claims;\r\n    if (typeof claims === 'object' && claims.hasOwnProperty('iat')) {\r\n        return claims['iat'];\r\n    }\r\n    return null;\r\n};\r\n/**\r\n * Decodes a Firebase auth. token and checks the validity of its format. Expects a valid issued-at time.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isValidFormat = function (token) {\r\n    const decoded = decode(token), claims = decoded.claims;\r\n    return !!claims && typeof claims === 'object' && claims.hasOwnProperty('iat');\r\n};\r\n/**\r\n * Attempts to peer into an auth token and determine if it's an admin auth token by looking at the claims portion.\r\n *\r\n * Notes:\r\n * - May return a false negative if there's no native base64 decoding support.\r\n * - Doesn't check if the token is actually valid.\r\n */\r\nconst isAdmin = function (token) {\r\n    const claims = decode(token).claims;\r\n    return typeof claims === 'object' && claims['admin'] === true;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction contains(obj, key) {\r\n    return Object.prototype.hasOwnProperty.call(obj, key);\r\n}\r\nfunction safeGet(obj, key) {\r\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n        return obj[key];\r\n    }\r\n    else {\r\n        return undefined;\r\n    }\r\n}\r\nfunction isEmpty(obj) {\r\n    for (const key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction map(obj, fn, contextObj) {\r\n    const res = {};\r\n    for (const key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            res[key] = fn.call(contextObj, obj[key], key, obj);\r\n        }\r\n    }\r\n    return res;\r\n}\r\n/**\r\n * Deep equal two objects. Support Arrays and Objects.\r\n */\r\nfunction deepEqual(a, b) {\r\n    if (a === b) {\r\n        return true;\r\n    }\r\n    const aKeys = Object.keys(a);\r\n    const bKeys = Object.keys(b);\r\n    for (const k of aKeys) {\r\n        if (!bKeys.includes(k)) {\r\n            return false;\r\n        }\r\n        const aProp = a[k];\r\n        const bProp = b[k];\r\n        if (isObject(aProp) && isObject(bProp)) {\r\n            if (!deepEqual(aProp, bProp)) {\r\n                return false;\r\n            }\r\n        }\r\n        else if (aProp !== bProp) {\r\n            return false;\r\n        }\r\n    }\r\n    for (const k of bKeys) {\r\n        if (!aKeys.includes(k)) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\nfunction isObject(thing) {\r\n    return thing !== null && typeof thing === 'object';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Rejects if the given promise doesn't resolve in timeInMS milliseconds.\r\n * @internal\r\n */\r\nfunction promiseWithTimeout(promise, timeInMS = 2000) {\r\n    const deferredPromise = new Deferred();\r\n    setTimeout(() => deferredPromise.reject('timeout!'), timeInMS);\r\n    promise.then(deferredPromise.resolve, deferredPromise.reject);\r\n    return deferredPromise.promise;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Returns a querystring-formatted string (e.g. &arg=val&arg2=val2) from a\r\n * params object (e.g. {arg: 'val', arg2: 'val2'})\r\n * Note: You must prepend it with ? when adding it to a URL.\r\n */\r\nfunction querystring(querystringParams) {\r\n    const params = [];\r\n    for (const [key, value] of Object.entries(querystringParams)) {\r\n        if (Array.isArray(value)) {\r\n            value.forEach(arrayVal => {\r\n                params.push(encodeURIComponent(key) + '=' + encodeURIComponent(arrayVal));\r\n            });\r\n        }\r\n        else {\r\n            params.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\r\n        }\r\n    }\r\n    return params.length ? '&' + params.join('&') : '';\r\n}\r\n/**\r\n * Decodes a querystring (e.g. ?arg=val&arg2=val2) into a params object\r\n * (e.g. {arg: 'val', arg2: 'val2'})\r\n */\r\nfunction querystringDecode(querystring) {\r\n    const obj = {};\r\n    const tokens = querystring.replace(/^\\?/, '').split('&');\r\n    tokens.forEach(token => {\r\n        if (token) {\r\n            const [key, value] = token.split('=');\r\n            obj[decodeURIComponent(key)] = decodeURIComponent(value);\r\n        }\r\n    });\r\n    return obj;\r\n}\r\n/**\r\n * Extract the query string part of a URL, including the leading question mark (if present).\r\n */\r\nfunction extractQuerystring(url) {\r\n    const queryStart = url.indexOf('?');\r\n    if (!queryStart) {\r\n        return '';\r\n    }\r\n    const fragmentStart = url.indexOf('#', queryStart);\r\n    return url.substring(queryStart, fragmentStart > 0 ? fragmentStart : undefined);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * @fileoverview SHA-1 cryptographic hash.\r\n * Variable names follow the notation in FIPS PUB 180-3:\r\n * http://csrc.nist.gov/publications/fips/fips180-3/fips180-3_final.pdf.\r\n *\r\n * Usage:\r\n *   var sha1 = new sha1();\r\n *   sha1.update(bytes);\r\n *   var hash = sha1.digest();\r\n *\r\n * Performance:\r\n *   Chrome 23:   ~400 Mbit/s\r\n *   Firefox 16:  ~250 Mbit/s\r\n *\r\n */\r\n/**\r\n * SHA-1 cryptographic hash constructor.\r\n *\r\n * The properties declared here are discussed in the above algorithm document.\r\n * @constructor\r\n * @final\r\n * @struct\r\n */\r\nclass Sha1 {\r\n    constructor() {\r\n        /**\r\n         * Holds the previous values of accumulated variables a-e in the compress_\r\n         * function.\r\n         * @private\r\n         */\r\n        this.chain_ = [];\r\n        /**\r\n         * A buffer holding the partially computed hash result.\r\n         * @private\r\n         */\r\n        this.buf_ = [];\r\n        /**\r\n         * An array of 80 bytes, each a part of the message to be hashed.  Referred to\r\n         * as the message schedule in the docs.\r\n         * @private\r\n         */\r\n        this.W_ = [];\r\n        /**\r\n         * Contains data needed to pad messages less than 64 bytes.\r\n         * @private\r\n         */\r\n        this.pad_ = [];\r\n        /**\r\n         * @private {number}\r\n         */\r\n        this.inbuf_ = 0;\r\n        /**\r\n         * @private {number}\r\n         */\r\n        this.total_ = 0;\r\n        this.blockSize = 512 / 8;\r\n        this.pad_[0] = 128;\r\n        for (let i = 1; i < this.blockSize; ++i) {\r\n            this.pad_[i] = 0;\r\n        }\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        this.chain_[0] = 0x67452301;\r\n        this.chain_[1] = 0xefcdab89;\r\n        this.chain_[2] = 0x98badcfe;\r\n        this.chain_[3] = 0x10325476;\r\n        this.chain_[4] = 0xc3d2e1f0;\r\n        this.inbuf_ = 0;\r\n        this.total_ = 0;\r\n    }\r\n    /**\r\n     * Internal compress helper function.\r\n     * @param buf Block to compress.\r\n     * @param offset Offset of the block in the buffer.\r\n     * @private\r\n     */\r\n    compress_(buf, offset) {\r\n        if (!offset) {\r\n            offset = 0;\r\n        }\r\n        const W = this.W_;\r\n        // get 16 big endian words\r\n        if (typeof buf === 'string') {\r\n            for (let i = 0; i < 16; i++) {\r\n                // TODO(user): [bug 8140122] Recent versions of Safari for Mac OS and iOS\r\n                // have a bug that turns the post-increment ++ operator into pre-increment\r\n                // during JIT compilation.  We have code that depends heavily on SHA-1 for\r\n                // correctness and which is affected by this bug, so I've removed all uses\r\n                // of post-increment ++ in which the result value is used.  We can revert\r\n                // this change once the Safari bug\r\n                // (https://bugs.webkit.org/show_bug.cgi?id=109036) has been fixed and\r\n                // most clients have been updated.\r\n                W[i] =\r\n                    (buf.charCodeAt(offset) << 24) |\r\n                        (buf.charCodeAt(offset + 1) << 16) |\r\n                        (buf.charCodeAt(offset + 2) << 8) |\r\n                        buf.charCodeAt(offset + 3);\r\n                offset += 4;\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < 16; i++) {\r\n                W[i] =\r\n                    (buf[offset] << 24) |\r\n                        (buf[offset + 1] << 16) |\r\n                        (buf[offset + 2] << 8) |\r\n                        buf[offset + 3];\r\n                offset += 4;\r\n            }\r\n        }\r\n        // expand to 80 words\r\n        for (let i = 16; i < 80; i++) {\r\n            const t = W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16];\r\n            W[i] = ((t << 1) | (t >>> 31)) & 0xffffffff;\r\n        }\r\n        let a = this.chain_[0];\r\n        let b = this.chain_[1];\r\n        let c = this.chain_[2];\r\n        let d = this.chain_[3];\r\n        let e = this.chain_[4];\r\n        let f, k;\r\n        // TODO(user): Try to unroll this loop to speed up the computation.\r\n        for (let i = 0; i < 80; i++) {\r\n            if (i < 40) {\r\n                if (i < 20) {\r\n                    f = d ^ (b & (c ^ d));\r\n                    k = 0x5a827999;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0x6ed9eba1;\r\n                }\r\n            }\r\n            else {\r\n                if (i < 60) {\r\n                    f = (b & c) | (d & (b | c));\r\n                    k = 0x8f1bbcdc;\r\n                }\r\n                else {\r\n                    f = b ^ c ^ d;\r\n                    k = 0xca62c1d6;\r\n                }\r\n            }\r\n            const t = (((a << 5) | (a >>> 27)) + f + e + k + W[i]) & 0xffffffff;\r\n            e = d;\r\n            d = c;\r\n            c = ((b << 30) | (b >>> 2)) & 0xffffffff;\r\n            b = a;\r\n            a = t;\r\n        }\r\n        this.chain_[0] = (this.chain_[0] + a) & 0xffffffff;\r\n        this.chain_[1] = (this.chain_[1] + b) & 0xffffffff;\r\n        this.chain_[2] = (this.chain_[2] + c) & 0xffffffff;\r\n        this.chain_[3] = (this.chain_[3] + d) & 0xffffffff;\r\n        this.chain_[4] = (this.chain_[4] + e) & 0xffffffff;\r\n    }\r\n    update(bytes, length) {\r\n        // TODO(johnlenz): tighten the function signature and remove this check\r\n        if (bytes == null) {\r\n            return;\r\n        }\r\n        if (length === undefined) {\r\n            length = bytes.length;\r\n        }\r\n        const lengthMinusBlock = length - this.blockSize;\r\n        let n = 0;\r\n        // Using local instead of member variables gives ~5% speedup on Firefox 16.\r\n        const buf = this.buf_;\r\n        let inbuf = this.inbuf_;\r\n        // The outer while loop should execute at most twice.\r\n        while (n < length) {\r\n            // When we have no data in the block to top up, we can directly process the\r\n            // input buffer (assuming it contains sufficient data). This gives ~25%\r\n            // speedup on Chrome 23 and ~15% speedup on Firefox 16, but requires that\r\n            // the data is provided in large chunks (or in multiples of 64 bytes).\r\n            if (inbuf === 0) {\r\n                while (n <= lengthMinusBlock) {\r\n                    this.compress_(bytes, n);\r\n                    n += this.blockSize;\r\n                }\r\n            }\r\n            if (typeof bytes === 'string') {\r\n                while (n < length) {\r\n                    buf[inbuf] = bytes.charCodeAt(n);\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf === this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                while (n < length) {\r\n                    buf[inbuf] = bytes[n];\r\n                    ++inbuf;\r\n                    ++n;\r\n                    if (inbuf === this.blockSize) {\r\n                        this.compress_(buf);\r\n                        inbuf = 0;\r\n                        // Jump to the outer loop so we use the full-block optimization.\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.inbuf_ = inbuf;\r\n        this.total_ += length;\r\n    }\r\n    /** @override */\r\n    digest() {\r\n        const digest = [];\r\n        let totalBits = this.total_ * 8;\r\n        // Add pad 0x80 0x00*.\r\n        if (this.inbuf_ < 56) {\r\n            this.update(this.pad_, 56 - this.inbuf_);\r\n        }\r\n        else {\r\n            this.update(this.pad_, this.blockSize - (this.inbuf_ - 56));\r\n        }\r\n        // Add # bits.\r\n        for (let i = this.blockSize - 1; i >= 56; i--) {\r\n            this.buf_[i] = totalBits & 255;\r\n            totalBits /= 256; // Don't use bit-shifting here!\r\n        }\r\n        this.compress_(this.buf_);\r\n        let n = 0;\r\n        for (let i = 0; i < 5; i++) {\r\n            for (let j = 24; j >= 0; j -= 8) {\r\n                digest[n] = (this.chain_[i] >> j) & 255;\r\n                ++n;\r\n            }\r\n        }\r\n        return digest;\r\n    }\r\n}\n\n/**\r\n * Helper to make a Subscribe function (just like Promise helps make a\r\n * Thenable).\r\n *\r\n * @param executor Function which can make calls to a single Observer\r\n *     as a proxy.\r\n * @param onNoObservers Callback when count of Observers goes to zero.\r\n */\r\nfunction createSubscribe(executor, onNoObservers) {\r\n    const proxy = new ObserverProxy(executor, onNoObservers);\r\n    return proxy.subscribe.bind(proxy);\r\n}\r\n/**\r\n * Implement fan-out for any number of Observers attached via a subscribe\r\n * function.\r\n */\r\nclass ObserverProxy {\r\n    /**\r\n     * @param executor Function which can make calls to a single Observer\r\n     *     as a proxy.\r\n     * @param onNoObservers Callback when count of Observers goes to zero.\r\n     */\r\n    constructor(executor, onNoObservers) {\r\n        this.observers = [];\r\n        this.unsubscribes = [];\r\n        this.observerCount = 0;\r\n        // Micro-task scheduling by calling task.then().\r\n        this.task = Promise.resolve();\r\n        this.finalized = false;\r\n        this.onNoObservers = onNoObservers;\r\n        // Call the executor asynchronously so subscribers that are called\r\n        // synchronously after the creation of the subscribe function\r\n        // can still receive the very first value generated in the executor.\r\n        this.task\r\n            .then(() => {\r\n            executor(this);\r\n        })\r\n            .catch(e => {\r\n            this.error(e);\r\n        });\r\n    }\r\n    next(value) {\r\n        this.forEachObserver((observer) => {\r\n            observer.next(value);\r\n        });\r\n    }\r\n    error(error) {\r\n        this.forEachObserver((observer) => {\r\n            observer.error(error);\r\n        });\r\n        this.close(error);\r\n    }\r\n    complete() {\r\n        this.forEachObserver((observer) => {\r\n            observer.complete();\r\n        });\r\n        this.close();\r\n    }\r\n    /**\r\n     * Subscribe function that can be used to add an Observer to the fan-out list.\r\n     *\r\n     * - We require that no event is sent to a subscriber sychronously to their\r\n     *   call to subscribe().\r\n     */\r\n    subscribe(nextOrObserver, error, complete) {\r\n        let observer;\r\n        if (nextOrObserver === undefined &&\r\n            error === undefined &&\r\n            complete === undefined) {\r\n            throw new Error('Missing Observer.');\r\n        }\r\n        // Assemble an Observer object when passed as callback functions.\r\n        if (implementsAnyMethods(nextOrObserver, [\r\n            'next',\r\n            'error',\r\n            'complete'\r\n        ])) {\r\n            observer = nextOrObserver;\r\n        }\r\n        else {\r\n            observer = {\r\n                next: nextOrObserver,\r\n                error,\r\n                complete\r\n            };\r\n        }\r\n        if (observer.next === undefined) {\r\n            observer.next = noop;\r\n        }\r\n        if (observer.error === undefined) {\r\n            observer.error = noop;\r\n        }\r\n        if (observer.complete === undefined) {\r\n            observer.complete = noop;\r\n        }\r\n        const unsub = this.unsubscribeOne.bind(this, this.observers.length);\r\n        // Attempt to subscribe to a terminated Observable - we\r\n        // just respond to the Observer with the final error or complete\r\n        // event.\r\n        if (this.finalized) {\r\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n            this.task.then(() => {\r\n                try {\r\n                    if (this.finalError) {\r\n                        observer.error(this.finalError);\r\n                    }\r\n                    else {\r\n                        observer.complete();\r\n                    }\r\n                }\r\n                catch (e) {\r\n                    // nothing\r\n                }\r\n                return;\r\n            });\r\n        }\r\n        this.observers.push(observer);\r\n        return unsub;\r\n    }\r\n    // Unsubscribe is synchronous - we guarantee that no events are sent to\r\n    // any unsubscribed Observer.\r\n    unsubscribeOne(i) {\r\n        if (this.observers === undefined || this.observers[i] === undefined) {\r\n            return;\r\n        }\r\n        delete this.observers[i];\r\n        this.observerCount -= 1;\r\n        if (this.observerCount === 0 && this.onNoObservers !== undefined) {\r\n            this.onNoObservers(this);\r\n        }\r\n    }\r\n    forEachObserver(fn) {\r\n        if (this.finalized) {\r\n            // Already closed by previous event....just eat the additional values.\r\n            return;\r\n        }\r\n        // Since sendOne calls asynchronously - there is no chance that\r\n        // this.observers will become undefined.\r\n        for (let i = 0; i < this.observers.length; i++) {\r\n            this.sendOne(i, fn);\r\n        }\r\n    }\r\n    // Call the Observer via one of it's callback function. We are careful to\r\n    // confirm that the observe has not been unsubscribed since this asynchronous\r\n    // function had been queued.\r\n    sendOne(i, fn) {\r\n        // Execute the callback asynchronously\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.task.then(() => {\r\n            if (this.observers !== undefined && this.observers[i] !== undefined) {\r\n                try {\r\n                    fn(this.observers[i]);\r\n                }\r\n                catch (e) {\r\n                    // Ignore exceptions raised in Observers or missing methods of an\r\n                    // Observer.\r\n                    // Log error to console. b/31404806\r\n                    if (typeof console !== 'undefined' && console.error) {\r\n                        console.error(e);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    close(err) {\r\n        if (this.finalized) {\r\n            return;\r\n        }\r\n        this.finalized = true;\r\n        if (err !== undefined) {\r\n            this.finalError = err;\r\n        }\r\n        // Proxy is no longer needed - garbage collect references\r\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n        this.task.then(() => {\r\n            this.observers = undefined;\r\n            this.onNoObservers = undefined;\r\n        });\r\n    }\r\n}\r\n/** Turn synchronous function into one called asynchronously. */\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nfunction async(fn, onError) {\r\n    return (...args) => {\r\n        Promise.resolve(true)\r\n            .then(() => {\r\n            fn(...args);\r\n        })\r\n            .catch((error) => {\r\n            if (onError) {\r\n                onError(error);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Return true if the object passed in implements any of the named methods.\r\n */\r\nfunction implementsAnyMethods(obj, methods) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return false;\r\n    }\r\n    for (const method of methods) {\r\n        if (method in obj && typeof obj[method] === 'function') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction noop() {\r\n    // do nothing\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Check to make sure the appropriate number of arguments are provided for a public function.\r\n * Throws an error if it fails.\r\n *\r\n * @param fnName The function name\r\n * @param minCount The minimum number of arguments to allow for the function call\r\n * @param maxCount The maximum number of argument to allow for the function call\r\n * @param argCount The actual number of arguments provided.\r\n */\r\nconst validateArgCount = function (fnName, minCount, maxCount, argCount) {\r\n    let argError;\r\n    if (argCount < minCount) {\r\n        argError = 'at least ' + minCount;\r\n    }\r\n    else if (argCount > maxCount) {\r\n        argError = maxCount === 0 ? 'none' : 'no more than ' + maxCount;\r\n    }\r\n    if (argError) {\r\n        const error = fnName +\r\n            ' failed: Was called with ' +\r\n            argCount +\r\n            (argCount === 1 ? ' argument.' : ' arguments.') +\r\n            ' Expects ' +\r\n            argError +\r\n            '.';\r\n        throw new Error(error);\r\n    }\r\n};\r\n/**\r\n * Generates a string to prefix an error message about failed argument validation\r\n *\r\n * @param fnName The function name\r\n * @param argName The name of the argument\r\n * @return The prefix to add to the error thrown for validation.\r\n */\r\nfunction errorPrefix(fnName, argName) {\r\n    return `${fnName} failed: ${argName} argument `;\r\n}\r\n/**\r\n * @param fnName\r\n * @param argumentNumber\r\n * @param namespace\r\n * @param optional\r\n */\r\nfunction validateNamespace(fnName, namespace, optional) {\r\n    if (optional && !namespace) {\r\n        return;\r\n    }\r\n    if (typeof namespace !== 'string') {\r\n        //TODO: I should do more validation here. We only allow certain chars in namespaces.\r\n        throw new Error(errorPrefix(fnName, 'namespace') + 'must be a valid firebase namespace.');\r\n    }\r\n}\r\nfunction validateCallback(fnName, argumentName, \r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\ncallback, optional) {\r\n    if (optional && !callback) {\r\n        return;\r\n    }\r\n    if (typeof callback !== 'function') {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid function.');\r\n    }\r\n}\r\nfunction validateContextObject(fnName, argumentName, context, optional) {\r\n    if (optional && !context) {\r\n        return;\r\n    }\r\n    if (typeof context !== 'object' || context === null) {\r\n        throw new Error(errorPrefix(fnName, argumentName) + 'must be a valid context object.');\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Code originally came from goog.crypt.stringToUtf8ByteArray, but for some reason they\r\n// automatically replaced '\\r\\n' with '\\n', and they didn't handle surrogate pairs,\r\n// so it's been modified.\r\n// Note that not all Unicode characters appear as single characters in JavaScript strings.\r\n// fromCharCode returns the UTF-16 encoding of a character - so some Unicode characters\r\n// use 2 characters in Javascript.  All 4-byte UTF-8 characters begin with a first\r\n// character in the range 0xD800 - 0xDBFF (the first character of a so-called surrogate\r\n// pair).\r\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.3\r\n/**\r\n * @param {string} str\r\n * @return {Array}\r\n */\r\nconst stringToByteArray = function (str) {\r\n    const out = [];\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        let c = str.charCodeAt(i);\r\n        // Is this the lead surrogate in a surrogate pair?\r\n        if (c >= 0xd800 && c <= 0xdbff) {\r\n            const high = c - 0xd800; // the high 10 bits.\r\n            i++;\r\n            assert(i < str.length, 'Surrogate pair missing trail surrogate.');\r\n            const low = str.charCodeAt(i) - 0xdc00; // the low 10 bits.\r\n            c = 0x10000 + (high << 10) + low;\r\n        }\r\n        if (c < 128) {\r\n            out[p++] = c;\r\n        }\r\n        else if (c < 2048) {\r\n            out[p++] = (c >> 6) | 192;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else if (c < 65536) {\r\n            out[p++] = (c >> 12) | 224;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n        else {\r\n            out[p++] = (c >> 18) | 240;\r\n            out[p++] = ((c >> 12) & 63) | 128;\r\n            out[p++] = ((c >> 6) & 63) | 128;\r\n            out[p++] = (c & 63) | 128;\r\n        }\r\n    }\r\n    return out;\r\n};\r\n/**\r\n * Calculate length without actually converting; useful for doing cheaper validation.\r\n * @param {string} str\r\n * @return {number}\r\n */\r\nconst stringLength = function (str) {\r\n    let p = 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n        const c = str.charCodeAt(i);\r\n        if (c < 128) {\r\n            p++;\r\n        }\r\n        else if (c < 2048) {\r\n            p += 2;\r\n        }\r\n        else if (c >= 0xd800 && c <= 0xdbff) {\r\n            // Lead surrogate of a surrogate pair.  The pair together will take 4 bytes to represent.\r\n            p += 4;\r\n            i++; // skip trail surrogate.\r\n        }\r\n        else {\r\n            p += 3;\r\n        }\r\n    }\r\n    return p;\r\n};\n\n/**\r\n * @license\r\n * Copyright 2022 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Copied from https://stackoverflow.com/a/2117523\r\n * Generates a new uuid.\r\n * @public\r\n */\r\nconst uuidv4 = function () {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n        const r = (Math.random() * 16) | 0, v = c === 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n};\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The amount of milliseconds to exponentially increase.\r\n */\r\nconst DEFAULT_INTERVAL_MILLIS = 1000;\r\n/**\r\n * The factor to backoff by.\r\n * Should be a number greater than 1.\r\n */\r\nconst DEFAULT_BACKOFF_FACTOR = 2;\r\n/**\r\n * The maximum milliseconds to increase to.\r\n *\r\n * <p>Visible for testing\r\n */\r\nconst MAX_VALUE_MILLIS = 4 * 60 * 60 * 1000; // Four hours, like iOS and Android.\r\n/**\r\n * The percentage of backoff time to randomize by.\r\n * See\r\n * http://go/safe-client-behavior#step-1-determine-the-appropriate-retry-interval-to-handle-spike-traffic\r\n * for context.\r\n *\r\n * <p>Visible for testing\r\n */\r\nconst RANDOM_FACTOR = 0.5;\r\n/**\r\n * Based on the backoff method from\r\n * https://github.com/google/closure-library/blob/master/closure/goog/math/exponentialbackoff.js.\r\n * Extracted here so we don't need to pass metadata and a stateful ExponentialBackoff object around.\r\n */\r\nfunction calculateBackoffMillis(backoffCount, intervalMillis = DEFAULT_INTERVAL_MILLIS, backoffFactor = DEFAULT_BACKOFF_FACTOR) {\r\n    // Calculates an exponentially increasing value.\r\n    // Deviation: calculates value from count and a constant interval, so we only need to save value\r\n    // and count to restore state.\r\n    const currBaseValue = intervalMillis * Math.pow(backoffFactor, backoffCount);\r\n    // A random \"fuzz\" to avoid waves of retries.\r\n    // Deviation: randomFactor is required.\r\n    const randomWait = Math.round(\r\n    // A fraction of the backoff value to add/subtract.\r\n    // Deviation: changes multiplication order to improve readability.\r\n    RANDOM_FACTOR *\r\n        currBaseValue *\r\n        // A random float (rounded to int by Math.round above) in the range [-1, 1]. Determines\r\n        // if we add or subtract.\r\n        (Math.random() - 0.5) *\r\n        2);\r\n    // Limits backoff to max to avoid effectively permanent backoff.\r\n    return Math.min(MAX_VALUE_MILLIS, currBaseValue + randomWait);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Provide English ordinal letters after a number\r\n */\r\nfunction ordinal(i) {\r\n    if (!Number.isFinite(i)) {\r\n        return `${i}`;\r\n    }\r\n    return i + indicator(i);\r\n}\r\nfunction indicator(i) {\r\n    i = Math.abs(i);\r\n    const cent = i % 100;\r\n    if (cent >= 10 && cent <= 20) {\r\n        return 'th';\r\n    }\r\n    const dec = i % 10;\r\n    if (dec === 1) {\r\n        return 'st';\r\n    }\r\n    if (dec === 2) {\r\n        return 'nd';\r\n    }\r\n    if (dec === 3) {\r\n        return 'rd';\r\n    }\r\n    return 'th';\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction getModularInstance(service) {\r\n    if (service && service._delegate) {\r\n        return service._delegate;\r\n    }\r\n    else {\r\n        return service;\r\n    }\r\n}\n\nexport { CONSTANTS, DecodeBase64StringError, Deferred, ErrorFactory, FirebaseError, MAX_VALUE_MILLIS, RANDOM_FACTOR, Sha1, areCookiesEnabled, assert, assertionError, async, base64, base64Decode, base64Encode, base64urlEncodeWithoutPadding, calculateBackoffMillis, contains, createMockUserToken, createSubscribe, decode, deepCopy, deepEqual, deepExtend, errorPrefix, extractQuerystring, getDefaultAppConfig, getDefaultEmulatorHost, getDefaultEmulatorHostnameAndPort, getDefaults, getExperimentalSetting, getGlobal, getModularInstance, getUA, isAdmin, isBrowser, isBrowserExtension, isElectron, isEmpty, isIE, isIndexedDBAvailable, isMobileCordova, isNode, isNodeSdk, isReactNative, isSafari, isUWP, isValidFormat, isValidTimestamp, issuedAtTime, jsonEval, map, ordinal, promiseWithTimeout, querystring, querystringDecode, safeGet, stringLength, stringToByteArray, stringify, uuidv4, validateArgCount, validateCallback, validateContextObject, validateIndexedDBOpenable, validateNamespace };\n//# sourceMappingURL=index.esm2017.js.map\n","var e,t,n={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{},enableNavigationTracking:!0},r=window,i=r.console,a=r.navigator,o=r.performance,u=function(){return a.deviceMemory},c=function(){return a.hardwareConcurrency},s=\"mark.\",f=function(){return o&&!!o.getEntriesByType&&!!o.now&&!!o.mark},l=\"4g\",d=!1,v={},p={value:0},m={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},h={value:0},T={value:0},g={},y={isHidden:!1,didChange:!1},k=function(){y.isHidden=!1,document.hidden&&(y.isHidden=document.hidden,y.didChange=!0)},b=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){i.warn(\"Perfume.js:\",e)}return null},S=function(){return!!(c()&&c()<=4)||!!(u()&&u()<=4)},E=function(e,t){switch(e){case\"slow-2g\":case\"2g\":case\"3g\":return!0;default:return S()||t}},M=function(e){return parseFloat(e.toFixed(4))},w=function(e){return\"number\"!=typeof e?null:M(e/Math.pow(1024,2))},C=function(e,t,i,o,s){var f,v=function(){n.analyticsTracker&&(y.isHidden&&![\"CLS\",\"INP\"].includes(e)||n.analyticsTracker({attribution:o,metricName:e,data:t,navigatorInformation:a?{deviceMemory:u()||0,hardwareConcurrency:c()||0,serviceWorkerStatus:\"serviceWorker\"in a?a.serviceWorker.controller?\"controlled\":\"supported\":\"unsupported\",isLowEndDevice:S(),isLowEndExperience:E(l,d)}:{},rating:i,navigationType:s}))};[\"CLS\",\"INP\"].includes(e)?v():(f=v,\"requestIdleCallback\"in r?r.requestIdleCallback(f,{timeout:3e3}):f())},L=function(e){e.forEach((function(e){if(!(\"self\"!==e.name||e.startTime<p.value)){var t=e.duration-50;t>0&&(h.value+=t,T.value+=t)}}))};!function(e){e.instant=\"instant\",e.quick=\"quick\",e.moderate=\"moderate\",e.slow=\"slow\",e.unavoidable=\"unavoidable\"}(e||(e={}));var O,x,B,N,P,I=((t={})[e.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},t[e.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},t[e.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},t[e.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},t[e.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},t),D={RT:[100,200],TBT:[200,600],NTBT:[200,600]},F=function(e,t){return D[e]?t<=D[e][0]?\"good\":t<=D[e][1]?\"needsImprovement\":\"poor\":null},j=function(e,t,n){Object.keys(t).forEach((function(e){\"number\"==typeof t[e]&&(t[e]=M(t[e]))})),C(e,t,null,n||{})},q=function(e){var t=e.attribution,r=e.name,i=e.rating,a=e.value,o=e.navigationType;\"FCP\"===r&&(p.value=a),[\"FCP\",\"LCP\"].includes(r)&&!g[0]&&(g[0]=b(\"longtask\",L)),\"FID\"===r&&setTimeout((function(){y.didChange||(q({attribution:t,name:\"TBT\",rating:F(\"TBT\",h.value),value:h.value,navigationType:o}),j(\"dataConsumption\",m.value))}),1e4);var u=M(a);u<=n.maxTime&&u>=0&&C(r,u,i,t,o)},R=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0]},_=function(e){if(\"loading\"===document.readyState)return\"loading\";var t=R();if(t){if(e<t.domInteractive)return\"loading\";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return\"dom-interactive\";if(0===t.domComplete||e<t.domComplete)return\"dom-content-loaded\"}return\"complete\"},A=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,\"\")},H=function(e,t){var n=\"\";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?\"#\"+r.id:A(r)+(r.className&&r.className.length?\".\"+r.className.replace(/\\s+/g,\".\"):\"\");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+\">\"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},z=-1,W=function(){return z},V=function(e){addEventListener(\"pageshow\",(function(t){t.persisted&&(z=t.timeStamp,e(t))}),!0)},G=function(){var e=R();return e&&e.activationStart||0},J=function(e,t){var n=R(),r=\"navigate\";return W()>=0?r=\"back-forward-cache\":n&&(r=document.prerendering||G()>0?\"prerender\":document.wasDiscarded?\"restore\":n.type.replace(/_/g,\"-\")),{name:e,value:void 0===t?-1:t,rating:\"good\",delta:0,entries:[],id:\"v3-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},U=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},K=function(e,t){var n=function n(r){\"pagehide\"!==r.type&&\"hidden\"!==document.visibilityState||(e(r),t&&(removeEventListener(\"visibilitychange\",n,!0),removeEventListener(\"pagehide\",n,!0)))};addEventListener(\"visibilitychange\",n,!0),addEventListener(\"pagehide\",n,!0)},Q=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?\"poor\":e>t[0]?\"needs-improvement\":\"good\"}(t.value,n),e(t))}},X=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Y=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},Z=-1,$=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},ee=function(e){\"hidden\"===document.visibilityState&&Z>-1&&(Z=\"visibilitychange\"===e.type?e.timeStamp:0,ne())},te=function(){addEventListener(\"visibilitychange\",ee,!0),addEventListener(\"prerenderingchange\",ee,!0)},ne=function(){removeEventListener(\"visibilitychange\",ee,!0),removeEventListener(\"prerenderingchange\",ee,!0)},re=function(){return Z<0&&(Z=$(),te(),V((function(){setTimeout((function(){Z=$(),te()}),0)}))),{get firstHiddenTime(){return Z}}},ie=function(e,t){t=t||{},Y((function(){var n,r=[1800,3e3],i=re(),a=J(\"FCP\"),o=U(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-G(),0),a.entries.push(e),n(!0)))}))}));o&&(n=Q(e,a,r,t.reportAllChanges),V((function(i){a=J(\"FCP\"),n=Q(e,a,r,t.reportAllChanges),X((function(){a.value=performance.now()-i.timeStamp,n(!0)}))})))}))},ae={passive:!0,capture:!0},oe=new Date,ue=function(e,t){O||(O=t,x=e,B=new Date,fe(removeEventListener),ce())},ce=function(){if(x>=0&&x<B-oe){var e={entryType:\"first-input\",name:O.type,target:O.target,cancelable:O.cancelable,startTime:O.timeStamp,processingStart:O.timeStamp+x};N.forEach((function(t){t(e)})),N=[]}},se=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,t){var n=function(){ue(e,t),i()},r=function(){i()},i=function(){removeEventListener(\"pointerup\",n,ae),removeEventListener(\"pointercancel\",r,ae)};addEventListener(\"pointerup\",n,ae),addEventListener(\"pointercancel\",r,ae)}(t,e):ue(t,e)}},fe=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(t){return e(t,se,ae)}))},le=function(e,t){t=t||{},Y((function(){var n,r=[100,300],i=re(),a=J(\"FID\"),o=function(e){e.startTime<i.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},u=function(e){e.forEach(o)},c=U(\"first-input\",u);n=Q(e,a,r,t.reportAllChanges),c&&K((function(){u(c.takeRecords()),c.disconnect()}),!0),c&&V((function(){var i;a=J(\"FID\"),n=Q(e,a,r,t.reportAllChanges),N=[],x=-1,O=null,fe(addEventListener),i=o,N.push(i),ce()}))}))},de=0,ve=1/0,pe=0,me=function(e){e.forEach((function(e){e.interactionId&&(ve=Math.min(ve,e.interactionId),pe=Math.max(pe,e.interactionId),de=pe?(pe-ve)/7+1:0)}))},he=function(){return P?de:performance.interactionCount||0},Te=function(){\"interactionCount\"in performance||P||(P=U(\"event\",me,{type:\"event\",buffered:!0,durationThreshold:0}))},ge=0,ye=function(){return he()-ge},ke=[],be={},Se=function(e){var t=ke[ke.length-1],n=be[e.interactionId];if(n||ke.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};be[r.id]=r,ke.push(r)}ke.sort((function(e,t){return t.latency-e.latency})),ke.splice(10).forEach((function(e){delete be[e.id]}))}},Ee=function(e,t){!function(e,t){t=t||{},Y((function(){var n=[200,500];Te();var r,i=J(\"INP\"),a=function(e){e.forEach((function(e){e.interactionId&&Se(e),\"first-input\"===e.entryType&&!ke.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&Se(e)}));var t,n=(t=Math.min(ke.length-1,Math.floor(ye()/50)),ke[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},o=U(\"event\",a,{durationThreshold:t.durationThreshold||40});r=Q(e,i,n,t.reportAllChanges),o&&(o.observe({type:\"first-input\",buffered:!0}),K((function(){a(o.takeRecords()),i.value<0&&ye()>0&&(i.value=0,i.entries=[]),r(!0)})),V((function(){ke=[],ge=he(),i=J(\"INP\"),r=Q(e,i,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:H(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:_(t.startTime)}}else e.attribution={}}(t),e(t)}),t)},Me={},we=function e(t){document.prerendering?Y((function(){return e(t)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(t)}),!0):setTimeout(t,0)},Ce=function(e,t){t=t||{};var n=[800,1800],r=J(\"TTFB\"),i=Q(e,r,n,t.reportAllChanges);we((function(){var a=R();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-G(),0),r.entries=[a],i(!0),V((function(){r=J(\"TTFB\",0),(i=Q(e,r,n,t.reportAllChanges))(!0)}))}}))},Le=function(e){e.forEach((function(e){e.identifier&&q({attribution:{identifier:e.identifier},name:\"ET\",rating:null,value:e.startTime})}))},Oe=function(e){e.forEach((function(e){if(n.isResourceTiming&&j(\"resourceTiming\",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;m.value[e.initiatorType]+=t,m.value.total+=t}}))},xe=function(){!function(e,t){Ce((function(t){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(t),e(t)}),t)}((function(e){e.value>0&&q(e)}),n.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},Y((function(){var n,r=[.1,.25],i=J(\"CLS\"),a=-1,o=0,u=[],c=function(t){a>-1&&e(t)},s=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=u[0],r=u[u.length-1];o&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,u.push(e)):(o=e.value,u=[e]),o>i.value&&(i.value=o,i.entries=u,n())}}))},f=U(\"layout-shift\",s);f&&(n=Q(c,i,r,t.reportAllChanges),ie((function(e){a=e.value,i.value<0&&(i.value=0,n())})),K((function(){s(f.takeRecords()),n(!0)})),V((function(){o=0,a=-1,i=J(\"CLS\",0),n=Q(c,i,r,t.reportAllChanges),X((function(){return n()}))})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:H(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:_(t.startTime)})}}var r;e.attribution={}}(t),e(t)}),t)}((function(e){return q(e)}),n.reportOptions.cls),function(e,t){ie((function(t){!function(e){if(e.entries.length){var t=R(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:_(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:_(W())}}(t),e(t)}),t)}((function(e){return q(e)}),n.reportOptions.fcp),function(e,t){le((function(t){!function(e){var t=e.entries[0];e.attribution={eventTarget:H(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:_(t.startTime)}}(t),e(t)}),t)}((function(e){return q(e)}),n.reportOptions.fid),function(e,t){!function(e,t){t=t||{},Y((function(){var n,r=[2500,4e3],i=re(),a=J(\"LCP\"),o=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-G(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[t],n())}},u=U(\"largest-contentful-paint\",o);if(u){n=Q(e,a,r,t.reportAllChanges);var c=function(){Me[a.id]||(o(u.takeRecords()),u.disconnect(),Me[a.id]=!0,n(!0))};[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),K(c,!0),V((function(i){a=J(\"LCP\"),n=Q(e,a,r,t.reportAllChanges),X((function(){a.value=performance.now()-i.timeStamp,Me[a.id]=!0,n(!0)}))}))}}))}((function(t){!function(e){if(e.entries.length){var t=R();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType(\"resource\").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,i?(i.requestStart||i.startTime)-n:0),u=Math.max(o,i?i.responseEnd-n:0),c=Math.max(u,r?r.startTime-n:0),s={element:H(r.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:u-o,elementRenderDelay:c-u,navigationEntry:t,lcpEntry:r};return r.url&&(s.url=r.url),i&&(s.lcpResourceEntry=i),void(e.attribution=s)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(t),e(t)}),t)}((function(e){return q(e)}),n.reportOptions.lcp),Ee((function(e){return q(e)}),n.reportOptions.inp),n.isResourceTiming&&b(\"resource\",Oe),n.isElementTiming&&b(\"element\",Le)},Be=function(e){var t=\"usageDetails\"in e?e.usageDetails:{};j(\"storageEstimate\",{quota:w(e.quota),usage:w(e.usage),caches:w(t.caches),indexedDB:w(t.indexedDB),serviceWorker:w(t.serviceWorkerRegistrations)})},Ne={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Pe=function(e){delete Ne.active[e]},Ie=function(){Ne.startMarkToStepsMap={},Ne.finalMarkToStepsMap={},Ne.active={},Ne.navigationSteps={}},De=function(){return Ne.navigationSteps},Fe=function(e){var t;return null!==(t=De()[e])&&void 0!==t?t:{}},je=function(e,t,r){var i=\"step.\"+e,a=o.getEntriesByName(s+t).length>0;if(o.getEntriesByName(s+r).length>0&&n.steps){var u=I[n.steps[e].threshold],c=u.maxOutlierThreshold,f=u.vitalsThresholds;if(a){var l=o.measure(i,s+t,s+r),d=l.duration;if(d<=c){var v=function(e,t){return e<=t[0]?\"good\":e<=t[1]?\"needsImprovement\":\"poor\"}(d,f);d>=0&&(C(\"userJourneyStep\",d,v,{stepName:e},void 0),o.measure(\"step.\".concat(e,\"_vitals_\").concat(v),{start:l.startTime+l.duration,end:l.startTime+l.duration,detail:{type:\"stepVital\",duration:d}}))}}}},qe=function(){var e=De(),t=Ne.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=Fe(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var o=Fe(i-1);Object.keys(o).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},Re=function(){var e,t=Object.keys(Ne.navigationSteps).length;Ne.navigationSteps[t]={};var r=qe();null===(e=n.onMarkStep)||void 0===e||e.call(n,\"\",Object.keys(r))},_e=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{c(r.next(e))}catch(e){a(e)}}function u(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}c((r=r.apply(e,t||[])).next())}))},Ae=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError(\"Generator is already executing.\");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},He=function(e){var t,r,i,a,o,u,c;if(Ne.finalMarkToStepsMap[e]){!function(e){var t=Ne.navigationSteps,n=Ne.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=Fe(i);if(a&&n[e]){var o=n[e];o&&Object.keys(o).forEach((function(e){if(a[e]){var n=Fe(i)||{};n[e]=!1,t[i]=n}if(r>1){var o=i-1,u=Fe(o);u[e]&&(u[e]=!1,t[o]=u)}}))}}}(e);var s=Ne.finalMarkToStepsMap[e];Object.keys(s).forEach((function(t){var n=s[t];n.forEach(Pe),Promise.all(n.map((function(n){return _e(void 0,void 0,void 0,(function(){return Ae(this,(function(r){switch(r.label){case 0:return[4,je(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else i=e,a=Ne.navigationSteps,o=Object.keys(a).length,(c=Fe(u=(o>0?o:1)-1)||[])[i]=!0,a[u]=c,function(e){var t,n=null!==(t=Ne.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Ne.active[e]||(Ne.active[e]=!0)}))}(e);if(n.enableNavigationTracking){var f=qe();null===(t=n.onMarkStep)||void 0===t||t.call(n,e,Object.keys(f))}else null===(r=n.onMarkStep)||void 0===r||r.call(n,e,Object.keys(Ne.active))},ze=function(e){o.mark(s+e),He(e)},We=function(e){0===o.getEntriesByName(s+e).length&&(o.mark(s+e),He(e))},Ve=0,Ge=function(){function e(e){if(void 0===e&&(e={}),this.v=\"9.0.0-rc.3\",n.analyticsTracker=e.analyticsTracker,n.isResourceTiming=!!e.resourceTiming,n.isElementTiming=!!e.elementTiming,n.maxTime=e.maxMeasureTime||n.maxTime,n.reportOptions=e.reportOptions||n.reportOptions,n.steps=e.steps,n.onMarkStep=e.onMarkStep,n.enableNavigationTracking=e.enableNavigationTracking,f()){\"PerformanceObserver\"in r&&xe(),void 0!==document.hidden&&document.addEventListener(\"visibilitychange\",k);var t=function(){if(!f())return{};var e=o.getEntriesByType(\"navigation\")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();j(\"navigationTiming\",t),t.redirectTime&&q({attribution:{},name:\"RT\",rating:F(\"RT\",t.redirectTime),value:t.redirectTime}),j(\"networkInformation\",function(){if(\"connection\"in a){var e=a.connection;return\"object\"!=typeof e?{}:(l=e.effectiveType,d=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),a&&a.storage&&\"function\"==typeof a.storage.estimate&&a.storage.estimate().then(Be),n.steps&&n.steps&&(Ie(),Object.entries(n.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],o=i[1],u=null!==(n=Ne.startMarkToStepsMap[a])&&void 0!==n?n:{};if(u[r]=!0,Ne.startMarkToStepsMap[a]=u,Ne.finalMarkToStepsMap[o]){var c=Ne.finalMarkToStepsMap[o][a]||[];c.push(r),Ne.finalMarkToStepsMap[o][a]=c}else Ne.finalMarkToStepsMap[o]=((t={})[a]=[r],t)})))}}return e.prototype.start=function(e){f()&&!v[e]&&(v[e]=!0,o.mark(\"mark_\".concat(e,\"_start\")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),f()&&v[e]){o.mark(\"mark_\".concat(e,\"_end\")),delete v[e];var r=function(e){o.measure(e,\"mark_\".concat(e,\"_start\"),\"mark_\".concat(e,\"_end\"));var t=o.getEntriesByName(e).pop();return t&&\"measure\"===t.entryType?t.duration:-1}(e);n&&j(e,M(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete v[e],o.clearMarks&&(o.clearMarks(\"mark_\".concat(e,\"_start\")),o.clearMarks(\"mark_\".concat(e,\"_end\")))},e.prototype.markNTBT=function(){var e=this;this.start(\"ntbt\"),T.value=0,clearTimeout(Ve),Ve=setTimeout((function(){e.end(\"ntbt\",{},!1),q({attribution:{},name:\"NTBT\",rating:F(\"NTBT\",T.value),value:T.value}),T.value=0}),2e3)},e}();export{Ge as Perfume,Re as incrementUjNavigation,ze as markStep,We as markStepOnce};\n//# sourceMappingURL=perfume.esm.min.js.map\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/////////////////////////////////////////////////////////////////////////////////\n/* UAParser.js v1.0.35\n   Copyright © 2012-2021 Faisal Salman <f@faisalman.com>\n   MIT License *//*\n   Detect Browser, Engine, OS, CPU, and Device type/model from User-Agent data.\n   Supports browser & node.js environment. \n   Demo   : https://faisalman.github.io/ua-parser-js\n   Source : https://github.com/faisalman/ua-parser-js */\n/////////////////////////////////////////////////////////////////////////////////\n\n(function (window, undefined) {\n\n    'use strict';\n\n    //////////////\n    // Constants\n    /////////////\n\n\n    var LIBVERSION  = '1.0.35',\n        EMPTY       = '',\n        UNKNOWN     = '?',\n        FUNC_TYPE   = 'function',\n        UNDEF_TYPE  = 'undefined',\n        OBJ_TYPE    = 'object',\n        STR_TYPE    = 'string',\n        MAJOR       = 'major',\n        MODEL       = 'model',\n        NAME        = 'name',\n        TYPE        = 'type',\n        VENDOR      = 'vendor',\n        VERSION     = 'version',\n        ARCHITECTURE= 'architecture',\n        CONSOLE     = 'console',\n        MOBILE      = 'mobile',\n        TABLET      = 'tablet',\n        SMARTTV     = 'smarttv',\n        WEARABLE    = 'wearable',\n        EMBEDDED    = 'embedded',\n        UA_MAX_LENGTH = 350;\n\n    var AMAZON  = 'Amazon',\n        APPLE   = 'Apple',\n        ASUS    = 'ASUS',\n        BLACKBERRY = 'BlackBerry',\n        BROWSER = 'Browser',\n        CHROME  = 'Chrome',\n        EDGE    = 'Edge',\n        FIREFOX = 'Firefox',\n        GOOGLE  = 'Google',\n        HUAWEI  = 'Huawei',\n        LG      = 'LG',\n        MICROSOFT = 'Microsoft',\n        MOTOROLA  = 'Motorola',\n        OPERA   = 'Opera',\n        SAMSUNG = 'Samsung',\n        SHARP   = 'Sharp',\n        SONY    = 'Sony',\n        VIERA   = 'Viera',\n        XIAOMI  = 'Xiaomi',\n        ZEBRA   = 'Zebra',\n        FACEBOOK    = 'Facebook',\n        CHROMIUM_OS = 'Chromium OS',\n        MAC_OS  = 'Mac OS';\n\n    ///////////\n    // Helper\n    //////////\n\n    var extend = function (regexes, extensions) {\n            var mergedRegexes = {};\n            for (var i in regexes) {\n                if (extensions[i] && extensions[i].length % 2 === 0) {\n                    mergedRegexes[i] = extensions[i].concat(regexes[i]);\n                } else {\n                    mergedRegexes[i] = regexes[i];\n                }\n            }\n            return mergedRegexes;\n        },\n        enumerize = function (arr) {\n            var enums = {};\n            for (var i=0; i<arr.length; i++) {\n                enums[arr[i].toUpperCase()] = arr[i];\n            }\n            return enums;\n        },\n        has = function (str1, str2) {\n            return typeof str1 === STR_TYPE ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n        },\n        lowerize = function (str) {\n            return str.toLowerCase();\n        },\n        majorize = function (version) {\n            return typeof(version) === STR_TYPE ? version.replace(/[^\\d\\.]/g, EMPTY).split('.')[0] : undefined;\n        },\n        trim = function (str, len) {\n            if (typeof(str) === STR_TYPE) {\n                str = str.replace(/^\\s\\s*/, EMPTY);\n                return typeof(len) === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n            }\n    };\n\n    ///////////////\n    // Map helper\n    //////////////\n\n    var rgxMapper = function (ua, arrays) {\n\n            var i = 0, j, k, p, q, matches, match;\n\n            // loop through all regexes maps\n            while (i < arrays.length && !matches) {\n\n                var regex = arrays[i],       // even sequence (0,2,4,..)\n                    props = arrays[i + 1];   // odd sequence (1,3,5,..)\n                j = k = 0;\n\n                // try matching uastring with regexes\n                while (j < regex.length && !matches) {\n\n                    if (!regex[j]) { break; }\n                    matches = regex[j++].exec(ua);\n\n                    if (!!matches) {\n                        for (p = 0; p < props.length; p++) {\n                            match = matches[++k];\n                            q = props[p];\n                            // check if given property is actually array\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\n                                if (q.length === 2) {\n                                    if (typeof q[1] == FUNC_TYPE) {\n                                        // assign modified match\n                                        this[q[0]] = q[1].call(this, match);\n                                    } else {\n                                        // assign given value, ignore regex match\n                                        this[q[0]] = q[1];\n                                    }\n                                } else if (q.length === 3) {\n                                    // check whether function or regex\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                                        // call function (usually string mapper)\n                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\n                                    } else {\n                                        // sanitize match using given regex\n                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\n                                    }\n                                } else if (q.length === 4) {\n                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\n                                }\n                            } else {\n                                this[q] = match ? match : undefined;\n                            }\n                        }\n                    }\n                }\n                i += 2;\n            }\n        },\n\n        strMapper = function (str, map) {\n\n            for (var i in map) {\n                // check if current value is array\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n                    for (var j = 0; j < map[i].length; j++) {\n                        if (has(map[i][j], str)) {\n                            return (i === UNKNOWN) ? undefined : i;\n                        }\n                    }\n                } else if (has(map[i], str)) {\n                    return (i === UNKNOWN) ? undefined : i;\n                }\n            }\n            return str;\n    };\n\n    ///////////////\n    // String map\n    //////////////\n\n    // Safari < 3.0\n    var oldSafariMap = {\n            '1.0'   : '/8',\n            '1.2'   : '/1',\n            '1.3'   : '/3',\n            '2.0'   : '/412',\n            '2.0.2' : '/416',\n            '2.0.3' : '/417',\n            '2.0.4' : '/419',\n            '?'     : '/'\n        },\n        windowsVersionMap = {\n            'ME'        : '4.90',\n            'NT 3.11'   : 'NT3.51',\n            'NT 4.0'    : 'NT4.0',\n            '2000'      : 'NT 5.0',\n            'XP'        : ['NT 5.1', 'NT 5.2'],\n            'Vista'     : 'NT 6.0',\n            '7'         : 'NT 6.1',\n            '8'         : 'NT 6.2',\n            '8.1'       : 'NT 6.3',\n            '10'        : ['NT 6.4', 'NT 10.0'],\n            'RT'        : 'ARM'\n    };\n\n    //////////////\n    // Regex map\n    /////////////\n\n    var regexes = {\n\n        browser : [[\n\n            /\\b(?:crmo|crios)\\/([\\w\\.]+)/i                                      // Chrome for Android/iOS\n            ], [VERSION, [NAME, 'Chrome']], [\n            /edg(?:e|ios|a)?\\/([\\w\\.]+)/i                                       // Microsoft Edge\n            ], [VERSION, [NAME, 'Edge']], [\n\n            // Presto based\n            /(opera mini)\\/([-\\w\\.]+)/i,                                        // Opera Mini\n            /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,                 // Opera Mobi/Tablet\n            /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i                           // Opera\n            ], [NAME, VERSION], [\n            /opios[\\/ ]+([\\w\\.]+)/i                                             // Opera mini on iphone >= 8.0\n            ], [VERSION, [NAME, OPERA+' Mini']], [\n            /\\bopr\\/([\\w\\.]+)/i                                                 // Opera Webkit\n            ], [VERSION, [NAME, OPERA]], [\n\n            // Mixed\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,      // Lunascape/Maxthon/Netfront/Jasmine/Blazer\n            // Trident based\n            /(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,               // Avant/IEMobile/SlimBrowser\n            /(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,                                  // Baidu Browser\n            /(?:ms|\\()(ie) ([\\w\\.]+)/i,                                         // Internet Explorer\n\n            // Webkit/KHTML based                                               // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon\n            /(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,\n                                                                                // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ, aka ShouQ\n            /(heytap|ovi)browser\\/([\\d\\.]+)/i,                                  // Heytap/Ovi\n            /(weibo)__([\\d\\.]+)/i                                               // Weibo\n            ], [NAME, VERSION], [\n            /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i                 // UCBrowser\n            ], [VERSION, [NAME, 'UC'+BROWSER]], [\n            /microm.+\\bqbcore\\/([\\w\\.]+)/i,                                     // WeChat Desktop for Windows Built-in Browser\n            /\\bqbcore\\/([\\w\\.]+).+microm/i\n            ], [VERSION, [NAME, 'WeChat(Win) Desktop']], [\n            /micromessenger\\/([\\w\\.]+)/i                                        // WeChat\n            ], [VERSION, [NAME, 'WeChat']], [\n            /konqueror\\/([\\w\\.]+)/i                                             // Konqueror\n            ], [VERSION, [NAME, 'Konqueror']], [\n            /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i                       // IE11\n            ], [VERSION, [NAME, 'IE']], [\n            /ya(?:search)?browser\\/([\\w\\.]+)/i                                  // Yandex\n            ], [VERSION, [NAME, 'Yandex']], [\n            /(avast|avg)\\/([\\w\\.]+)/i                                           // Avast/AVG Secure Browser\n            ], [[NAME, /(.+)/, '$1 Secure '+BROWSER], VERSION], [\n            /\\bfocus\\/([\\w\\.]+)/i                                               // Firefox Focus\n            ], [VERSION, [NAME, FIREFOX+' Focus']], [\n            /\\bopt\\/([\\w\\.]+)/i                                                 // Opera Touch\n            ], [VERSION, [NAME, OPERA+' Touch']], [\n            /coc_coc\\w+\\/([\\w\\.]+)/i                                            // Coc Coc Browser\n            ], [VERSION, [NAME, 'Coc Coc']], [\n            /dolfin\\/([\\w\\.]+)/i                                                // Dolphin\n            ], [VERSION, [NAME, 'Dolphin']], [\n            /coast\\/([\\w\\.]+)/i                                                 // Opera Coast\n            ], [VERSION, [NAME, OPERA+' Coast']], [\n            /miuibrowser\\/([\\w\\.]+)/i                                           // MIUI Browser\n            ], [VERSION, [NAME, 'MIUI '+BROWSER]], [\n            /fxios\\/([-\\w\\.]+)/i                                                // Firefox for iOS\n            ], [VERSION, [NAME, FIREFOX]], [\n            /\\bqihu|(qi?ho?o?|360)browser/i                                     // 360\n            ], [[NAME, '360 '+BROWSER]], [\n            /(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i\n            ], [[NAME, /(.+)/, '$1 '+BROWSER], VERSION], [                      // Oculus/Samsung/Sailfish/Huawei Browser\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\n            ], [[NAME, /_/g, ' '], VERSION], [\n            /(electron)\\/([\\w\\.]+) safari/i,                                    // Electron-based App\n            /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,                   // Tesla\n            /m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i            // QQBrowser/Baidu App/2345 Browser\n            ], [NAME, VERSION], [\n            /(metasr)[\\/ ]?([\\w\\.]+)/i,                                         // SouGouBrowser\n            /(lbbrowser)/i,                                                     // LieBao Browser\n            /\\[(linkedin)app\\]/i                                                // LinkedIn App for iOS & Android\n            ], [NAME], [\n\n            // WebView\n            /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i       // Facebook App for iOS & Android\n            ], [[NAME, FACEBOOK], VERSION], [\n            /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,                             // Kakao App\n            /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,                                  // Naver InApp\n            /safari (line)\\/([\\w\\.]+)/i,                                        // Line App for iOS\n            /\\b(line)\\/([\\w\\.]+)\\/iab/i,                                        // Line App for Android\n            /(chromium|instagram)[\\/ ]([-\\w\\.]+)/i                              // Chromium/Instagram\n            ], [NAME, VERSION], [\n            /\\bgsa\\/([\\w\\.]+) .*safari\\//i                                      // Google Search Appliance on iOS\n            ], [VERSION, [NAME, 'GSA']], [\n            /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i                        // TikTok\n            ], [VERSION, [NAME, 'TikTok']], [\n\n            /headlesschrome(?:\\/([\\w\\.]+)| )/i                                  // Chrome Headless\n            ], [VERSION, [NAME, CHROME+' Headless']], [\n\n            / wv\\).+(chrome)\\/([\\w\\.]+)/i                                       // Chrome WebView\n            ], [[NAME, CHROME+' WebView'], VERSION], [\n\n            /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i           // Android Browser\n            ], [VERSION, [NAME, 'Android '+BROWSER]], [\n\n            /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i       // Chrome/OmniWeb/Arora/Tizen/Nokia\n            ], [NAME, VERSION], [\n\n            /version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i                      // Mobile Safari\n            ], [VERSION, [NAME, 'Mobile Safari']], [\n            /version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i                // Safari & Safari Mobile\n            ], [VERSION, NAME], [\n            /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i                      // Safari < 3.0\n            ], [NAME, [VERSION, strMapper, oldSafariMap]], [\n\n            /(webkit|khtml)\\/([\\w\\.]+)/i\n            ], [NAME, VERSION], [\n\n            // Gecko based\n            /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i                              // Netscape\n            ], [[NAME, 'Netscape'], VERSION], [\n            /mobile vr; rv:([\\w\\.]+)\\).+firefox/i                               // Firefox Reality\n            ], [VERSION, [NAME, FIREFOX+' Reality']], [\n            /ekiohf.+(flow)\\/([\\w\\.]+)/i,                                       // Flow\n            /(swiftfox)/i,                                                      // Swiftfox\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror/Klar\n            /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n            /(firefox)\\/([\\w\\.]+)/i,                                            // Other Firefox-based\n            /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,                         // Mozilla\n\n            // Other\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir/Obigo/Mosaic/Go/ICE/UP.Browser\n            /(links) \\(([\\w\\.]+)/i,                                             // Links\n            /panasonic;(viera)/i                                                // Panasonic Viera\n            ], [NAME, VERSION], [\n            \n            /(cobalt)\\/([\\w\\.]+)/i                                              // Cobalt\n            ], [NAME, [VERSION, /master.|lts./, \"\"]]\n        ],\n\n        cpu : [[\n\n            /(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i                     // AMD64 (x64)\n            ], [[ARCHITECTURE, 'amd64']], [\n\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\n            ], [[ARCHITECTURE, lowerize]], [\n\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32 (x86)\n            ], [[ARCHITECTURE, 'ia32']], [\n\n            /\\b(aarch64|arm(v?8e?l?|_?64))\\b/i                                 // ARM64\n            ], [[ARCHITECTURE, 'arm64']], [\n\n            /\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i                                   // ARMHF\n            ], [[ARCHITECTURE, 'armhf']], [\n\n            // PocketPC mistakenly identified as PowerPC\n            /windows (ce|mobile); ppc;/i\n            ], [[ARCHITECTURE, 'arm']], [\n\n            /((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i                            // PowerPC\n            ], [[ARCHITECTURE, /ower/, EMPTY, lowerize]], [\n\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\n            ], [[ARCHITECTURE, 'sparc']], [\n\n            /((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n            ], [[ARCHITECTURE, lowerize]]\n        ],\n\n        device : [[\n\n            //////////////////////////\n            // MOBILES & TABLETS\n            /////////////////////////\n\n            // Samsung\n            /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]], [\n            /\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n            /samsung[- ]([-\\w]+)/i,\n            /sec-(sgh\\w+)/i\n            ], [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]], [\n\n            // Apple\n            /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i                          // iPod/iPhone\n            ], [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]], [\n            /\\((ipad);[-\\w\\),; ]+apple/i,                                       // iPad\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n            /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n            ], [MODEL, [VENDOR, APPLE], [TYPE, TABLET]], [\n            /(macintosh);/i\n            ], [MODEL, [VENDOR, APPLE]], [\n\n            // Sharp\n            /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n            ], [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]], [\n\n            // Huawei\n            /\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]], [\n            /(?:huawei|honor)([-\\w ]+)[;\\)]/i,\n            /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n            ], [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]], [\n\n            // Xiaomi\n            /\\b(poco[\\w ]+)(?: bui|\\))/i,                                       // Xiaomi POCO\n            /\\b; (\\w+) build\\/hm\\1/i,                                           // Xiaomi Hongmi 'numeric' models\n            /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,                             // Xiaomi Hongmi\n            /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,                   // Xiaomi Redmi\n            /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i // Xiaomi Mi\n            ], [[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, MOBILE]], [\n            /\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i                        // Mi Pad tablets\n            ],[[MODEL, /_/g, ' '], [VENDOR, XIAOMI], [TYPE, TABLET]], [\n\n            // OPPO\n            /; (\\w+) bui.+ oppo/i,\n            /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\n\n            // Vivo\n            /vivo (\\w+)(?: bui|\\))/i,\n            /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n            ], [MODEL, [VENDOR, 'Vivo'], [TYPE, MOBILE]], [\n\n            // Realme\n            /\\b(rmx[12]\\d{3})(?: bui|;|\\))/i\n            ], [MODEL, [VENDOR, 'Realme'], [TYPE, MOBILE]], [\n\n            // Motorola\n            /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n            /\\bmot(?:orola)?[- ](\\w*)/i,\n            /((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]], [\n            /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n            ], [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]], [\n\n            // LG\n            /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n            ], [MODEL, [VENDOR, LG], [TYPE, TABLET]], [\n            /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n            /\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,\n            /\\blg-?([\\d\\w]+) bui/i\n            ], [MODEL, [VENDOR, LG], [TYPE, MOBILE]], [\n\n            // Lenovo\n            /(ideatab[-\\w ]+)/i,\n            /lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\n\n            // Nokia\n            /(?:maemo|nokia).*(n900|lumia \\d+)/i,\n            /nokia[-_ ]?([-\\w\\.]*)/i\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Nokia'], [TYPE, MOBILE]], [\n\n            // Google\n            /(pixel c)\\b/i                                                      // Google Pixel C\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]], [\n            /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i                         // Google Pixel\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]], [\n\n            // Sony\n            /droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n            ], [MODEL, [VENDOR, SONY], [TYPE, MOBILE]], [\n            /sony tablet [ps]/i,\n            /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n            ], [[MODEL, 'Xperia Tablet'], [VENDOR, SONY], [TYPE, TABLET]], [\n\n            // OnePlus\n            / (kb2005|in20[12]5|be20[12][59])\\b/i,\n            /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [\n\n            // Amazon\n            /(alexa)webm/i,\n            /(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,                             // Kindle Fire without Silk / Echo Show\n            /(kf[a-z]+)( bui|\\)).+silk\\//i                                      // Kindle Fire HD\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]], [\n            /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i                     // Fire Phone\n            ], [[MODEL, /(.+)/g, 'Fire Phone $1'], [VENDOR, AMAZON], [TYPE, MOBILE]], [\n\n            // BlackBerry\n            /(playbook);[-\\w\\),; ]+(rim)/i                                      // BlackBerry PlayBook\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\n            /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n            /\\(bb10; (\\w+)/i                                                    // BlackBerry 10\n            ], [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]], [\n\n            // Asus\n            /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, TABLET]], [\n            / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n            ], [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]], [\n\n            // HTC\n            /(nexus 9)/i                                                        // HTC Nexus 9\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\n            /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,                         // HTC\n\n            // ZTE\n            /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n            /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i         // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\n\n            // Acer\n            /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\n\n            // Meizu\n            /droid.+; (m[1-5] note) bui/i,\n            /\\bmz-([-\\w]{2,})/i\n            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [\n\n            // MIXED\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,\n                                                                                // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron\n            /(hp) ([\\w ]+\\w)/i,                                                 // HP iPAQ\n            /(asus)-?(\\w+)/i,                                                   // Asus\n            /(microsoft); (lumia[\\w ]+)/i,                                      // Microsoft Lumia\n            /(lenovo)[-_ ]?([-\\w]+)/i,                                          // Lenovo\n            /(jolla)/i,                                                         // Jolla\n            /(oppo) ?([\\w ]+) bui/i                                             // OPPO\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n\n            /(kobo)\\s(ereader|touch)/i,                                         // Kobo\n            /(archos) (gamepad2?)/i,                                            // Archos\n            /(hp).+(touchpad(?!.+tablet)|tablet)/i,                             // HP TouchPad\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\n            /(nook)[\\w ]+build\\/(\\w+)/i,                                        // Nook\n            /(dell) (strea[kpr\\d ]*[\\dko])/i,                                   // Dell Streak\n            /(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,                                  // Le Pan Tablets\n            /(trinity)[- ]*(t\\d{3}) bui/i,                                      // Trinity Tablets\n            /(gigaset)[- ]+(q\\w{1,9}) bui/i,                                    // Gigaset Tablets\n            /(vodafone) ([\\w ]+)(?:\\)| bui)/i                                   // Vodafone\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\n\n            /(surface duo)/i                                                    // Surface Duo\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]], [\n            /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i                                 // Fairphone\n            ], [MODEL, [VENDOR, 'Fairphone'], [TYPE, MOBILE]], [\n            /(u304aa)/i                                                         // AT&T\n            ], [MODEL, [VENDOR, 'AT&T'], [TYPE, MOBILE]], [\n            /\\bsie-(\\w*)/i                                                      // Siemens\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\n            /\\b(rct\\w+) b/i                                                     // RCA Tablets\n            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [\n            /\\b(venue[\\d ]{2,7}) b/i                                            // Dell Venue Tablets\n            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [\n            /\\b(q(?:mv|ta)\\w+) b/i                                              // Verizon Tablet\n            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [\n            /\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i                       // Barnes & Noble Tablet\n            ], [MODEL, [VENDOR, 'Barnes & Noble'], [TYPE, TABLET]], [\n            /\\b(tm\\d{3}\\w+) b/i\n            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [\n            /\\b(k88) b/i                                                        // ZTE K Series Tablet\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [\n            /\\b(nx\\d{3}j) b/i                                                   // ZTE Nubia\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\n            /\\b(gen\\d{3}) b.+49h/i                                              // Swiss GEN Mobile\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [\n            /\\b(zur\\d{3}) b/i                                                   // Swiss ZUR Tablet\n            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [\n            /\\b((zeki)?tb.*\\b) b/i                                              // Zeki Tablets\n            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [\n            /\\b([yr]\\d{2}) b/i,\n            /\\b(dragon[- ]+touch |dt)(\\w{5}) b/i                                // Dragon Touch Tablet\n            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [\n            /\\b(ns-?\\w{0,9}) b/i                                                // Insignia Tablets\n            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [\n            /\\b((nxa|next)-?\\w{0,9}) b/i                                        // NextBook Tablets\n            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [\n            /\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i                  // Voice Xtreme Phones\n            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [\n            /\\b(lvtel\\-)?(v1[12]) b/i                                           // LvTel Phones\n            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [\n            /\\b(ph-1) /i                                                        // Essential PH-1\n            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [\n            /\\b(v(100md|700na|7011|917g).*\\b) b/i                               // Envizen Tablets\n            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [\n            /\\b(trio[-\\w\\. ]+) b/i                                              // MachSpeed Tablets\n            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [\n            /\\btu_(1491) b/i                                                    // Rotor Tablets\n            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [\n            /(shield[\\w ]+) b/i                                                 // Nvidia Shield Tablets\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, TABLET]], [\n            /(sprint) (\\w+)/i                                                   // Sprint Phones\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\n            ], [[MODEL, /\\./g, ' '], [VENDOR, MICROSOFT], [TYPE, MOBILE]], [\n            /droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i             // Zebra\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]], [\n            /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]], [\n\n            ///////////////////\n            // SMARTTVS\n            ///////////////////\n\n            /smart-tv.+(samsung)/i                                              // Samsung\n            ], [VENDOR, [TYPE, SMARTTV]], [\n            /hbbtv.+maple;(\\d+)/i\n            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, SAMSUNG], [TYPE, SMARTTV]], [\n            /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i        // LG SmartTV\n            ], [[VENDOR, LG], [TYPE, SMARTTV]], [\n            /(apple) ?tv/i                                                      // Apple TV\n            ], [VENDOR, [MODEL, APPLE+' TV'], [TYPE, SMARTTV]], [\n            /crkey/i                                                            // Google Chromecast\n            ], [[MODEL, CHROME+'cast'], [VENDOR, GOOGLE], [TYPE, SMARTTV]], [\n            /droid.+aft(\\w)( bui|\\))/i                                          // Fire TV\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]], [\n            /\\(dtv[\\);].+(aquos)/i,\n            /(aquos-tv[\\w ]+)\\)/i                                               // Sharp\n            ], [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],[\n            /(bravia[\\w ]+)( bui|\\))/i                                              // Sony\n            ], [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]], [\n            /(mitv-\\w{5}) bui/i                                                 // Xiaomi\n            ], [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]], [\n            /Hbbtv.*(technisat) (.*);/i                                         // TechniSAT\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\n            /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,                          // Roku\n            /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i         // HbbTV devices\n            ], [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]], [\n            /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i                   // SmartTV from Unidentified Vendors\n            ], [[TYPE, SMARTTV]], [\n\n            ///////////////////\n            // CONSOLES\n            ///////////////////\n\n            /(ouya)/i,                                                          // Ouya\n            /(nintendo) ([wids3utch]+)/i                                        // Nintendo\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\n            /droid.+; (shield) bui/i                                            // Nvidia\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\n            /(playstation [345portablevi]+)/i                                   // Playstation\n            ], [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]], [\n            /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i                                // Microsoft Xbox\n            ], [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]], [\n\n            ///////////////////\n            // WEARABLES\n            ///////////////////\n\n            /((pebble))app/i                                                    // Pebble\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\n            /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i                              // Apple Watch\n            ], [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]], [\n            /droid.+; (glass) \\d/i                                              // Google Glass\n            ], [MODEL, [VENDOR, GOOGLE], [TYPE, WEARABLE]], [\n            /droid.+; (wt63?0{2,3})\\)/i\n            ], [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]], [\n            /(quest( 2| pro)?)/i                                                // Oculus Quest\n            ], [MODEL, [VENDOR, FACEBOOK], [TYPE, WEARABLE]], [\n\n            ///////////////////\n            // EMBEDDED\n            ///////////////////\n\n            /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i                              // Tesla\n            ], [VENDOR, [TYPE, EMBEDDED]], [\n            /(aeobc)\\b/i                                                        // Echo Dot\n            ], [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]], [\n\n            ////////////////////\n            // MIXED (GENERIC)\n            ///////////////////\n\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i           // Android Phones from Unidentified Vendors\n            ], [MODEL, [TYPE, MOBILE]], [\n            /droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i       // Android Tablets from Unidentified Vendors\n            ], [MODEL, [TYPE, TABLET]], [\n            /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i                      // Unidentifiable Tablet\n            ], [[TYPE, TABLET]], [\n            /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i    // Unidentifiable Mobile\n            ], [[TYPE, MOBILE]], [\n            /(android[-\\w\\. ]{0,9});.+buil/i                                    // Generic Android Device\n            ], [MODEL, [VENDOR, 'Generic']]\n        ],\n\n        engine : [[\n\n            /windows.+ edge\\/([\\w\\.]+)/i                                       // EdgeHTML\n            ], [VERSION, [NAME, EDGE+'HTML']], [\n\n            /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i                         // Blink\n            ], [VERSION, [NAME, 'Blink']], [\n\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i, // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna\n            /ekioh(flow)\\/([\\w\\.]+)/i,                                          // Flow\n            /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,                           // KHTML/Tasman/Links\n            /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,                                      // iCab\n            /\\b(libweb)/i\n            ], [NAME, VERSION], [\n\n            /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i                                     // Gecko\n            ], [VERSION, NAME]\n        ],\n\n        os : [[\n\n            // Windows\n            /microsoft (windows) (vista|xp)/i                                   // Windows (iTunes)\n            ], [NAME, VERSION], [\n            /(windows) nt 6\\.2; (arm)/i,                                        // Windows RT\n            /(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,            // Windows Phone\n            /(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i\n            ], [NAME, [VERSION, strMapper, windowsVersionMap]], [\n            /(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n            ], [[NAME, 'Windows'], [VERSION, strMapper, windowsVersionMap]], [\n\n            // iOS/macOS\n            /ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,              // iOS\n            /ios;fbsv\\/([\\d\\.]+)/i,\n            /cfnetwork\\/.+darwin/i\n            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [\n            /(mac os x) ?([\\w\\. ]*)/i,\n            /(macintosh|mac_powerpc\\b)(?!.+haiku)/i                             // Mac OS\n            ], [[NAME, MAC_OS], [VERSION, /_/g, '.']], [\n\n            // Mobile OSes\n            /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i                    // Android-x86/HarmonyOS\n            ], [VERSION, NAME], [                                               // Android/WebOS/QNX/Bada/RIM/Maemo/MeeGo/Sailfish OS\n            /(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,\n            /(blackberry)\\w*\\/([\\w\\.]*)/i,                                      // Blackberry\n            /(tizen|kaios)[\\/ ]([\\w\\.]+)/i,                                     // Tizen/KaiOS\n            /\\((series40);/i                                                    // Series 40\n            ], [NAME, VERSION], [\n            /\\(bb(10);/i                                                        // BlackBerry 10\n            ], [VERSION, [NAME, BLACKBERRY]], [\n            /(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i         // Symbian\n            ], [VERSION, [NAME, 'Symbian']], [\n            /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i // Firefox OS\n            ], [VERSION, [NAME, FIREFOX+' OS']], [\n            /web0s;.+rt(tv)/i,\n            /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i                              // WebOS\n            ], [VERSION, [NAME, 'webOS']], [\n            /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i                              // watchOS\n            ], [VERSION, [NAME, 'watchOS']], [\n\n            // Google Chromecast\n            /crkey\\/([\\d\\.]+)/i                                                 // Google Chromecast\n            ], [VERSION, [NAME, CHROME+'cast']], [\n            /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i                                  // Chromium OS\n            ], [[NAME, CHROMIUM_OS], VERSION],[\n\n            // Smart TVs\n            /panasonic;(viera)/i,                                               // Panasonic Viera\n            /(netrange)mmh/i,                                                   // Netrange\n            /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,                                         // NetTV\n\n            // Console\n            /(nintendo|playstation) ([wids345portablevuch]+)/i,                 // Nintendo/Playstation\n            /(xbox); +xbox ([^\\);]+)/i,                                         // Microsoft Xbox (360, One, X, S, Series X, Series S)\n\n            // Other\n            /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,                            // Joli/Palm\n            /(mint)[\\/\\(\\) ]?(\\w*)/i,                                           // Mint\n            /(mageia|vectorlinux)[; ]/i,                                        // Mageia/VectorLinux\n            /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n                                                                                // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n            /(hurd|linux) ?([\\w\\.]*)/i,                                         // Hurd/Linux\n            /(gnu) ?([\\w\\.]*)/i,                                                // GNU\n            /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i, // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n            /(haiku) (\\w+)/i                                                    // Haiku\n            ], [NAME, VERSION], [\n            /(sunos) ?([\\w\\.\\d]*)/i                                             // Solaris\n            ], [[NAME, 'Solaris'], VERSION], [\n            /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,                              // Solaris\n            /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,                                  // AIX\n            /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i, // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n            /(unix) ?([\\w\\.]*)/i                                                // UNIX\n            ], [NAME, VERSION]\n        ]\n    };\n\n    /////////////////\n    // Constructor\n    ////////////////\n\n    var UAParser = function (ua, extensions) {\n\n        if (typeof ua === OBJ_TYPE) {\n            extensions = ua;\n            ua = undefined;\n        }\n\n        if (!(this instanceof UAParser)) {\n            return new UAParser(ua, extensions).getResult();\n        }\n\n        var _navigator = (typeof window !== UNDEF_TYPE && window.navigator) ? window.navigator : undefined;\n        var _ua = ua || ((_navigator && _navigator.userAgent) ? _navigator.userAgent : EMPTY);\n        var _uach = (_navigator && _navigator.userAgentData) ? _navigator.userAgentData : undefined;\n        var _rgxmap = extensions ? extend(regexes, extensions) : regexes;\n        var _isSelfNav = _navigator && _navigator.userAgent == _ua;\n\n        this.getBrowser = function () {\n            var _browser = {};\n            _browser[NAME] = undefined;\n            _browser[VERSION] = undefined;\n            rgxMapper.call(_browser, _ua, _rgxmap.browser);\n            _browser[MAJOR] = majorize(_browser[VERSION]);\n            // Brave-specific detection\n            if (_isSelfNav && _navigator && _navigator.brave && typeof _navigator.brave.isBrave == FUNC_TYPE) {\n                _browser[NAME] = 'Brave';\n            }\n            return _browser;\n        };\n        this.getCPU = function () {\n            var _cpu = {};\n            _cpu[ARCHITECTURE] = undefined;\n            rgxMapper.call(_cpu, _ua, _rgxmap.cpu);\n            return _cpu;\n        };\n        this.getDevice = function () {\n            var _device = {};\n            _device[VENDOR] = undefined;\n            _device[MODEL] = undefined;\n            _device[TYPE] = undefined;\n            rgxMapper.call(_device, _ua, _rgxmap.device);\n            if (_isSelfNav && !_device[TYPE] && _uach && _uach.mobile) {\n                _device[TYPE] = MOBILE;\n            }\n            // iPadOS-specific detection: identified as Mac, but has some iOS-only properties\n            if (_isSelfNav && _device[MODEL] == 'Macintosh' && _navigator && typeof _navigator.standalone !== UNDEF_TYPE && _navigator.maxTouchPoints && _navigator.maxTouchPoints > 2) {\n                _device[MODEL] = 'iPad';\n                _device[TYPE] = TABLET;\n            }\n            return _device;\n        };\n        this.getEngine = function () {\n            var _engine = {};\n            _engine[NAME] = undefined;\n            _engine[VERSION] = undefined;\n            rgxMapper.call(_engine, _ua, _rgxmap.engine);\n            return _engine;\n        };\n        this.getOS = function () {\n            var _os = {};\n            _os[NAME] = undefined;\n            _os[VERSION] = undefined;\n            rgxMapper.call(_os, _ua, _rgxmap.os);\n            if (_isSelfNav && !_os[NAME] && _uach && _uach.platform != 'Unknown') {\n                _os[NAME] = _uach.platform  \n                                    .replace(/chrome os/i, CHROMIUM_OS)\n                                    .replace(/macos/i, MAC_OS);           // backward compatibility\n            }\n            return _os;\n        };\n        this.getResult = function () {\n            return {\n                ua      : this.getUA(),\n                browser : this.getBrowser(),\n                engine  : this.getEngine(),\n                os      : this.getOS(),\n                device  : this.getDevice(),\n                cpu     : this.getCPU()\n            };\n        };\n        this.getUA = function () {\n            return _ua;\n        };\n        this.setUA = function (ua) {\n            _ua = (typeof ua === STR_TYPE && ua.length > UA_MAX_LENGTH) ? trim(ua, UA_MAX_LENGTH) : ua;\n            return this;\n        };\n        this.setUA(_ua);\n        return this;\n    };\n\n    UAParser.VERSION = LIBVERSION;\n    UAParser.BROWSER =  enumerize([NAME, VERSION, MAJOR]);\n    UAParser.CPU = enumerize([ARCHITECTURE]);\n    UAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\n    UAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\n\n    ///////////\n    // Export\n    //////////\n\n    // check js environment\n    if (typeof(exports) !== UNDEF_TYPE) {\n        // nodejs env\n        if (typeof module !== UNDEF_TYPE && module.exports) {\n            exports = module.exports = UAParser;\n        }\n        exports.UAParser = UAParser;\n    } else {\n        // requirejs env (optional)\n        if (typeof(define) === FUNC_TYPE && define.amd) {\n            define(function () {\n                return UAParser;\n            });\n        } else if (typeof window !== UNDEF_TYPE) {\n            // browser env\n            window.UAParser = UAParser;\n        }\n    }\n\n    // jQuery/Zepto specific (optional)\n    // Note:\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\n    //   and we should catch that.\n    var $ = typeof window !== UNDEF_TYPE && (window.jQuery || window.Zepto);\n    if ($ && !$.ua) {\n        var parser = new UAParser();\n        $.ua = parser.getResult();\n        $.ua.get = function () {\n            return parser.getUA();\n        };\n        $.ua.set = function (ua) {\n            parser.setUA(ua);\n            var result = parser.getResult();\n            for (var prop in result) {\n                $.ua[prop] = result[prop];\n            }\n        };\n    }\n\n})(typeof window === 'object' ? window : this);\n","import { registerVersion } from '@firebase/app';\nexport * from '@firebase/app';\n\nvar name = \"firebase\";\nvar version = \"10.12.2\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nregisterVersion(name, version, 'app');\n//# sourceMappingURL=index.esm.js.map\n","import '@firebase/installations';\nimport { Component } from '@firebase/component';\nimport { openDB, deleteDB } from 'idb';\nimport { ErrorFactory, isIndexedDBAvailable, validateIndexedDBOpenable, getModularInstance } from '@firebase/util';\nimport { _registerComponent, _getProvider, getApp } from '@firebase/app';\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst DEFAULT_VAPID_KEY = 'BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4';\r\nconst ENDPOINT = 'https://fcmregistrations.googleapis.com/v1';\r\n/** Key of FCM Payload in Notification's data field. */\r\nconst FCM_MSG = 'FCM_MSG';\r\nconst CONSOLE_CAMPAIGN_ID = 'google.c.a.c_id';\r\n// Defined as in proto/messaging_event.proto. Neglecting fields that are supported.\r\nconst SDK_PLATFORM_WEB = 3;\r\nconst EVENT_MESSAGE_DELIVERED = 1;\r\nvar MessageType$1;\r\n(function (MessageType) {\r\n    MessageType[MessageType[\"DATA_MESSAGE\"] = 1] = \"DATA_MESSAGE\";\r\n    MessageType[MessageType[\"DISPLAY_NOTIFICATION\"] = 3] = \"DISPLAY_NOTIFICATION\";\r\n})(MessageType$1 || (MessageType$1 = {}));\n\n/**\r\n * @license\r\n * Copyright 2018 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this file except\r\n * in compliance with the License. You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under the License\r\n * is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express\r\n * or implied. See the License for the specific language governing permissions and limitations under\r\n * the License.\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    MessageType[\"PUSH_RECEIVED\"] = \"push-received\";\r\n    MessageType[\"NOTIFICATION_CLICKED\"] = \"notification-clicked\";\r\n})(MessageType || (MessageType = {}));\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction arrayToBase64(array) {\r\n    const uint8Array = new Uint8Array(array);\r\n    const base64String = btoa(String.fromCharCode(...uint8Array));\r\n    return base64String.replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\r\n}\r\nfunction base64ToArray(base64String) {\r\n    const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\r\n    const base64 = (base64String + padding)\r\n        .replace(/\\-/g, '+')\r\n        .replace(/_/g, '/');\r\n    const rawData = atob(base64);\r\n    const outputArray = new Uint8Array(rawData.length);\r\n    for (let i = 0; i < rawData.length; ++i) {\r\n        outputArray[i] = rawData.charCodeAt(i);\r\n    }\r\n    return outputArray;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst OLD_DB_NAME = 'fcm_token_details_db';\r\n/**\r\n * The last DB version of 'fcm_token_details_db' was 4. This is one higher, so that the upgrade\r\n * callback is called for all versions of the old DB.\r\n */\r\nconst OLD_DB_VERSION = 5;\r\nconst OLD_OBJECT_STORE_NAME = 'fcm_token_object_Store';\r\nasync function migrateOldDatabase(senderId) {\r\n    if ('databases' in indexedDB) {\r\n        // indexedDb.databases() is an IndexedDB v3 API and does not exist in all browsers. TODO: Remove\r\n        // typecast when it lands in TS types.\r\n        const databases = await indexedDB.databases();\r\n        const dbNames = databases.map(db => db.name);\r\n        if (!dbNames.includes(OLD_DB_NAME)) {\r\n            // old DB didn't exist, no need to open.\r\n            return null;\r\n        }\r\n    }\r\n    let tokenDetails = null;\r\n    const db = await openDB(OLD_DB_NAME, OLD_DB_VERSION, {\r\n        upgrade: async (db, oldVersion, newVersion, upgradeTransaction) => {\r\n            var _a;\r\n            if (oldVersion < 2) {\r\n                // Database too old, skip migration.\r\n                return;\r\n            }\r\n            if (!db.objectStoreNames.contains(OLD_OBJECT_STORE_NAME)) {\r\n                // Database did not exist. Nothing to do.\r\n                return;\r\n            }\r\n            const objectStore = upgradeTransaction.objectStore(OLD_OBJECT_STORE_NAME);\r\n            const value = await objectStore.index('fcmSenderId').get(senderId);\r\n            await objectStore.clear();\r\n            if (!value) {\r\n                // No entry in the database, nothing to migrate.\r\n                return;\r\n            }\r\n            if (oldVersion === 2) {\r\n                const oldDetails = value;\r\n                if (!oldDetails.auth || !oldDetails.p256dh || !oldDetails.endpoint) {\r\n                    return;\r\n                }\r\n                tokenDetails = {\r\n                    token: oldDetails.fcmToken,\r\n                    createTime: (_a = oldDetails.createTime) !== null && _a !== void 0 ? _a : Date.now(),\r\n                    subscriptionOptions: {\r\n                        auth: oldDetails.auth,\r\n                        p256dh: oldDetails.p256dh,\r\n                        endpoint: oldDetails.endpoint,\r\n                        swScope: oldDetails.swScope,\r\n                        vapidKey: typeof oldDetails.vapidKey === 'string'\r\n                            ? oldDetails.vapidKey\r\n                            : arrayToBase64(oldDetails.vapidKey)\r\n                    }\r\n                };\r\n            }\r\n            else if (oldVersion === 3) {\r\n                const oldDetails = value;\r\n                tokenDetails = {\r\n                    token: oldDetails.fcmToken,\r\n                    createTime: oldDetails.createTime,\r\n                    subscriptionOptions: {\r\n                        auth: arrayToBase64(oldDetails.auth),\r\n                        p256dh: arrayToBase64(oldDetails.p256dh),\r\n                        endpoint: oldDetails.endpoint,\r\n                        swScope: oldDetails.swScope,\r\n                        vapidKey: arrayToBase64(oldDetails.vapidKey)\r\n                    }\r\n                };\r\n            }\r\n            else if (oldVersion === 4) {\r\n                const oldDetails = value;\r\n                tokenDetails = {\r\n                    token: oldDetails.fcmToken,\r\n                    createTime: oldDetails.createTime,\r\n                    subscriptionOptions: {\r\n                        auth: arrayToBase64(oldDetails.auth),\r\n                        p256dh: arrayToBase64(oldDetails.p256dh),\r\n                        endpoint: oldDetails.endpoint,\r\n                        swScope: oldDetails.swScope,\r\n                        vapidKey: arrayToBase64(oldDetails.vapidKey)\r\n                    }\r\n                };\r\n            }\r\n        }\r\n    });\r\n    db.close();\r\n    // Delete all old databases.\r\n    await deleteDB(OLD_DB_NAME);\r\n    await deleteDB('fcm_vapid_details_db');\r\n    await deleteDB('undefined');\r\n    return checkTokenDetails(tokenDetails) ? tokenDetails : null;\r\n}\r\nfunction checkTokenDetails(tokenDetails) {\r\n    if (!tokenDetails || !tokenDetails.subscriptionOptions) {\r\n        return false;\r\n    }\r\n    const { subscriptionOptions } = tokenDetails;\r\n    return (typeof tokenDetails.createTime === 'number' &&\r\n        tokenDetails.createTime > 0 &&\r\n        typeof tokenDetails.token === 'string' &&\r\n        tokenDetails.token.length > 0 &&\r\n        typeof subscriptionOptions.auth === 'string' &&\r\n        subscriptionOptions.auth.length > 0 &&\r\n        typeof subscriptionOptions.p256dh === 'string' &&\r\n        subscriptionOptions.p256dh.length > 0 &&\r\n        typeof subscriptionOptions.endpoint === 'string' &&\r\n        subscriptionOptions.endpoint.length > 0 &&\r\n        typeof subscriptionOptions.swScope === 'string' &&\r\n        subscriptionOptions.swScope.length > 0 &&\r\n        typeof subscriptionOptions.vapidKey === 'string' &&\r\n        subscriptionOptions.vapidKey.length > 0);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// Exported for tests.\r\nconst DATABASE_NAME = 'firebase-messaging-database';\r\nconst DATABASE_VERSION = 1;\r\nconst OBJECT_STORE_NAME = 'firebase-messaging-store';\r\nlet dbPromise = null;\r\nfunction getDbPromise() {\r\n    if (!dbPromise) {\r\n        dbPromise = openDB(DATABASE_NAME, DATABASE_VERSION, {\r\n            upgrade: (upgradeDb, oldVersion) => {\r\n                // We don't use 'break' in this switch statement, the fall-through behavior is what we want,\r\n                // because if there are multiple versions between the old version and the current version, we\r\n                // want ALL the migrations that correspond to those versions to run, not only the last one.\r\n                // eslint-disable-next-line default-case\r\n                switch (oldVersion) {\r\n                    case 0:\r\n                        upgradeDb.createObjectStore(OBJECT_STORE_NAME);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return dbPromise;\r\n}\r\n/** Gets record(s) from the objectStore that match the given key. */\r\nasync function dbGet(firebaseDependencies) {\r\n    const key = getKey(firebaseDependencies);\r\n    const db = await getDbPromise();\r\n    const tokenDetails = (await db\r\n        .transaction(OBJECT_STORE_NAME)\r\n        .objectStore(OBJECT_STORE_NAME)\r\n        .get(key));\r\n    if (tokenDetails) {\r\n        return tokenDetails;\r\n    }\r\n    else {\r\n        // Check if there is a tokenDetails object in the old DB.\r\n        const oldTokenDetails = await migrateOldDatabase(firebaseDependencies.appConfig.senderId);\r\n        if (oldTokenDetails) {\r\n            await dbSet(firebaseDependencies, oldTokenDetails);\r\n            return oldTokenDetails;\r\n        }\r\n    }\r\n}\r\n/** Assigns or overwrites the record for the given key with the given value. */\r\nasync function dbSet(firebaseDependencies, tokenDetails) {\r\n    const key = getKey(firebaseDependencies);\r\n    const db = await getDbPromise();\r\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n    await tx.objectStore(OBJECT_STORE_NAME).put(tokenDetails, key);\r\n    await tx.done;\r\n    return tokenDetails;\r\n}\r\n/** Removes record(s) from the objectStore that match the given key. */\r\nasync function dbRemove(firebaseDependencies) {\r\n    const key = getKey(firebaseDependencies);\r\n    const db = await getDbPromise();\r\n    const tx = db.transaction(OBJECT_STORE_NAME, 'readwrite');\r\n    await tx.objectStore(OBJECT_STORE_NAME).delete(key);\r\n    await tx.done;\r\n}\r\nfunction getKey({ appConfig }) {\r\n    return appConfig.appId;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst ERROR_MAP = {\r\n    [\"missing-app-config-values\" /* ErrorCode.MISSING_APP_CONFIG_VALUES */]: 'Missing App configuration value: \"{$valueName}\"',\r\n    [\"only-available-in-window\" /* ErrorCode.AVAILABLE_IN_WINDOW */]: 'This method is available in a Window context.',\r\n    [\"only-available-in-sw\" /* ErrorCode.AVAILABLE_IN_SW */]: 'This method is available in a service worker context.',\r\n    [\"permission-default\" /* ErrorCode.PERMISSION_DEFAULT */]: 'The notification permission was not granted and dismissed instead.',\r\n    [\"permission-blocked\" /* ErrorCode.PERMISSION_BLOCKED */]: 'The notification permission was not granted and blocked instead.',\r\n    [\"unsupported-browser\" /* ErrorCode.UNSUPPORTED_BROWSER */]: \"This browser doesn't support the API's required to use the Firebase SDK.\",\r\n    [\"indexed-db-unsupported\" /* ErrorCode.INDEXED_DB_UNSUPPORTED */]: \"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)\",\r\n    [\"failed-service-worker-registration\" /* ErrorCode.FAILED_DEFAULT_REGISTRATION */]: 'We are unable to register the default service worker. {$browserErrorMessage}',\r\n    [\"token-subscribe-failed\" /* ErrorCode.TOKEN_SUBSCRIBE_FAILED */]: 'A problem occurred while subscribing the user to FCM: {$errorInfo}',\r\n    [\"token-subscribe-no-token\" /* ErrorCode.TOKEN_SUBSCRIBE_NO_TOKEN */]: 'FCM returned no token when subscribing the user to push.',\r\n    [\"token-unsubscribe-failed\" /* ErrorCode.TOKEN_UNSUBSCRIBE_FAILED */]: 'A problem occurred while unsubscribing the ' +\r\n        'user from FCM: {$errorInfo}',\r\n    [\"token-update-failed\" /* ErrorCode.TOKEN_UPDATE_FAILED */]: 'A problem occurred while updating the user from FCM: {$errorInfo}',\r\n    [\"token-update-no-token\" /* ErrorCode.TOKEN_UPDATE_NO_TOKEN */]: 'FCM returned no token when updating the user to push.',\r\n    [\"use-sw-after-get-token\" /* ErrorCode.USE_SW_AFTER_GET_TOKEN */]: 'The useServiceWorker() method may only be called once and must be ' +\r\n        'called before calling getToken() to ensure your service worker is used.',\r\n    [\"invalid-sw-registration\" /* ErrorCode.INVALID_SW_REGISTRATION */]: 'The input to useServiceWorker() must be a ServiceWorkerRegistration.',\r\n    [\"invalid-bg-handler\" /* ErrorCode.INVALID_BG_HANDLER */]: 'The input to setBackgroundMessageHandler() must be a function.',\r\n    [\"invalid-vapid-key\" /* ErrorCode.INVALID_VAPID_KEY */]: 'The public VAPID key must be a string.',\r\n    [\"use-vapid-key-after-get-token\" /* ErrorCode.USE_VAPID_KEY_AFTER_GET_TOKEN */]: 'The usePublicVapidKey() method may only be called once and must be ' +\r\n        'called before calling getToken() to ensure your VAPID key is used.'\r\n};\r\nconst ERROR_FACTORY = new ErrorFactory('messaging', 'Messaging', ERROR_MAP);\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function requestGetToken(firebaseDependencies, subscriptionOptions) {\r\n    const headers = await getHeaders(firebaseDependencies);\r\n    const body = getBody(subscriptionOptions);\r\n    const subscribeOptions = {\r\n        method: 'POST',\r\n        headers,\r\n        body: JSON.stringify(body)\r\n    };\r\n    let responseData;\r\n    try {\r\n        const response = await fetch(getEndpoint(firebaseDependencies.appConfig), subscribeOptions);\r\n        responseData = await response.json();\r\n    }\r\n    catch (err) {\r\n        throw ERROR_FACTORY.create(\"token-subscribe-failed\" /* ErrorCode.TOKEN_SUBSCRIBE_FAILED */, {\r\n            errorInfo: err === null || err === void 0 ? void 0 : err.toString()\r\n        });\r\n    }\r\n    if (responseData.error) {\r\n        const message = responseData.error.message;\r\n        throw ERROR_FACTORY.create(\"token-subscribe-failed\" /* ErrorCode.TOKEN_SUBSCRIBE_FAILED */, {\r\n            errorInfo: message\r\n        });\r\n    }\r\n    if (!responseData.token) {\r\n        throw ERROR_FACTORY.create(\"token-subscribe-no-token\" /* ErrorCode.TOKEN_SUBSCRIBE_NO_TOKEN */);\r\n    }\r\n    return responseData.token;\r\n}\r\nasync function requestUpdateToken(firebaseDependencies, tokenDetails) {\r\n    const headers = await getHeaders(firebaseDependencies);\r\n    const body = getBody(tokenDetails.subscriptionOptions);\r\n    const updateOptions = {\r\n        method: 'PATCH',\r\n        headers,\r\n        body: JSON.stringify(body)\r\n    };\r\n    let responseData;\r\n    try {\r\n        const response = await fetch(`${getEndpoint(firebaseDependencies.appConfig)}/${tokenDetails.token}`, updateOptions);\r\n        responseData = await response.json();\r\n    }\r\n    catch (err) {\r\n        throw ERROR_FACTORY.create(\"token-update-failed\" /* ErrorCode.TOKEN_UPDATE_FAILED */, {\r\n            errorInfo: err === null || err === void 0 ? void 0 : err.toString()\r\n        });\r\n    }\r\n    if (responseData.error) {\r\n        const message = responseData.error.message;\r\n        throw ERROR_FACTORY.create(\"token-update-failed\" /* ErrorCode.TOKEN_UPDATE_FAILED */, {\r\n            errorInfo: message\r\n        });\r\n    }\r\n    if (!responseData.token) {\r\n        throw ERROR_FACTORY.create(\"token-update-no-token\" /* ErrorCode.TOKEN_UPDATE_NO_TOKEN */);\r\n    }\r\n    return responseData.token;\r\n}\r\nasync function requestDeleteToken(firebaseDependencies, token) {\r\n    const headers = await getHeaders(firebaseDependencies);\r\n    const unsubscribeOptions = {\r\n        method: 'DELETE',\r\n        headers\r\n    };\r\n    try {\r\n        const response = await fetch(`${getEndpoint(firebaseDependencies.appConfig)}/${token}`, unsubscribeOptions);\r\n        const responseData = await response.json();\r\n        if (responseData.error) {\r\n            const message = responseData.error.message;\r\n            throw ERROR_FACTORY.create(\"token-unsubscribe-failed\" /* ErrorCode.TOKEN_UNSUBSCRIBE_FAILED */, {\r\n                errorInfo: message\r\n            });\r\n        }\r\n    }\r\n    catch (err) {\r\n        throw ERROR_FACTORY.create(\"token-unsubscribe-failed\" /* ErrorCode.TOKEN_UNSUBSCRIBE_FAILED */, {\r\n            errorInfo: err === null || err === void 0 ? void 0 : err.toString()\r\n        });\r\n    }\r\n}\r\nfunction getEndpoint({ projectId }) {\r\n    return `${ENDPOINT}/projects/${projectId}/registrations`;\r\n}\r\nasync function getHeaders({ appConfig, installations }) {\r\n    const authToken = await installations.getToken();\r\n    return new Headers({\r\n        'Content-Type': 'application/json',\r\n        Accept: 'application/json',\r\n        'x-goog-api-key': appConfig.apiKey,\r\n        'x-goog-firebase-installations-auth': `FIS ${authToken}`\r\n    });\r\n}\r\nfunction getBody({ p256dh, auth, endpoint, vapidKey }) {\r\n    const body = {\r\n        web: {\r\n            endpoint,\r\n            auth,\r\n            p256dh\r\n        }\r\n    };\r\n    if (vapidKey !== DEFAULT_VAPID_KEY) {\r\n        body.web.applicationPubKey = vapidKey;\r\n    }\r\n    return body;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// UpdateRegistration will be called once every week.\r\nconst TOKEN_EXPIRATION_MS = 7 * 24 * 60 * 60 * 1000; // 7 days\r\nasync function getTokenInternal(messaging) {\r\n    const pushSubscription = await getPushSubscription(messaging.swRegistration, messaging.vapidKey);\r\n    const subscriptionOptions = {\r\n        vapidKey: messaging.vapidKey,\r\n        swScope: messaging.swRegistration.scope,\r\n        endpoint: pushSubscription.endpoint,\r\n        auth: arrayToBase64(pushSubscription.getKey('auth')),\r\n        p256dh: arrayToBase64(pushSubscription.getKey('p256dh'))\r\n    };\r\n    const tokenDetails = await dbGet(messaging.firebaseDependencies);\r\n    if (!tokenDetails) {\r\n        // No token, get a new one.\r\n        return getNewToken(messaging.firebaseDependencies, subscriptionOptions);\r\n    }\r\n    else if (!isTokenValid(tokenDetails.subscriptionOptions, subscriptionOptions)) {\r\n        // Invalid token, get a new one.\r\n        try {\r\n            await requestDeleteToken(messaging.firebaseDependencies, tokenDetails.token);\r\n        }\r\n        catch (e) {\r\n            // Suppress errors because of #2364\r\n            console.warn(e);\r\n        }\r\n        return getNewToken(messaging.firebaseDependencies, subscriptionOptions);\r\n    }\r\n    else if (Date.now() >= tokenDetails.createTime + TOKEN_EXPIRATION_MS) {\r\n        // Weekly token refresh\r\n        return updateToken(messaging, {\r\n            token: tokenDetails.token,\r\n            createTime: Date.now(),\r\n            subscriptionOptions\r\n        });\r\n    }\r\n    else {\r\n        // Valid token, nothing to do.\r\n        return tokenDetails.token;\r\n    }\r\n}\r\n/**\r\n * This method deletes the token from the database, unsubscribes the token from FCM, and unregisters\r\n * the push subscription if it exists.\r\n */\r\nasync function deleteTokenInternal(messaging) {\r\n    const tokenDetails = await dbGet(messaging.firebaseDependencies);\r\n    if (tokenDetails) {\r\n        await requestDeleteToken(messaging.firebaseDependencies, tokenDetails.token);\r\n        await dbRemove(messaging.firebaseDependencies);\r\n    }\r\n    // Unsubscribe from the push subscription.\r\n    const pushSubscription = await messaging.swRegistration.pushManager.getSubscription();\r\n    if (pushSubscription) {\r\n        return pushSubscription.unsubscribe();\r\n    }\r\n    // If there's no SW, consider it a success.\r\n    return true;\r\n}\r\nasync function updateToken(messaging, tokenDetails) {\r\n    try {\r\n        const updatedToken = await requestUpdateToken(messaging.firebaseDependencies, tokenDetails);\r\n        const updatedTokenDetails = Object.assign(Object.assign({}, tokenDetails), { token: updatedToken, createTime: Date.now() });\r\n        await dbSet(messaging.firebaseDependencies, updatedTokenDetails);\r\n        return updatedToken;\r\n    }\r\n    catch (e) {\r\n        throw e;\r\n    }\r\n}\r\nasync function getNewToken(firebaseDependencies, subscriptionOptions) {\r\n    const token = await requestGetToken(firebaseDependencies, subscriptionOptions);\r\n    const tokenDetails = {\r\n        token,\r\n        createTime: Date.now(),\r\n        subscriptionOptions\r\n    };\r\n    await dbSet(firebaseDependencies, tokenDetails);\r\n    return tokenDetails.token;\r\n}\r\n/**\r\n * Gets a PushSubscription for the current user.\r\n */\r\nasync function getPushSubscription(swRegistration, vapidKey) {\r\n    const subscription = await swRegistration.pushManager.getSubscription();\r\n    if (subscription) {\r\n        return subscription;\r\n    }\r\n    return swRegistration.pushManager.subscribe({\r\n        userVisibleOnly: true,\r\n        // Chrome <= 75 doesn't support base64-encoded VAPID key. For backward compatibility, VAPID key\r\n        // submitted to pushManager#subscribe must be of type Uint8Array.\r\n        applicationServerKey: base64ToArray(vapidKey)\r\n    });\r\n}\r\n/**\r\n * Checks if the saved tokenDetails object matches the configuration provided.\r\n */\r\nfunction isTokenValid(dbOptions, currentOptions) {\r\n    const isVapidKeyEqual = currentOptions.vapidKey === dbOptions.vapidKey;\r\n    const isEndpointEqual = currentOptions.endpoint === dbOptions.endpoint;\r\n    const isAuthEqual = currentOptions.auth === dbOptions.auth;\r\n    const isP256dhEqual = currentOptions.p256dh === dbOptions.p256dh;\r\n    return isVapidKeyEqual && isEndpointEqual && isAuthEqual && isP256dhEqual;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction externalizePayload(internalPayload) {\r\n    const payload = {\r\n        from: internalPayload.from,\r\n        // eslint-disable-next-line camelcase\r\n        collapseKey: internalPayload.collapse_key,\r\n        // eslint-disable-next-line camelcase\r\n        messageId: internalPayload.fcmMessageId\r\n    };\r\n    propagateNotificationPayload(payload, internalPayload);\r\n    propagateDataPayload(payload, internalPayload);\r\n    propagateFcmOptions(payload, internalPayload);\r\n    return payload;\r\n}\r\nfunction propagateNotificationPayload(payload, messagePayloadInternal) {\r\n    if (!messagePayloadInternal.notification) {\r\n        return;\r\n    }\r\n    payload.notification = {};\r\n    const title = messagePayloadInternal.notification.title;\r\n    if (!!title) {\r\n        payload.notification.title = title;\r\n    }\r\n    const body = messagePayloadInternal.notification.body;\r\n    if (!!body) {\r\n        payload.notification.body = body;\r\n    }\r\n    const image = messagePayloadInternal.notification.image;\r\n    if (!!image) {\r\n        payload.notification.image = image;\r\n    }\r\n    const icon = messagePayloadInternal.notification.icon;\r\n    if (!!icon) {\r\n        payload.notification.icon = icon;\r\n    }\r\n}\r\nfunction propagateDataPayload(payload, messagePayloadInternal) {\r\n    if (!messagePayloadInternal.data) {\r\n        return;\r\n    }\r\n    payload.data = messagePayloadInternal.data;\r\n}\r\nfunction propagateFcmOptions(payload, messagePayloadInternal) {\r\n    var _a, _b, _c, _d, _e;\r\n    // fcmOptions.link value is written into notification.click_action. see more in b/232072111\r\n    if (!messagePayloadInternal.fcmOptions &&\r\n        !((_a = messagePayloadInternal.notification) === null || _a === void 0 ? void 0 : _a.click_action)) {\r\n        return;\r\n    }\r\n    payload.fcmOptions = {};\r\n    const link = (_c = (_b = messagePayloadInternal.fcmOptions) === null || _b === void 0 ? void 0 : _b.link) !== null && _c !== void 0 ? _c : (_d = messagePayloadInternal.notification) === null || _d === void 0 ? void 0 : _d.click_action;\r\n    if (!!link) {\r\n        payload.fcmOptions.link = link;\r\n    }\r\n    // eslint-disable-next-line camelcase\r\n    const analyticsLabel = (_e = messagePayloadInternal.fcmOptions) === null || _e === void 0 ? void 0 : _e.analytics_label;\r\n    if (!!analyticsLabel) {\r\n        payload.fcmOptions.analyticsLabel = analyticsLabel;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction isConsoleMessage(data) {\r\n    // This message has a campaign ID, meaning it was sent using the Firebase Console.\r\n    return typeof data === 'object' && !!data && CONSOLE_CAMPAIGN_ID in data;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Returns a promise that resolves after given time passes. */\r\nfunction sleep(ms) {\r\n    return new Promise(resolve => {\r\n        setTimeout(resolve, ms);\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n_mergeStrings('hts/frbslgigp.ogepscmv/ieo/eaylg', 'tp:/ieaeogn-agolai.o/1frlglgc/o');\r\n_mergeStrings('AzSCbw63g1R0nCw85jG8', 'Iaya3yLKwmgvh7cF0q4');\r\nasync function stageLog(messaging, internalPayload) {\r\n    const fcmEvent = createFcmEvent(internalPayload, await messaging.firebaseDependencies.installations.getId());\r\n    createAndEnqueueLogEvent(messaging, fcmEvent, internalPayload.productId);\r\n}\r\nfunction createFcmEvent(internalPayload, fid) {\r\n    var _a, _b;\r\n    const fcmEvent = {};\r\n    /* eslint-disable camelcase */\r\n    // some fields should always be non-null. Still check to ensure.\r\n    if (!!internalPayload.from) {\r\n        fcmEvent.project_number = internalPayload.from;\r\n    }\r\n    if (!!internalPayload.fcmMessageId) {\r\n        fcmEvent.message_id = internalPayload.fcmMessageId;\r\n    }\r\n    fcmEvent.instance_id = fid;\r\n    if (!!internalPayload.notification) {\r\n        fcmEvent.message_type = MessageType$1.DISPLAY_NOTIFICATION.toString();\r\n    }\r\n    else {\r\n        fcmEvent.message_type = MessageType$1.DATA_MESSAGE.toString();\r\n    }\r\n    fcmEvent.sdk_platform = SDK_PLATFORM_WEB.toString();\r\n    fcmEvent.package_name = self.origin.replace(/(^\\w+:|^)\\/\\//, '');\r\n    if (!!internalPayload.collapse_key) {\r\n        fcmEvent.collapse_key = internalPayload.collapse_key;\r\n    }\r\n    fcmEvent.event = EVENT_MESSAGE_DELIVERED.toString();\r\n    if (!!((_a = internalPayload.fcmOptions) === null || _a === void 0 ? void 0 : _a.analytics_label)) {\r\n        fcmEvent.analytics_label = (_b = internalPayload.fcmOptions) === null || _b === void 0 ? void 0 : _b.analytics_label;\r\n    }\r\n    /* eslint-enable camelcase */\r\n    return fcmEvent;\r\n}\r\nfunction createAndEnqueueLogEvent(messaging, fcmEvent, productId) {\r\n    const logEvent = {};\r\n    /* eslint-disable camelcase */\r\n    logEvent.event_time_ms = Math.floor(Date.now()).toString();\r\n    logEvent.source_extension_json_proto3 = JSON.stringify(fcmEvent);\r\n    if (!!productId) {\r\n        logEvent.compliance_data = buildComplianceData(productId);\r\n    }\r\n    // eslint-disable-next-line camelcase\r\n    messaging.logEvents.push(logEvent);\r\n}\r\nfunction buildComplianceData(productId) {\r\n    const complianceData = {\r\n        privacy_context: {\r\n            prequest: {\r\n                origin_associated_product_id: productId\r\n            }\r\n        }\r\n    };\r\n    return complianceData;\r\n}\r\nfunction _mergeStrings(s1, s2) {\r\n    const resultArray = [];\r\n    for (let i = 0; i < s1.length; i++) {\r\n        resultArray.push(s1.charAt(i));\r\n        if (i < s2.length) {\r\n            resultArray.push(s2.charAt(i));\r\n        }\r\n    }\r\n    return resultArray.join('');\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nasync function onSubChange(event, messaging) {\r\n    var _a, _b;\r\n    const { newSubscription } = event;\r\n    if (!newSubscription) {\r\n        // Subscription revoked, delete token\r\n        await deleteTokenInternal(messaging);\r\n        return;\r\n    }\r\n    const tokenDetails = await dbGet(messaging.firebaseDependencies);\r\n    await deleteTokenInternal(messaging);\r\n    messaging.vapidKey =\r\n        (_b = (_a = tokenDetails === null || tokenDetails === void 0 ? void 0 : tokenDetails.subscriptionOptions) === null || _a === void 0 ? void 0 : _a.vapidKey) !== null && _b !== void 0 ? _b : DEFAULT_VAPID_KEY;\r\n    await getTokenInternal(messaging);\r\n}\r\nasync function onPush(event, messaging) {\r\n    const internalPayload = getMessagePayloadInternal(event);\r\n    if (!internalPayload) {\r\n        // Failed to get parsed MessagePayload from the PushEvent. Skip handling the push.\r\n        return;\r\n    }\r\n    // log to Firelog with user consent\r\n    if (messaging.deliveryMetricsExportedToBigQueryEnabled) {\r\n        await stageLog(messaging, internalPayload);\r\n    }\r\n    // foreground handling: eventually passed to onMessage hook\r\n    const clientList = await getClientList();\r\n    if (hasVisibleClients(clientList)) {\r\n        return sendMessagePayloadInternalToWindows(clientList, internalPayload);\r\n    }\r\n    // background handling: display if possible and pass to onBackgroundMessage hook\r\n    if (!!internalPayload.notification) {\r\n        await showNotification(wrapInternalPayload(internalPayload));\r\n    }\r\n    if (!messaging) {\r\n        return;\r\n    }\r\n    if (!!messaging.onBackgroundMessageHandler) {\r\n        const payload = externalizePayload(internalPayload);\r\n        if (typeof messaging.onBackgroundMessageHandler === 'function') {\r\n            await messaging.onBackgroundMessageHandler(payload);\r\n        }\r\n        else {\r\n            messaging.onBackgroundMessageHandler.next(payload);\r\n        }\r\n    }\r\n}\r\nasync function onNotificationClick(event) {\r\n    var _a, _b;\r\n    const internalPayload = (_b = (_a = event.notification) === null || _a === void 0 ? void 0 : _a.data) === null || _b === void 0 ? void 0 : _b[FCM_MSG];\r\n    if (!internalPayload) {\r\n        return;\r\n    }\r\n    else if (event.action) {\r\n        // User clicked on an action button. This will allow developers to act on action button clicks\r\n        // by using a custom onNotificationClick listener that they define.\r\n        return;\r\n    }\r\n    // Prevent other listeners from receiving the event\r\n    event.stopImmediatePropagation();\r\n    event.notification.close();\r\n    // Note clicking on a notification with no link set will focus the Chrome's current tab.\r\n    const link = getLink(internalPayload);\r\n    if (!link) {\r\n        return;\r\n    }\r\n    // FM should only open/focus links from app's origin.\r\n    const url = new URL(link, self.location.href);\r\n    const originUrl = new URL(self.location.origin);\r\n    if (url.host !== originUrl.host) {\r\n        return;\r\n    }\r\n    let client = await getWindowClient(url);\r\n    if (!client) {\r\n        client = await self.clients.openWindow(link);\r\n        // Wait three seconds for the client to initialize and set up the message handler so that it\r\n        // can receive the message.\r\n        await sleep(3000);\r\n    }\r\n    else {\r\n        client = await client.focus();\r\n    }\r\n    if (!client) {\r\n        // Window Client will not be returned if it's for a third party origin.\r\n        return;\r\n    }\r\n    internalPayload.messageType = MessageType.NOTIFICATION_CLICKED;\r\n    internalPayload.isFirebaseMessaging = true;\r\n    return client.postMessage(internalPayload);\r\n}\r\nfunction wrapInternalPayload(internalPayload) {\r\n    const wrappedInternalPayload = Object.assign({}, internalPayload.notification);\r\n    // Put the message payload under FCM_MSG name so we can identify the notification as being an FCM\r\n    // notification vs a notification from somewhere else (i.e. normal web push or developer generated\r\n    // notification).\r\n    wrappedInternalPayload.data = {\r\n        [FCM_MSG]: internalPayload\r\n    };\r\n    return wrappedInternalPayload;\r\n}\r\nfunction getMessagePayloadInternal({ data }) {\r\n    if (!data) {\r\n        return null;\r\n    }\r\n    try {\r\n        return data.json();\r\n    }\r\n    catch (err) {\r\n        // Not JSON so not an FCM message.\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * @param url The URL to look for when focusing a client.\r\n * @return Returns an existing window client or a newly opened WindowClient.\r\n */\r\nasync function getWindowClient(url) {\r\n    const clientList = await getClientList();\r\n    for (const client of clientList) {\r\n        const clientUrl = new URL(client.url, self.location.href);\r\n        if (url.host === clientUrl.host) {\r\n            return client;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * @returns If there is currently a visible WindowClient, this method will resolve to true,\r\n * otherwise false.\r\n */\r\nfunction hasVisibleClients(clientList) {\r\n    return clientList.some(client => client.visibilityState === 'visible' &&\r\n        // Ignore chrome-extension clients as that matches the background pages of extensions, which\r\n        // are always considered visible for some reason.\r\n        !client.url.startsWith('chrome-extension://'));\r\n}\r\nfunction sendMessagePayloadInternalToWindows(clientList, internalPayload) {\r\n    internalPayload.isFirebaseMessaging = true;\r\n    internalPayload.messageType = MessageType.PUSH_RECEIVED;\r\n    for (const client of clientList) {\r\n        client.postMessage(internalPayload);\r\n    }\r\n}\r\nfunction getClientList() {\r\n    return self.clients.matchAll({\r\n        type: 'window',\r\n        includeUncontrolled: true\r\n        // TS doesn't know that \"type: 'window'\" means it'll return WindowClient[]\r\n    });\r\n}\r\nfunction showNotification(notificationPayloadInternal) {\r\n    var _a;\r\n    // Note: Firefox does not support the maxActions property.\r\n    // https://developer.mozilla.org/en-US/docs/Web/API/notification/maxActions\r\n    const { actions } = notificationPayloadInternal;\r\n    const { maxActions } = Notification;\r\n    if (actions && maxActions && actions.length > maxActions) {\r\n        console.warn(`This browser only supports ${maxActions} actions. The remaining actions will not be displayed.`);\r\n    }\r\n    return self.registration.showNotification(\r\n    /* title= */ (_a = notificationPayloadInternal.title) !== null && _a !== void 0 ? _a : '', notificationPayloadInternal);\r\n}\r\nfunction getLink(payload) {\r\n    var _a, _b, _c;\r\n    // eslint-disable-next-line camelcase\r\n    const link = (_b = (_a = payload.fcmOptions) === null || _a === void 0 ? void 0 : _a.link) !== null && _b !== void 0 ? _b : (_c = payload.notification) === null || _c === void 0 ? void 0 : _c.click_action;\r\n    if (link) {\r\n        return link;\r\n    }\r\n    if (isConsoleMessage(payload.data)) {\r\n        // Notification created in the Firebase Console. Redirect to origin.\r\n        return self.location.origin;\r\n    }\r\n    else {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction extractAppConfig(app) {\r\n    if (!app || !app.options) {\r\n        throw getMissingValueError('App Configuration Object');\r\n    }\r\n    if (!app.name) {\r\n        throw getMissingValueError('App Name');\r\n    }\r\n    // Required app config keys\r\n    const configKeys = [\r\n        'projectId',\r\n        'apiKey',\r\n        'appId',\r\n        'messagingSenderId'\r\n    ];\r\n    const { options } = app;\r\n    for (const keyName of configKeys) {\r\n        if (!options[keyName]) {\r\n            throw getMissingValueError(keyName);\r\n        }\r\n    }\r\n    return {\r\n        appName: app.name,\r\n        projectId: options.projectId,\r\n        apiKey: options.apiKey,\r\n        appId: options.appId,\r\n        senderId: options.messagingSenderId\r\n    };\r\n}\r\nfunction getMissingValueError(valueName) {\r\n    return ERROR_FACTORY.create(\"missing-app-config-values\" /* ErrorCode.MISSING_APP_CONFIG_VALUES */, {\r\n        valueName\r\n    });\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass MessagingService {\r\n    constructor(app, installations, analyticsProvider) {\r\n        // logging is only done with end user consent. Default to false.\r\n        this.deliveryMetricsExportedToBigQueryEnabled = false;\r\n        this.onBackgroundMessageHandler = null;\r\n        this.onMessageHandler = null;\r\n        this.logEvents = [];\r\n        this.isLogServiceStarted = false;\r\n        const appConfig = extractAppConfig(app);\r\n        this.firebaseDependencies = {\r\n            app,\r\n            appConfig,\r\n            installations,\r\n            analyticsProvider\r\n        };\r\n    }\r\n    _delete() {\r\n        return Promise.resolve();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst SwMessagingFactory = (container) => {\r\n    const messaging = new MessagingService(container.getProvider('app').getImmediate(), container.getProvider('installations-internal').getImmediate(), container.getProvider('analytics-internal'));\r\n    self.addEventListener('push', e => {\r\n        e.waitUntil(onPush(e, messaging));\r\n    });\r\n    self.addEventListener('pushsubscriptionchange', e => {\r\n        e.waitUntil(onSubChange(e, messaging));\r\n    });\r\n    self.addEventListener('notificationclick', e => {\r\n        e.waitUntil(onNotificationClick(e));\r\n    });\r\n    return messaging;\r\n};\r\n/**\r\n * The messaging instance registered in sw is named differently than that of in client. This is\r\n * because both `registerMessagingInWindow` and `registerMessagingInSw` would be called in\r\n * `messaging-compat` and component with the same name can only be registered once.\r\n */\r\nfunction registerMessagingInSw() {\r\n    _registerComponent(new Component('messaging-sw', SwMessagingFactory, \"PUBLIC\" /* ComponentType.PUBLIC */));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Checks whether all required APIs exist within SW Context\r\n * @returns a Promise that resolves to a boolean.\r\n *\r\n * @public\r\n */\r\nasync function isSwSupported() {\r\n    // firebase-js-sdk/issues/2393 reveals that idb#open in Safari iframe and Firefox private browsing\r\n    // might be prohibited to run. In these contexts, an error would be thrown during the messaging\r\n    // instantiating phase, informing the developers to import/call isSupported for special handling.\r\n    return (isIndexedDBAvailable() &&\r\n        (await validateIndexedDBOpenable()) &&\r\n        'PushManager' in self &&\r\n        'Notification' in self &&\r\n        ServiceWorkerRegistration.prototype.hasOwnProperty('showNotification') &&\r\n        PushSubscription.prototype.hasOwnProperty('getKey'));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction onBackgroundMessage$1(messaging, nextOrObserver) {\r\n    if (self.document !== undefined) {\r\n        throw ERROR_FACTORY.create(\"only-available-in-sw\" /* ErrorCode.AVAILABLE_IN_SW */);\r\n    }\r\n    messaging.onBackgroundMessageHandler = nextOrObserver;\r\n    return () => {\r\n        messaging.onBackgroundMessageHandler = null;\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction _setDeliveryMetricsExportedToBigQueryEnabled(messaging, enable) {\r\n    messaging.deliveryMetricsExportedToBigQueryEnabled =\r\n        enable;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Retrieves a Firebase Cloud Messaging instance.\r\n *\r\n * @returns The Firebase Cloud Messaging instance associated with the provided firebase app.\r\n *\r\n * @public\r\n */\r\nfunction getMessagingInSw(app = getApp()) {\r\n    // Conscious decision to make this async check non-blocking during the messaging instance\r\n    // initialization phase for performance consideration. An error would be thrown latter for\r\n    // developer's information. Developers can then choose to import and call `isSupported` for\r\n    // special handling.\r\n    isSwSupported().then(isSupported => {\r\n        // If `isSwSupported()` resolved, but returned false.\r\n        if (!isSupported) {\r\n            throw ERROR_FACTORY.create(\"unsupported-browser\" /* ErrorCode.UNSUPPORTED_BROWSER */);\r\n        }\r\n    }, _ => {\r\n        // If `isSwSupported()` rejected.\r\n        throw ERROR_FACTORY.create(\"indexed-db-unsupported\" /* ErrorCode.INDEXED_DB_UNSUPPORTED */);\r\n    });\r\n    return _getProvider(getModularInstance(app), 'messaging-sw').getImmediate();\r\n}\r\n/**\r\n * Called when a message is received while the app is in the background. An app is considered to be\r\n * in the background if no active window is displayed.\r\n *\r\n * @param messaging - The {@link Messaging} instance.\r\n * @param nextOrObserver - This function, or observer object with `next` defined, is called when a\r\n * message is received and the app is currently in the background.\r\n *\r\n * @returns To stop listening for messages execute this returned function\r\n *\r\n * @public\r\n */\r\nfunction onBackgroundMessage(messaging, nextOrObserver) {\r\n    messaging = getModularInstance(messaging);\r\n    return onBackgroundMessage$1(messaging, nextOrObserver);\r\n}\r\n/**\r\n * Enables or disables Firebase Cloud Messaging message delivery metrics export to BigQuery. By\r\n * default, message delivery metrics are not exported to BigQuery. Use this method to enable or\r\n * disable the export at runtime.\r\n *\r\n * @param messaging - The `FirebaseMessaging` instance.\r\n * @param enable - Whether Firebase Cloud Messaging should export message delivery metrics to\r\n * BigQuery.\r\n *\r\n * @public\r\n */\r\nfunction experimentalSetDeliveryMetricsExportedToBigQueryEnabled(messaging, enable) {\r\n    messaging = getModularInstance(messaging);\r\n    return _setDeliveryMetricsExportedToBigQueryEnabled(messaging, enable);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nregisterMessagingInSw();\n\nexport { experimentalSetDeliveryMetricsExportedToBigQueryEnabled, getMessagingInSw as getMessaging, isSwSupported as isSupported, onBackgroundMessage };\n//# sourceMappingURL=index.sw.esm2017.js.map\n"],"names":["instanceOfAny","object","constructors","some","c","idbProxyableTypes","cursorAdvanceMethods","cursorRequestMap","WeakMap","transactionDoneMap","transactionStoreNamesMap","transformCache","reverseTransformCache","idbProxyTraps","get","target","prop","receiver","IDBTransaction","objectStoreNames","undefined","objectStore","set","value","has","wrapFunction","func","IDBDatabase","prototype","transaction","IDBCursor","advance","continue","continuePrimaryKey","includes","args","apply","unwrap","this","storeNames","tx","call","sort","transformCachableValue","done","Promise","resolve","reject","unlisten","removeEventListener","complete","error","DOMException","addEventListener","cacheDonePromiseForTransaction","IDBObjectStore","IDBIndex","Proxy","IDBRequest","request","promise","success","result","then","catch","promisifyRequest","newValue","readMethods","writeMethods","cachedMethods","Map","getMethod","targetFuncName","replace","useIndex","isWrite","method","async","storeName","store","index","shift","all","oldTraps","callback","_slicedToArray","arr","i","Array","isArray","_arrayWithHoles","r","l","t","Symbol","iterator","e","n","u","a","f","o","next","Object","push","length","return","_iterableToArrayLimit","minLen","_arrayLikeToArray","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","enumerable","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","key","_toPropertyKey","configurable","writable","toPrimitive","String","Number","_toPrimitive","AnalyticsQueries","AnalyticsEventImportance","MetricType","ComponentType","ActionType","PlatformName","AuthStatus","SessionActions","SessionAutomatedEvents","SessionRank","DEV_DOMAIN","BATCH_PERIOD","DB_ANALYTICS_ITEM","DB_EXPOSURE_ITEM","DEBUG_LOGGING_PREFIX","UAA_QUERIES","values","PAGEVIEW_EVENT_TYPE","SESSIONS_DURATION_EVENT_TYPE","PERF_EVENTS","navigationTiming","eventName","redirectTime","RT","TTFB","networkInformation","storageEstimate","FCP","FID","LCP","CLS","TBT","NTBT","INP","ET","userJourneyStep","DEFAULT_REVOKED_QUERY_PARAMS","ENDPOINT_VALIDATION_REGEX","buildAPIEndPoints","domain","eventsEndpoint","metricsEndPoint","exposureEndpoint","tracesEndpoint","config","authCookie","amplitudeApiKey","batchEventsPeriod","batchEventsThreshold","batchMetricsPeriod","batchMetricsThreshold","batchTracesPeriod","batchTracesThreshold","headers","interactionManager","isAlwaysAuthed","isProd","isInternalApplication","onError","err","metadata","console","platform","unknown","projectName","ricTimeoutScheduleEvent","ricTimeoutSetDevice","showDebugLogging","trackUserId","version","apiEndpoint","steps","disableReporting","enhanceConfig","fn1","fns","reduce","prevFn","nextFn","compose","properties","getSecuredEndpoint","toAdd","revokedQueryParams","concat","assign","setConfig","batchThresholds","threshhold","warn","Platforms","web","mobile_web","tablet_web","deviceBreakpoints","isAndroidPlatform","isIOSPlatform","isWebPlatform","postMessage","message","navigator","serviceWorker","controller","Error","device","amplitudeOSName","amplitudeOSVersion","amplitudeDeviceModel","browserName","browserMajor","osName","userAgent","width","height","identity","countryCode","deviceId","device_os","deviceClass","isOptOut","locale","jwt","session_lcc_id","userId","generateUUID","input","Math","random","getIsAuthed","getUserProperties","userProperties","country_code","getPlatformValue","window","matchMedia","matches","setDevice","requestIdleCallback","setUAParser","timeout","setDeviceSize","innerHeight","innerWidth","setIdentity","isAuthed","setPlatform","performance","mark","userAgentParser","getResult","browser","major","os","measure","breadcrumbs","initialUAAData","pageKey","pageKeyRegex","pagePath","prevPageKey","prevPagePath","persistentData","eventId","sequenceNumber","sessionId","lastEventTime","sessionStart","sessionUUID","ac","af","ah","al","am","ar","as","pv","setPersistentData","data","getDocumentReferrer","document","referrer","getUserAcquisitionAttribution","URLSearchParams","getUrlParams","persistentUAAData","uaaValuesFromUrl","documentReferrer","referrerURL","URL","hostname","getUrlHostname","referring_domain","getReferrerData","urlSearchParams","UAAValues","toLowerCase","uaaData","location","search","paramsToRemove","regex","RegExp","join","removeQueryParams","getUrlPathname","pathname","setPagePath","overrideWindowLocation","setPrevPagePath","setUserAttributionEnrichment","validatedEvent","snakeCaseRegex","BLOCKED_PROPS","ALLOWED_PROPERTIES","identityFlow","identifyFlow","identityData","filteredProps","entries","acc","entry","_entry","isEventKeyFormatValid","ujs","map","isValidPlatform","scheduler","eventsQueue","eventsScheduled","metricsQueue","metricsScheduled","tracesQueue","tracesScheduled","setScheduler","options","sessionQuality","sqs","ACTIONS_WEIGHT","SESSION_AUTOMATED_EVENTS_WEIGHT","SESSION_DURATION_RANK","SESSION_DURATION_WEIGHT","xs","s","m","xl","xxl","getSessionRank","sessionDuration","setSessionQuality","setSessionQualityEnrichment","action","click","focus","hover","move","scroll","select","recordSessionAction","event_type","session_rank","sessionRank","sessionAutomatedEvent","setSessionQualityScore","getNow","Date","getTime","timeStone","timeStart","timeOnPagePath","timeOnPageKey","prevTimeOnPagePath","prevTimeOnPageKey","sessionEnd","prevSessionDuration","setTime","db","isReady","idbKeyval","setDB","initIDB","indexedDB","idb","blocked","upgrade","blocking","terminated","open","openPromise","event","oldVersion","newVersion","openDB","idbDB","createObjectStore","val","put","delete","getAllKeys","type","inMemoryDB","createMemoryDatabase","idbGet","idbSet","savePersistentData","debugOptions","debugBatch","metricName","importance","low","prefix","style","importanceLog","group","log","groupEnd","debugLog","isSessionEnded","now","prepareEventData","logData","log_data_device_id","timestamp","setSessionStart","device_id","user_id","event_id","session_id","version_name","os_name","os_version","device_model","language","event_properties","session_uuid","user_properties","uuid","library","sequence_number","user_agent","prepareEventsData","logsData","prepareMetricsData","metrics","metric","customTags","tags","authed","project_name","metric_name","page_path","metricType","prepareMetricData","isBatchMetricsReady","sendMetricsCb","setTimeout","scheduleEvent","cb","runAfterInteractions","CONTENT_TYPE_URLENCODED","apiFetch","isJSON","url","fetchImportance","_getFetchRequestOptio","jsonEncode","contentType","body","JSON","stringify","getFetchRequestOptions","sendXhr","xhr","XMLHttpRequest","headerName","setRequestHeader","send","Authorization","fetch","mode","context","blob","Blob","sendBeacon","bind","CircularJsonReferenceError","super","captureStackTrace","stack","DomReferenceInAnalyticsEventError","queueEvents","eventData","eventImportance","sendEventsCb","high","sendEvents","sendScheduledEvents","eventsData","stringifiedEventData","listEventType","_safelyJsonStringifyD2","sanitizedEventData","copy","currentTarget","relatedTarget","_dispatchInstances","_targetInst","view","safelyJsonStringifyDomEvent","sanitized","analyticsServiceData","v","upload_time","client","ACTION_OPTIONS","COMPONENT_TYPE_OPTIONS","getActionValue","getComponentTypeValue","componentType","getValidatedProperties","loggingId","auth","loggedIn","notLoggedIn","component_type","logging_id","userTypeEnum","user_type_enum","getValidatedEvent","time_start","pageview","blacklistRegex","isEnabled","getPageviewProperties","page_key","prev_page_key","prev_page_path","logEvent","setPageviewEnrichment","setIdentityFlowEnrichment","has_double_fired","sendMetrics","preparedMetricsData","skipScheduler","logMetric","server","getPerformanceMetricName","networkInformationCached","onMarkStepOptions","onMarkStep","perfumeInstance","perfume","Perfume","markStep","step","markStepOnce","incrementUjNavigation","initPerfMonitoring","perfumeLib","analyticsTracker","attribution","navigatorInformation","rating","category","deviceMemory","hardwareConcurrency","isLowEndDevice","isLowEndExperience","serviceWorkerStatus","defaultEventData","defaultMetricData","is_low_end_device","is_low_end_experience","save_data","saveData","service_worker","is_perf_metric","histogram","measurement","page","duration","vitalsScore","count","effectiveType","networkInformationDownlink","downlink","networkInformationEffectiveType","networkInformationRtt","rtt","networkInformationSaveData","navigatorDeviceMemory","navigatorHardwareConcurrency","caches","score","performanceEntry","parsedProcessingStart","parseInt","processingStart","startTime","step_name","stepName","distribution","maxMeasureTime","isUnloading","listenersAdded","onPageHide","persisted","onVisibilityChange","visibilityState","once","timeStamp","capture","MAX_SESSION_IN_SECONDS","recordSessionDuration","sessionHasEnded","round","session_duration","session_end","session_start","initPageResize","requestAnimationFrame","cbDBInit","cbDBReady","initByDB","onDBInit","onDBReady","uaaDataInDB","dbUAAData","setUAAValues","experimentExposureHash","init","analyticsConfig","languages","expExposures","initExposureHash","identify","automatedEvents","Button","label","button","automatedLogEvent","componentName","component_name","stringToByteArray$1","str","out","p","charCodeAt","base64","byteToCharMap_","charToByteMap_","byteToCharMapWebSafe_","charToByteMapWebSafe_","ENCODED_VALS_BASE","ENCODED_VALS","ENCODED_VALS_WEBSAFE","HAS_NATIVE_SUPPORT","atob","encodeByteArray","webSafe","init_","byteToCharMap","output","byte1","haveByte2","byte2","haveByte3","byte3","outByte1","outByte2","outByte3","outByte4","encodeString","btoa","decodeString","bytes","pos","c1","fromCharCode","c2","c3","byteArrayToString","decodeStringToByteArray","charToByteMap","charAt","byte4","DecodeBase64StringError","base64urlEncodeWithoutPadding","utf8Bytes","base64Encode","base64Decode","getDefaultsFromGlobal","self","g","getGlobal","__FIREBASE_DEFAULTS__","getDefaults","process","env","defaultsJsonString","parse","getDefaultsFromEnvVariable","match","cookie","decoded","getDefaultsFromCookie","info","getDefaultAppConfig","_a","Deferred","wrapCallback","isIndexedDBAvailable","validateIndexedDBOpenable","preExist","DB_CHECK_NAME","onsuccess","close","deleteDatabase","onupgradeneeded","onerror","FirebaseError","code","customData","setPrototypeOf","ErrorFactory","create","service","serviceName","errors","fullCode","template","PATTERN","_","replaceTemplate","fullMessage","deepEqual","b","aKeys","bKeys","k","aProp","bProp","isObject","thing","getModularInstance","_delegate","isResourceTiming","isElementTiming","maxTime","reportOptions","enableNavigationTracking","getEntriesByType","d","beacon","css","img","other","script","total","xmlhttprequest","h","T","y","isHidden","didChange","hidden","PerformanceObserver","getEntries","observe","buffered","S","E","M","parseFloat","toFixed","w","pow","C","navigationType","L","instant","quick","moderate","slow","unavoidable","O","x","B","N","P","I","vitalsThresholds","maxOutlierThreshold","D","F","j","q","R","readyState","domInteractive","domContentLoadedEventStart","domComplete","A","nodeName","nodeType","toUpperCase","H","id","className","parentNode","z","W","V","G","activationStart","J","prerendering","wasDiscarded","delta","floor","U","supportedEntryTypes","K","Q","X","Y","Z","$","ee","ne","te","re","firstHiddenTime","ie","disconnect","max","reportAllChanges","ae","passive","oe","ue","fe","ce","entryType","cancelable","se","de","ve","pe","me","interactionId","min","he","interactionCount","ge","ye","ke","be","Se","latency","splice","Ee","durationThreshold","takeRecords","processingEnd","eventTarget","eventType","eventTime","eventEntry","loadState","Me","we","Ce","responseStart","Le","identifier","Oe","decodedBodySize","initiatorType","xe","domainLookupStart","connectStart","requestStart","waitingTime","dnsTime","connectionTime","requestTime","navigationEntry","ttfb","hadRecentInput","sources","find","node","largestShiftTarget","largestShiftTime","largestShiftValue","largestShiftSource","largestShiftEntry","cls","timeToFirstByte","firstByteToFCP","fcpEntry","fcp","le","fid","responseEnd","element","resourceLoadDelay","resourceLoadTime","elementRenderDelay","lcpEntry","lcpResourceEntry","lcp","inp","Be","usageDetails","quota","usage","serviceWorkerRegistrations","Ne","finalMarkToStepsMap","startMarkToStepsMap","active","navigationSteps","Pe","De","Fe","je","getEntriesByName","threshold","start","end","detail","qe","Re","He","throw","_e","sent","trys","ops","pop","Ae","ze","We","Ve","Ge","resourceTiming","elementTiming","fetchTime","fetchStart","workerTime","workerStart","totalTime","downloadTime","headerSize","transferSize","encodedBodySize","dnsLookupTime","domainLookupEnd","redirectEnd","redirectStart","connection","storage","estimate","marks","endPaint","clear","clearMarks","markNTBT","clearTimeout","cachedSetTimeout","cachedClearTimeout","module","exports","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","array","noop","nextTick","title","argv","versions","on","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","FUNC_TYPE","UNDEF_TYPE","OBJ_TYPE","STR_TYPE","MAJOR","MODEL","NAME","TYPE","VENDOR","VERSION","ARCHITECTURE","CONSOLE","MOBILE","TABLET","SMARTTV","WEARABLE","EMBEDDED","AMAZON","APPLE","ASUS","BLACKBERRY","BROWSER","CHROME","FIREFOX","GOOGLE","HUAWEI","LG","MICROSOFT","MOTOROLA","OPERA","SAMSUNG","SHARP","SONY","XIAOMI","ZEBRA","FACEBOOK","CHROMIUM_OS","MAC_OS","enumerize","enums","str1","str2","lowerize","indexOf","trim","substring","rgxMapper","ua","arrays","props","exec","strMapper","windowsVersionMap","regexes","cpu","engine","EDGE","UAParser","extensions","_navigator","_ua","_uach","userAgentData","_rgxmap","mergedRegexes","extend","_isSelfNav","getBrowser","_browser","split","brave","isBrave","getCPU","_cpu","getDevice","_device","mobile","standalone","maxTouchPoints","getEngine","_engine","getOS","_os","getUA","setUA","CPU","DEVICE","ENGINE","OS","jQuery","Zepto","parser","DEFAULT_VAPID_KEY","ENDPOINT","FCM_MSG","CONSOLE_CAMPAIGN_ID","SDK_PLATFORM_WEB","EVENT_MESSAGE_DELIVERED","MessageType$1","MessageType","arrayToBase64","uint8Array","Uint8Array","base64ToArray","base64String","repeat","rawData","outputArray","OLD_DB_NAME","OLD_DB_VERSION","OLD_OBJECT_STORE_NAME","DATABASE_NAME","DATABASE_VERSION","OBJECT_STORE_NAME","dbPromise","getDbPromise","upgradeDb","dbGet","firebaseDependencies","getKey","tokenDetails","oldTokenDetails","senderId","dbNames","databases","upgradeTransaction","contains","oldDetails","p256dh","endpoint","token","fcmToken","createTime","subscriptionOptions","swScope","vapidKey","checkTokenDetails","migrateOldDatabase","appConfig","dbSet","appId","ERROR_MAP","ERROR_FACTORY","requestDeleteToken","unsubscribeOptions","getHeaders","response","getEndpoint","responseData","json","errorInfo","projectId","installations","authToken","getToken","Headers","Accept","apiKey","getBody","applicationPubKey","TOKEN_EXPIRATION_MS","getTokenInternal","messaging","pushSubscription","swRegistration","subscription","pushManager","getSubscription","subscribe","userVisibleOnly","applicationServerKey","getPushSubscription","scope","dbOptions","currentOptions","isVapidKeyEqual","isEndpointEqual","isAuthEqual","isP256dhEqual","isTokenValid","updatedToken","updateOptions","requestUpdateToken","updatedTokenDetails","updateToken","getNewToken","deleteTokenInternal","dbRemove","unsubscribe","subscribeOptions","requestGetToken","stageLog","internalPayload","fcmEvent","_b","project_number","fcmMessageId","message_id","instance_id","notification","message_type","DISPLAY_NOTIFICATION","DATA_MESSAGE","sdk_platform","package_name","origin","collapse_key","fcmOptions","analytics_label","createFcmEvent","getId","productId","event_time_ms","source_extension_json_proto3","compliance_data","complianceData","privacy_context","prequest","origin_associated_product_id","buildComplianceData","logEvents","createAndEnqueueLogEvent","_mergeStrings","s1","s2","resultArray","onPush","getMessagePayloadInternal","deliveryMetricsExportedToBigQueryEnabled","clientList","getClientList","startsWith","hasVisibleClients","isFirebaseMessaging","messageType","PUSH_RECEIVED","sendMessagePayloadInternalToWindows","notificationPayloadInternal","actions","maxActions","Notification","registration","showNotification","wrappedInternalPayload","wrapInternalPayload","onBackgroundMessageHandler","payload","collapseKey","messageId","messagePayloadInternal","image","icon","propagateNotificationPayload","propagateDataPayload","_c","_d","click_action","link","analyticsLabel","propagateFcmOptions","externalizePayload","onNotificationClick","stopImmediatePropagation","getLink","href","originUrl","host","clientUrl","getWindowClient","ms","clients","openWindow","NOTIFICATION_CLICKED","matchAll","includeUncontrolled","getMissingValueError","valueName","MessagingService","app","analyticsProvider","onMessageHandler","isLogServiceStarted","configKeys","keyName","appName","messagingSenderId","extractAppConfig","_delete","SwMessagingFactory","container","getProvider","getImmediate","waitUntil","newSubscription","onSubChange","getMessagingInSw","ServiceWorkerRegistration","hasOwnProperty","PushSubscription","isSwSupported","isSupported","onBackgroundMessage","nextOrObserver","onBackgroundMessage$1"],"sourceRoot":""}